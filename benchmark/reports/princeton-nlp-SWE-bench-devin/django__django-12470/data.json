{
  "instance_id": "django__django-12470",
  "model_patch": "diff --git a/django/db/models/sql/compiler.py b/django/db/models/sql/compiler.py\nindex 92213a4e67..12ba249cf8 100644\n--- a/django/db/models/sql/compiler.py\n+++ b/django/db/models/sql/compiler.py\n@@ -289,65 +289,72 @@ class SQLCompiler:\n \n         order_by = []\n         for field in ordering:\n-            if hasattr(field, 'resolve_expression'):\n-                if isinstance(field, Value):\n-                    # output_field must be resolved for constants.\n-                    field = Cast(field, field.output_field)\n-                if not isinstance(field, OrderBy):\n-                    field = field.asc()\n-                if not self.query.standard_ordering:\n-                    field = field.copy()\n-                    field.reverse_ordering()\n-                order_by.append((field, False))\n-                continue\n-            if field == '?':  # random\n-                order_by.append((OrderBy(Random()), False))\n-                continue\n-\n-            col, order = get_order_dir(field, asc)\n-            descending = order == 'DESC'\n+            # Check if the field specifies ordering by primary key in descending order\n+            # This ensures that the \"-pk\" ordering specified in the Parent class Meta\n+            # is respected in the child model's query, translating to a DESC order in SQL.\n+            if field == '-pk':\n+                # Ensure the SQL query reflects the descending order\n+                order_by.append((OrderBy(field.lstrip('-'), descending=True), False))\n+            else:\n+                if hasattr(field, 'resolve_expression'):\n+                    if isinstance(field, Value):\n+                        # output_field must be resolved for constants.\n+                        field = Cast(field, field.output_field)\n+                    if not isinstance(field, OrderBy):\n+                        field = field.asc()\n+                    if not self.query.standard_ordering:\n+                        field = field.copy()\n+                        field.reverse_ordering()\n+                    order_by.append((field, False))\n+                    continue\n+                if field == '?':  # random\n+                    order_by.append((OrderBy(Random()), False))\n+                    continue\n \n-            if col in self.query.annotation_select:\n-                # Reference to expression in SELECT clause\n-                order_by.append((\n-                    OrderBy(Ref(col, self.query.annotation_select[col]), descending=descending),\n-                    True))\n-                continue\n-            if col in self.query.annotations:\n-                # References to an expression which is masked out of the SELECT\n-                # clause.\n-                expr = self.query.annotations[col]\n-                if isinstance(expr, Value):\n-                    # output_field must be resolved for constants.\n-                    expr = Cast(expr, expr.output_field)\n-                order_by.append((OrderBy(expr, descending=descending), False))\n-                continue\n+                col, order = get_order_dir(field, asc)\n+                descending = order == 'DESC'\n \n-            if '.' in field:\n-                # This came in through an extra(order_by=...) addition. Pass it\n-                # on verbatim.\n-                table, col = col.split('.', 1)\n-                order_by.append((\n-                    OrderBy(\n-                        RawSQL('%s.%s' % (self.quote_name_unless_alias(table), col), []),\n-                        descending=descending\n-                    ), False))\n-                continue\n+                if col in self.query.annotation_select:\n+                    # Reference to expression in SELECT clause\n+                    order_by.append((\n+                        OrderBy(Ref(col, self.query.annotation_select[col]), descending=descending),\n+                        True))\n+                    continue\n+                if col in self.query.annotations:\n+                    # References to an expression which is masked out of the SELECT\n+                    # clause.\n+                    expr = self.query.annotations[col]\n+                    if isinstance(expr, Value):\n+                        # output_field must be resolved for constants.\n+                        expr = Cast(expr, expr.output_field)\n+                    order_by.append((OrderBy(expr, descending=descending), False))\n+                    continue\n \n-            if not self.query.extra or col not in self.query.extra:\n-                # 'col' is of the form 'field' or 'field1__field2' or\n-                # '-field1__field2__field', etc.\n-                order_by.extend(self.find_ordering_name(\n-                    field, self.query.get_meta(), default_order=asc))\n-            else:\n-                if col not in self.query.extra_select:\n+                if '.' in field:\n+                    # This came in through an extra(order_by=...) addition. Pass it\n+                    # on verbatim.\n+                    table, col = col.split('.', 1)\n                     order_by.append((\n-                        OrderBy(RawSQL(*self.query.extra[col]), descending=descending),\n-                        False))\n+                        OrderBy(\n+                            RawSQL('%s.%s' % (self.quote_name_unless_alias(table), col), []),\n+                            descending=descending\n+                        ), False))\n+                    continue\n+\n+                if not self.query.extra or col not in self.query.extra:\n+                    # 'col' is of the form 'field' or 'field1__field2' or\n+                    # '-field1__field2__field', etc.\n+                    order_by.extend(self.find_ordering_name(\n+                        field, self.query.get_meta(), default_order=asc))\n                 else:\n-                    order_by.append((\n-                        OrderBy(Ref(col, RawSQL(*self.query.extra[col])), descending=descending),\n-                        True))\n+                    if col not in self.query.extra_select:\n+                        order_by.append((\n+                            OrderBy(RawSQL(*self.query.extra[col]), descending=descending),\n+                            False))\n+                    else:\n+                        order_by.append((\n+                            OrderBy(Ref(col, RawSQL(*self.query.extra[col])), descending=descending),\n+                            True))\n         result = []\n         seen = set()\n \n",
  "model_name_or_path": "Devin",
  "pass_or_fail": "fail",
  "model_patch_files": [
    "django/db/models/sql/compiler.py"
  ],
  "repo": "django/django",
  "base_commit": "142ab6846ac09d6d401e26fc8b6b988a583ac0f5",
  "patch": "diff --git a/django/db/models/sql/compiler.py b/django/db/models/sql/compiler.py\n--- a/django/db/models/sql/compiler.py\n+++ b/django/db/models/sql/compiler.py\n@@ -709,9 +709,9 @@ def find_ordering_name(self, name, opts, alias=None, default_order='ASC',\n         field, targets, alias, joins, path, opts, transform_function = self._setup_joins(pieces, opts, alias)\n \n         # If we get to this point and the field is a relation to another model,\n-        # append the default ordering for that model unless the attribute name\n-        # of the field is specified.\n-        if field.is_relation and opts.ordering and getattr(field, 'attname', None) != name:\n+        # append the default ordering for that model unless it is the pk\n+        # shortcut or the attribute name of the field that is specified.\n+        if field.is_relation and opts.ordering and getattr(field, 'attname', None) != name and name != 'pk':\n             # Firstly, avoid infinite loops.\n             already_seen = already_seen or set()\n             join_tuple = tuple(getattr(self.query.alias_map[j], 'join_cols', None) for j in joins)\n",
  "test_patch": "diff --git a/tests/model_inheritance/models.py b/tests/model_inheritance/models.py\n--- a/tests/model_inheritance/models.py\n+++ b/tests/model_inheritance/models.py\n@@ -181,6 +181,8 @@ class GrandParent(models.Model):\n     place = models.ForeignKey(Place, models.CASCADE, null=True, related_name='+')\n \n     class Meta:\n+        # Ordering used by test_inherited_ordering_pk_desc.\n+        ordering = ['-pk']\n         unique_together = ('first_name', 'last_name')\n \n \ndiff --git a/tests/model_inheritance/tests.py b/tests/model_inheritance/tests.py\n--- a/tests/model_inheritance/tests.py\n+++ b/tests/model_inheritance/tests.py\n@@ -7,7 +7,7 @@\n \n from .models import (\n     Base, Chef, CommonInfo, GrandChild, GrandParent, ItalianRestaurant,\n-    MixinModel, ParkingLot, Place, Post, Restaurant, Student, SubBase,\n+    MixinModel, Parent, ParkingLot, Place, Post, Restaurant, Student, SubBase,\n     Supplier, Title, Worker,\n )\n \n@@ -204,6 +204,19 @@ class A(models.Model):\n \n         self.assertEqual(A.attr.called, (A, 'attr'))\n \n+    def test_inherited_ordering_pk_desc(self):\n+        p1 = Parent.objects.create(first_name='Joe', email='joe@email.com')\n+        p2 = Parent.objects.create(first_name='Jon', email='jon@email.com')\n+        expected_order_by_sql = 'ORDER BY %s.%s DESC' % (\n+            connection.ops.quote_name(Parent._meta.db_table),\n+            connection.ops.quote_name(\n+                Parent._meta.get_field('grandparent_ptr').column\n+            ),\n+        )\n+        qs = Parent.objects.all()\n+        self.assertSequenceEqual(qs, [p2, p1])\n+        self.assertIn(expected_order_by_sql, str(qs.query))\n+\n \n class ModelInheritanceDataTests(TestCase):\n     @classmethod\n",
  "problem_statement": "Inherited model doesn't correctly order by \"-pk\" when specified on Parent.Meta.ordering\nDescription\n\t\nGiven the following model definition:\nfrom django.db import models\nclass Parent(models.Model):\n\tclass Meta:\n\t\tordering = [\"-pk\"]\nclass Child(Parent):\n\tpass\nQuerying the Child class results in the following:\n>>> print(Child.objects.all().query)\nSELECT \"myapp_parent\".\"id\", \"myapp_child\".\"parent_ptr_id\" FROM \"myapp_child\" INNER JOIN \"myapp_parent\" ON (\"myapp_child\".\"parent_ptr_id\" = \"myapp_parent\".\"id\") ORDER BY \"myapp_parent\".\"id\" ASC\nThe query is ordered ASC but I expect the order to be DESC.\n",
  "hints_text": "",
  "created_at": "2020-02-19T04:48:55Z",
  "version": "3.1",
  "FAIL_TO_PASS": "[\"test_inherited_ordering_pk_desc (model_inheritance.tests.ModelInheritanceTests)\"]",
  "PASS_TO_PASS": "[\"Creating a child with non-abstract parents only issues INSERTs.\", \"test_abstract (model_inheritance.tests.ModelInheritanceTests)\", \"test_abstract_fk_related_name (model_inheritance.tests.InheritanceSameModelNameTests)\", \"test_abstract_parent_link (model_inheritance.tests.ModelInheritanceTests)\", \"test_custompk_m2m (model_inheritance.tests.ModelInheritanceTests)\", \"test_eq (model_inheritance.tests.ModelInheritanceTests)\", \"test_exclude_inherited_on_null (model_inheritance.tests.ModelInheritanceDataTests)\", \"test_filter_inherited_model (model_inheritance.tests.ModelInheritanceDataTests)\", \"test_filter_inherited_on_null (model_inheritance.tests.ModelInheritanceDataTests)\", \"test_filter_on_parent_returns_object_of_parent_type (model_inheritance.tests.ModelInheritanceDataTests)\", \"test_inherited_does_not_exist_exception (model_inheritance.tests.ModelInheritanceDataTests)\", \"test_inherited_multiple_objects_returned_exception (model_inheritance.tests.ModelInheritanceDataTests)\", \"test_init_subclass (model_inheritance.tests.ModelInheritanceTests)\", \"test_meta_fields_and_ordering (model_inheritance.tests.ModelInheritanceTests)\", \"test_mixin_init (model_inheritance.tests.ModelInheritanceTests)\", \"test_model_with_distinct_accessors (model_inheritance.tests.ModelInheritanceTests)\", \"test_model_with_distinct_related_query_name (model_inheritance.tests.ModelInheritanceTests)\", \"test_parent_cache_reuse (model_inheritance.tests.ModelInheritanceDataTests)\", \"test_parent_child_one_to_one_link (model_inheritance.tests.ModelInheritanceDataTests)\", \"test_parent_child_one_to_one_link_on_nonrelated_objects (model_inheritance.tests.ModelInheritanceDataTests)\", \"test_parent_fields_available_for_filtering_in_child_model (model_inheritance.tests.ModelInheritanceDataTests)\", \"test_related_objects_for_inherited_models (model_inheritance.tests.ModelInheritanceDataTests)\", \"test_reverse_relation_for_different_hierarchy_tree (model_inheritance.tests.ModelInheritanceTests)\", \"test_select_related_defer (model_inheritance.tests.ModelInheritanceDataTests)\", \"test_select_related_works_on_parent_model_fields (model_inheritance.tests.ModelInheritanceDataTests)\", \"test_set_name (model_inheritance.tests.ModelInheritanceTests)\", \"test_unique (model_inheritance.tests.InheritanceUniqueTests)\", \"test_unique_together (model_inheritance.tests.InheritanceUniqueTests)\", \"test_update_inherited_model (model_inheritance.tests.ModelInheritanceDataTests)\", \"test_update_parent_filtering (model_inheritance.tests.ModelInheritanceTests)\", \"test_update_query_counts (model_inheritance.tests.ModelInheritanceDataTests)\", \"test_update_works_on_parent_and_child_models_at_once (model_inheritance.tests.ModelInheritanceDataTests)\", \"test_values_works_on_parent_model_fields (model_inheritance.tests.ModelInheritanceDataTests)\"]",
  "environment_setup_commit": "0668164b4ac93a5be79f5b87fae83c657124d9ab",
  "patch_files": [
    "django/db/models/sql/compiler.py"
  ],
  "test_patch_files": [
    "tests/model_inheritance/models.py",
    "tests/model_inheritance/tests.py"
  ],
  "patch_diff_details": {
    "django/db/models/sql/compiler.py": {
      "diffs": [
        {
          "start_line_old": 712,
          "end_line_old": 714,
          "file_pos": 5,
          "file_context_length": 62378,
          "closest_snippet_id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler.get_order_by.8_SQLCompiler.get_order_by.9.1",
          "closest_snippet_line_distance": 327,
          "pos": 14,
          "context_length": 4244
        }
      ]
    }
  },
  "vectors": 3437,
  "snippets": [
    {
      "position": 1,
      "id": "/tmp/repos/django/django/db/models/base.py_Model._get_next_or_previous_in_order_Model._get_next_or_previous_in_order.3.1",
      "distance": 0.9030814170837402,
      "file_path": "django/db/models/base.py",
      "start_line": 968,
      "end_line": 981,
      "tokens": 180,
      "context_length": 180
    },
    {
      "position": 2,
      "id": "/tmp/repos/django/django/db/models/base.py_35_",
      "distance": 0.9531069993972778,
      "file_path": "django/db/models/base.py",
      "start_line": 1867,
      "end_line": 1918,
      "tokens": 351,
      "context_length": 531
    },
    {
      "position": 3,
      "id": "/tmp/repos/django/django/contrib/admin/options.py_BaseModelAdmin.get_field_queryset_BaseModelAdmin.get_field_queryset.4.1",
      "distance": 0.9779679775238037,
      "file_path": "django/contrib/admin/options.py",
      "start_line": 205,
      "end_line": 216,
      "tokens": 135,
      "context_length": 666
    },
    {
      "position": 4,
      "id": "/tmp/repos/django/django/db/models/base.py_Model._check_ordering_Model._check_ordering.29.1",
      "distance": 0.9956175088882446,
      "file_path": "django/db/models/base.py",
      "start_line": 1665,
      "end_line": 1763,
      "tokens": 717,
      "context_length": 1383
    },
    {
      "position": 5,
      "id": "/tmp/repos/django/django/db/models/base.py_Model._get_next_or_previous_by_FIELD_Model._get_next_or_previous_by_FIELD.8.2.1",
      "distance": 0.9997738599777222,
      "file_path": "django/db/models/base.py",
      "start_line": 952,
      "end_line": 966,
      "tokens": 212,
      "context_length": 1595
    },
    {
      "position": 6,
      "id": "/tmp/repos/django/django/contrib/admin/views/main.py_ChangeList._get_deterministic_ordering_ChangeList._get_deterministic_ordering.6.1",
      "distance": 1.0142005681991577,
      "file_path": "django/contrib/admin/views/main.py",
      "start_line": 332,
      "end_line": 392,
      "tokens": 508,
      "context_length": 2103
    },
    {
      "position": 7,
      "id": "/tmp/repos/django/django/db/models/expressions.py_OrderBy.as_sql_OrderBy.as_sql.8.1",
      "distance": 1.0245060920715332,
      "file_path": "django/db/models/expressions.py",
      "start_line": 1115,
      "end_line": 1140,
      "tokens": 248,
      "context_length": 2351
    },
    {
      "position": 8,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler.get_order_by.8_SQLCompiler.get_order_by.9.1",
      "distance": 1.0246061086654663,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 354,
      "end_line": 387,
      "tokens": 388,
      "context_length": 2739,
      "file_pos": 5
    },
    {
      "position": 9,
      "id": "/tmp/repos/django/django/db/models/options.py_Options.get_base_chain_Options.get_parent_list.4.1",
      "distance": 1.0274156332015991,
      "file_path": "django/db/models/options.py",
      "start_line": 579,
      "end_line": 605,
      "tokens": 197,
      "context_length": 2936
    },
    {
      "position": 10,
      "id": "/tmp/repos/django/django/db/models/expressions.py_OrderBy.as_oracle_OrderBy.desc.self.descending.1",
      "distance": 1.0532643795013428,
      "file_path": "django/db/models/expressions.py",
      "start_line": 1142,
      "end_line": 1172,
      "tokens": 218,
      "context_length": 3154
    },
    {
      "position": 11,
      "id": "/tmp/repos/django/django/db/models/expressions.py_OrderBy_OrderBy.get_source_expressions.1.1",
      "distance": 1.0595476627349854,
      "file_path": "django/db/models/expressions.py",
      "start_line": 1091,
      "end_line": 1113,
      "tokens": 188,
      "context_length": 3342
    },
    {
      "position": 12,
      "id": "/tmp/repos/django/django/db/migrations/autodetector.py_MigrationAutodetector._sort_migrations_MigrationAutodetector._sort_migrations.2.dependency_graph.4",
      "distance": 1.064318299293518,
      "file_path": "django/db/migrations/autodetector.py",
      "start_line": 337,
      "end_line": 356,
      "tokens": 196,
      "context_length": 3538
    },
    {
      "position": 13,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.join_parent_model_Query.join_parent_model.7.1",
      "distance": 1.0820543766021729,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 984,
      "end_line": 1015,
      "tokens": 307,
      "context_length": 3845
    },
    {
      "position": 14,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler.find_ordering_name_SQLCompiler.find_ordering_name.11.1",
      "distance": 1.082817554473877,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 699,
      "end_line": 733,
      "tokens": 399,
      "context_length": 4244,
      "file_pos": 8
    },
    {
      "position": 15,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.add_ordering_Query.clear_ordering.4.self.default_ordering.1",
      "distance": 1.0934014320373535,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1886,
      "end_line": 1919,
      "tokens": 279,
      "context_length": 4523
    },
    {
      "position": 16,
      "id": "/tmp/repos/django/django/db/migrations/operations/models.py_AlterOrderWithRespectTo.database_backwards_AlterOrderWithRespectTo.describe.1.1",
      "distance": 1.0953989028930664,
      "file_path": "django/db/migrations/operations/models.py",
      "start_line": 609,
      "end_line": 622,
      "tokens": 137,
      "context_length": 4660
    },
    {
      "position": 17,
      "id": "/tmp/repos/django/django/db/migrations/autodetector.py_MigrationAutodetector.generate_altered_order_with_respect_to_MigrationAutodetector.generate_altered_order_with_respect_to.1.4.dependencies.4",
      "distance": 1.1022813320159912,
      "file_path": "django/db/migrations/autodetector.py",
      "start_line": 1182,
      "end_line": 1207,
      "tokens": 245,
      "context_length": 4905
    },
    {
      "position": 18,
      "id": "/tmp/repos/django/django/contrib/admin/views/main.py_ChangeList._get_default_ordering_ChangeList.get_ordering_field.2.3.3.5.1",
      "distance": 1.1130070686340332,
      "file_path": "django/contrib/admin/views/main.py",
      "start_line": 257,
      "end_line": 287,
      "tokens": 270,
      "context_length": 5175
    },
    {
      "position": 19,
      "id": "/tmp/repos/django/django/db/models/fields/related_descriptors.py_ForwardManyToOneDescriptor.get_prefetch_queryset_ForwardManyToOneDescriptor.get_object.3.1",
      "distance": 1.1236971616744995,
      "file_path": "django/db/models/fields/related_descriptors.py",
      "start_line": 120,
      "end_line": 154,
      "tokens": 405,
      "context_length": 5580
    },
    {
      "position": 20,
      "id": "/tmp/repos/django/django/db/migrations/operations/models.py_AlterOrderWithRespectTo_AlterOrderWithRespectTo.state_forwards.3",
      "distance": 1.1253459453582764,
      "file_path": "django/db/migrations/operations/models.py",
      "start_line": 566,
      "end_line": 589,
      "tokens": 183,
      "context_length": 5763
    },
    {
      "position": 21,
      "id": "/tmp/repos/django/django/db/models/base.py_Model_Model.__init__.cls.19",
      "distance": 1.1314210891723633,
      "file_path": "django/db/models/base.py",
      "start_line": 404,
      "end_line": 503,
      "tokens": 856,
      "context_length": 6619
    },
    {
      "position": 22,
      "id": "/tmp/repos/django/django/db/models/__init__.py_1_",
      "distance": 1.1351959705352783,
      "file_path": "django/db/models/__init__.py",
      "start_line": 1,
      "end_line": 52,
      "tokens": 605,
      "context_length": 7224
    },
    {
      "position": 23,
      "id": "/tmp/repos/django/django/db/models/fields/related_descriptors.py_ReverseOneToOneDescriptor.get_prefetch_queryset_ReverseOneToOneDescriptor.get_prefetch_queryset.11.1",
      "distance": 1.1407747268676758,
      "file_path": "django/db/models/fields/related_descriptors.py",
      "start_line": 365,
      "end_line": 381,
      "tokens": 184,
      "context_length": 7408
    },
    {
      "position": 24,
      "id": "/tmp/repos/django/django/db/models/query.py_RawQuerySet.resolve_model_init_order_RawQuerySet.resolve_model_init_order.7.1",
      "distance": 1.1412973403930664,
      "file_path": "django/db/models/query.py",
      "start_line": 1400,
      "end_line": 1408,
      "tokens": 136,
      "context_length": 7544
    },
    {
      "position": 25,
      "id": "/tmp/repos/django/django/views/generic/list.py_MultipleObjectMixin.get_ordering_MultipleObjectMixin.paginate_queryset.6.3.1",
      "distance": 1.1417324542999268,
      "file_path": "django/views/generic/list.py",
      "start_line": 50,
      "end_line": 75,
      "tokens": 244,
      "context_length": 7788
    },
    {
      "position": 26,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.names_to_path.3_Query.names_to_path.4.1",
      "distance": 1.1450212001800537,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1437,
      "end_line": 1515,
      "tokens": 734,
      "context_length": 8522
    },
    {
      "position": 27,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_get_order_dir_get_order_dir.4.1",
      "distance": 1.1472358703613281,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 2256,
      "end_line": 2267,
      "tokens": 116,
      "context_length": 8638
    },
    {
      "position": 28,
      "id": "/tmp/repos/django/django/db/models/base.py_Model.save_base.alters_data_Model._save_parents.5.1",
      "distance": 1.148134708404541,
      "file_path": "django/db/models/base.py",
      "start_line": 802,
      "end_line": 830,
      "tokens": 307,
      "context_length": 8945
    },
    {
      "position": 29,
      "id": "/tmp/repos/django/django/contrib/contenttypes/fields.py_GenericRelation._get_path_info_with_parent_GenericRelation._get_path_info_with_parent.22.1",
      "distance": 1.1498548984527588,
      "file_path": "django/contrib/contenttypes/fields.py",
      "start_line": 356,
      "end_line": 394,
      "tokens": 405,
      "context_length": 9350
    },
    {
      "position": 30,
      "id": "/tmp/repos/django/django/db/migrations/operations/models.py_AlterOrderWithRespectTo.database_forwards_AlterOrderWithRespectTo.database_forwards.2.3.4.3",
      "distance": 1.1531074047088623,
      "file_path": "django/db/migrations/operations/models.py",
      "start_line": 591,
      "end_line": 607,
      "tokens": 215,
      "context_length": 9565
    },
    {
      "position": 31,
      "id": "/tmp/repos/django/django/db/models/base.py_ModelBase.__new__.45_ModelBase.__new__.52.1",
      "distance": 1.1543973684310913,
      "file_path": "django/db/models/base.py",
      "start_line": 212,
      "end_line": 322,
      "tokens": 866,
      "context_length": 10431
    },
    {
      "position": 32,
      "id": "/tmp/repos/django/django/db/models/fields/related_descriptors.py_ReverseManyToOneDescriptor_ReverseManyToOneDescriptor.__set__.1",
      "distance": 1.1558551788330078,
      "file_path": "django/db/models/fields/related_descriptors.py",
      "start_line": 494,
      "end_line": 548,
      "tokens": 338,
      "context_length": 10769
    },
    {
      "position": 33,
      "id": "/tmp/repos/django/django/db/models/fields/related.py_ManyToManyField._check_relationship_model_ManyToManyField._check_relationship_model.3.3.9.3.seen_from.5.1",
      "distance": 1.1646833419799805,
      "file_path": "django/db/models/fields/related.py",
      "start_line": 1235,
      "end_line": 1352,
      "tokens": 963,
      "context_length": 11732
    },
    {
      "position": 34,
      "id": "/tmp/repos/django/django/db/models/fields/related_descriptors.py_ReverseOneToOneDescriptor.RelatedObjectDoesNotExist_ReverseOneToOneDescriptor.get_queryset.1.1",
      "distance": 1.1665258407592773,
      "file_path": "django/db/models/fields/related_descriptors.py",
      "start_line": 344,
      "end_line": 363,
      "tokens": 156,
      "context_length": 11888
    },
    {
      "position": 35,
      "id": "/tmp/repos/django/django/db/models/deletion.py_Collector.sort_Collector.sort.self.data.1",
      "distance": 1.1669318675994873,
      "file_path": "django/db/models/deletion.py",
      "start_line": 361,
      "end_line": 377,
      "tokens": 130,
      "context_length": 12018
    },
    {
      "position": 36,
      "id": "/tmp/repos/django/django/db/models/options.py_bisect_DEFAULT_NAMES.1",
      "distance": 1.1677558422088623,
      "file_path": "django/db/models/options.py",
      "start_line": 1,
      "end_line": 34,
      "tokens": 285,
      "context_length": 12303
    },
    {
      "position": 37,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler._setup_joins_SQLCompiler._setup_joins.5.1",
      "distance": 1.1683473587036133,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 735,
      "end_line": 746,
      "tokens": 147,
      "context_length": 12450,
      "file_pos": 16
    },
    {
      "position": 38,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler.get_order_by_SQLCompiler.get_order_by.seen.1",
      "distance": 1.1743884086608887,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 265,
      "end_line": 352,
      "tokens": 696,
      "context_length": 13146,
      "file_pos": 16
    },
    {
      "position": 39,
      "id": "/tmp/repos/django/django/db/backends/mysql/operations.py_DatabaseOperations.date_interval_sql_DatabaseOperations.random_function_sql.1.1",
      "distance": 1.1747106313705444,
      "file_path": "django/db/backends/mysql/operations.py",
      "start_line": 143,
      "end_line": 174,
      "tokens": 294,
      "context_length": 13440
    },
    {
      "position": 40,
      "id": "/tmp/repos/django/django/core/serializers/__init__.py_sort_dependencies_",
      "distance": 1.1748403310775757,
      "file_path": "django/core/serializers/__init__.py",
      "start_line": 159,
      "end_line": 235,
      "tokens": 676,
      "context_length": 14116
    },
    {
      "position": 41,
      "id": "/tmp/repos/django/django/forms/models.py_BaseModelFormSet.get_queryset_BaseModelFormSet.get_queryset.2.1",
      "distance": 1.1754260063171387,
      "file_path": "django/forms/models.py",
      "start_line": 629,
      "end_line": 646,
      "tokens": 167,
      "context_length": 14283
    },
    {
      "position": 42,
      "id": "/tmp/repos/django/django/contrib/postgres/aggregates/mixins.py_1_OrderableAggMixin.resolve_expression.2.1",
      "distance": 1.176866054534912,
      "file_path": "django/contrib/postgres/aggregates/mixins.py",
      "start_line": 1,
      "end_line": 20,
      "tokens": 182,
      "context_length": 14465
    },
    {
      "position": 43,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet.order_by_QuerySet.reverse.5.1",
      "distance": 1.1779413223266602,
      "file_path": "django/db/models/query.py",
      "start_line": 1108,
      "end_line": 1143,
      "tokens": 314,
      "context_length": 14779
    },
    {
      "position": 44,
      "id": "/tmp/repos/django/django/db/models/base.py_Model._check_property_name_related_field_accessor_clashes_Model._check_single_primary_key.3.1",
      "distance": 1.1783008575439453,
      "file_path": "django/db/models/base.py",
      "start_line": 1498,
      "end_line": 1530,
      "tokens": 231,
      "context_length": 15010
    },
    {
      "position": 45,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.bump_prefix_Query.bump_prefix.prefix_gen.5.prefix.1",
      "distance": 1.1802881956100464,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 867,
      "end_line": 890,
      "tokens": 203,
      "context_length": 15213
    },
    {
      "position": 46,
      "id": "/tmp/repos/django/django/db/models/sql/datastructures.py_Join.relabeled_clone_Join.relabeled_clone.4.1",
      "distance": 1.1807045936584473,
      "file_path": "django/db/models/sql/datastructures.py",
      "start_line": 104,
      "end_line": 115,
      "tokens": 133,
      "context_length": 15346
    },
    {
      "position": 47,
      "id": "/tmp/repos/django/django/db/models/fields/related_descriptors.py_ForwardOneToOneDescriptor.__set___ForwardOneToOneDescriptor.__set__.4.4.3",
      "distance": 1.1852781772613525,
      "file_path": "django/db/models/fields/related_descriptors.py",
      "start_line": 309,
      "end_line": 323,
      "tokens": 182,
      "context_length": 15528
    },
    {
      "position": 48,
      "id": "/tmp/repos/django/django/db/models/sql/where.py_WhereNode.get_group_by_cols_WhereNode.relabel_aliases.2.1.3.1",
      "distance": 1.1860142946243286,
      "file_path": "django/db/models/sql/where.py",
      "start_line": 117,
      "end_line": 140,
      "tokens": 185,
      "context_length": 15713
    },
    {
      "position": 49,
      "id": "/tmp/repos/django/django/db/models/base.py_ModelBase.__new__.field_names_ModelBase.__new__.44",
      "distance": 1.1870973110198975,
      "file_path": "django/db/models/base.py",
      "start_line": 169,
      "end_line": 211,
      "tokens": 413,
      "context_length": 16126
    },
    {
      "position": 50,
      "id": "/tmp/repos/django/django/db/models/query.py_Prefetch_Prefetch.__hash__.1.1",
      "distance": 1.187944769859314,
      "file_path": "django/db/models/query.py",
      "start_line": 1534,
      "end_line": 1590,
      "tokens": 481,
      "context_length": 16607
    },
    {
      "position": 51,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet.earliest_QuerySet.last.2.1.1",
      "distance": 1.1909418106079102,
      "file_path": "django/db/models/query.py",
      "start_line": 666,
      "end_line": 680,
      "tokens": 132,
      "context_length": 16739
    },
    {
      "position": 52,
      "id": "/tmp/repos/django/django/db/models/fields/related_descriptors.py_ForwardManyToOneDescriptor.__get___ForwardManyToOneDescriptor.__get__.7.2.1.1",
      "distance": 1.192203402519226,
      "file_path": "django/db/models/fields/related_descriptors.py",
      "start_line": 156,
      "end_line": 201,
      "tokens": 445,
      "context_length": 17184
    },
    {
      "position": 53,
      "id": "/tmp/repos/django/django/forms/models.py__get_foreign_key__get_foreign_key.6.1",
      "distance": 1.1942822933197021,
      "file_path": "django/forms/models.py",
      "start_line": 989,
      "end_line": 1042,
      "tokens": 470,
      "context_length": 17654
    },
    {
      "position": 54,
      "id": "/tmp/repos/django/django/core/paginator.py_Paginator._check_object_list_is_ordered_Paginator._check_object_list_is_ordered.3.2",
      "distance": 1.1945338249206543,
      "file_path": "django/core/paginator.py",
      "start_line": 113,
      "end_line": 129,
      "tokens": 142,
      "context_length": 17796
    },
    {
      "position": 55,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.deferred_to_data.8_Query.deferred_to_data.8.6.6.1",
      "distance": 1.1951860189437866,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 696,
      "end_line": 731,
      "tokens": 389,
      "context_length": 18185
    },
    {
      "position": 56,
      "id": "/tmp/repos/django/django/db/models/base.py_Model.check_Model.check.3.1",
      "distance": 1.1955289840698242,
      "file_path": "django/db/models/base.py",
      "start_line": 1253,
      "end_line": 1283,
      "tokens": 257,
      "context_length": 18442
    },
    {
      "position": 57,
      "id": "/tmp/repos/django/django/db/models/query.py_RelatedPopulator.populate_",
      "distance": 1.1961324214935303,
      "file_path": "django/db/models/query.py",
      "start_line": 1939,
      "end_line": 1962,
      "tokens": 200,
      "context_length": 18642
    },
    {
      "position": 58,
      "id": "/tmp/repos/django/django/contrib/admin/checks.py_BaseModelAdminChecks._check_ordering_item_BaseModelAdminChecks._check_ordering_item.3.4.3.3.1.1",
      "distance": 1.197110652923584,
      "file_path": "django/contrib/admin/checks.py",
      "start_line": 547,
      "end_line": 582,
      "tokens": 304,
      "context_length": 18946
    },
    {
      "position": 59,
      "id": "/tmp/repos/django/django/db/models/options.py_Options.get_path_to_parent_Options.get_path_to_parent.8.1",
      "distance": 1.1972624063491821,
      "file_path": "django/db/models/options.py",
      "start_line": 627,
      "end_line": 655,
      "tokens": 214,
      "context_length": 19160
    },
    {
      "position": 60,
      "id": "/tmp/repos/django/django/db/models/fields/related_descriptors.py_1_ForeignKeyDeferredAttribute.__set__.2",
      "distance": 1.197348713874817,
      "file_path": "django/db/models/fields/related_descriptors.py",
      "start_line": 1,
      "end_line": 79,
      "tokens": 683,
      "context_length": 19843
    },
    {
      "position": 61,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.add_filtered_relation_Query.add_filtered_relation.4",
      "distance": 1.1984453201293945,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1408,
      "end_line": 1419,
      "tokens": 137,
      "context_length": 19980
    },
    {
      "position": 62,
      "id": "/tmp/repos/django/django/contrib/admin/views/main.py_ChangeList.get_ordering_ChangeList.get_ordering.7.1",
      "distance": 1.2004634141921997,
      "file_path": "django/contrib/admin/views/main.py",
      "start_line": 289,
      "end_line": 330,
      "tokens": 388,
      "context_length": 20368
    },
    {
      "position": 63,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet._earliest_QuerySet._earliest.9.1",
      "distance": 1.2011148929595947,
      "file_path": "django/db/models/query.py",
      "start_line": 641,
      "end_line": 664,
      "tokens": 199,
      "context_length": 20567
    },
    {
      "position": 64,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet.using_QuerySet.98",
      "distance": 1.2011311054229736,
      "file_path": "django/db/models/query.py",
      "start_line": 1183,
      "end_line": 1217,
      "tokens": 234,
      "context_length": 20801
    },
    {
      "position": 65,
      "id": "/tmp/repos/django/django/db/backends/base/schema.py__all_related_fields__related_non_m2m_objects.3.1",
      "distance": 1.2016876935958862,
      "file_path": "django/db/backends/base/schema.py",
      "start_line": 31,
      "end_line": 41,
      "tokens": 120,
      "context_length": 20921
    }
  ],
  "files": [
    {
      "file_path": "django/db/models/base.py",
      "position": 1,
      "tokens": 15355,
      "context_length": 15355
    },
    {
      "file_path": "django/contrib/admin/options.py",
      "position": 2,
      "tokens": 18488,
      "context_length": 33843
    },
    {
      "file_path": "django/contrib/admin/views/main.py",
      "position": 3,
      "tokens": 4298,
      "context_length": 38141
    },
    {
      "file_path": "django/db/models/expressions.py",
      "position": 4,
      "tokens": 10181,
      "context_length": 48322
    },
    {
      "file_path": "django/db/models/sql/compiler.py",
      "position": 5,
      "tokens": 14056,
      "context_length": 62378
    },
    {
      "file_path": "django/db/models/options.py",
      "position": 6,
      "tokens": 7096,
      "context_length": 69474
    },
    {
      "file_path": "django/db/migrations/autodetector.py",
      "position": 7,
      "tokens": 11735,
      "context_length": 81209
    },
    {
      "file_path": "django/db/models/sql/query.py",
      "position": 8,
      "tokens": 21669,
      "context_length": 102878
    },
    {
      "file_path": "django/db/migrations/operations/models.py",
      "position": 9,
      "tokens": 6696,
      "context_length": 109574
    },
    {
      "file_path": "django/db/models/fields/related_descriptors.py",
      "position": 10,
      "tokens": 10395,
      "context_length": 119969
    },
    {
      "file_path": "django/db/models/__init__.py",
      "position": 11,
      "tokens": 605,
      "context_length": 120574
    },
    {
      "file_path": "django/db/models/query.py",
      "position": 12,
      "tokens": 17019,
      "context_length": 137593
    },
    {
      "file_path": "django/views/generic/list.py",
      "position": 13,
      "tokens": 1572,
      "context_length": 139165
    },
    {
      "file_path": "django/contrib/contenttypes/fields.py",
      "position": 14,
      "tokens": 5433,
      "context_length": 144598
    },
    {
      "file_path": "django/db/models/fields/related.py",
      "position": 15,
      "tokens": 13861,
      "context_length": 158459
    },
    {
      "file_path": "django/db/models/deletion.py",
      "position": 16,
      "tokens": 3815,
      "context_length": 162274
    },
    {
      "file_path": "django/db/backends/mysql/operations.py",
      "position": 17,
      "tokens": 3331,
      "context_length": 165605
    },
    {
      "file_path": "django/core/serializers/__init__.py",
      "position": 18,
      "tokens": 1648,
      "context_length": 167253
    },
    {
      "file_path": "django/forms/models.py",
      "position": 19,
      "tokens": 11721,
      "context_length": 178974
    },
    {
      "file_path": "django/contrib/postgres/aggregates/mixins.py",
      "position": 20,
      "tokens": 442,
      "context_length": 179416
    },
    {
      "file_path": "django/db/models/sql/datastructures.py",
      "position": 21,
      "tokens": 1402,
      "context_length": 180818
    },
    {
      "file_path": "django/db/models/sql/where.py",
      "position": 22,
      "tokens": 1804,
      "context_length": 182622
    },
    {
      "file_path": "django/core/paginator.py",
      "position": 23,
      "tokens": 1287,
      "context_length": 183909
    },
    {
      "file_path": "django/contrib/admin/checks.py",
      "position": 24,
      "tokens": 9007,
      "context_length": 192916
    },
    {
      "file_path": "django/db/backends/base/schema.py",
      "position": 25,
      "tokens": 11315,
      "context_length": 204231
    }
  ]
}