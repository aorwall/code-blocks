{
  "instance_id": "django__django-12908",
  "model_patch": "diff --git a/django/db/models/query.py b/django/db/models/query.py\nindex e0eeccefa6..352b2c3609 100644\n--- a/django/db/models/query.py\n+++ b/django/db/models/query.py\n@@ -1138,6 +1138,8 @@ class QuerySet:\n         \"\"\"\n         Return a new QuerySet instance that will select only distinct results.\n         \"\"\"\n+        if self.query.combinator and not connections[self.db].features.supports_distinct_on_fields:\n+            raise NotSupportedError('This database backend does not support distinct() after union().')\n         assert not self.query.is_sliced, \\\n             \"Cannot create distinct fields once a slice has been taken.\"\n         obj = self._chain()\n@@ -1418,7 +1420,7 @@ class RawQuerySet:\n         converter = connections[self.db].introspection.identifier_converter\n         model_init_fields = [f for f in self.model._meta.fields if converter(f.column) in self.columns]\n         annotation_fields = [(column, pos) for pos, column in enumerate(self.columns)\n-                             if column not in self.model_fields]\n+                             if column not in the model_fields]\n         model_init_order = [self.columns.index(converter(f.column)) for f in model_init_fields]\n         model_init_names = [f.attname for f in model_init_fields]\n         return model_init_names, model_init_order, annotation_fields\n",
  "model_name_or_path": "Devin",
  "pass_or_fail": "fail",
  "model_patch_files": [
    "django/db/models/query.py"
  ],
  "repo": "django/django",
  "base_commit": "49ae7ce50a874f8a04cd910882fb9571ff3a0d7a",
  "patch": "diff --git a/django/db/models/query.py b/django/db/models/query.py\n--- a/django/db/models/query.py\n+++ b/django/db/models/query.py\n@@ -1138,6 +1138,7 @@ def distinct(self, *field_names):\n         \"\"\"\n         Return a new QuerySet instance that will select only distinct results.\n         \"\"\"\n+        self._not_support_combined_queries('distinct')\n         assert not self.query.is_sliced, \\\n             \"Cannot create distinct fields once a slice has been taken.\"\n         obj = self._chain()\n",
  "test_patch": "diff --git a/tests/queries/test_qs_combinators.py b/tests/queries/test_qs_combinators.py\n--- a/tests/queries/test_qs_combinators.py\n+++ b/tests/queries/test_qs_combinators.py\n@@ -272,6 +272,7 @@ def test_unsupported_operations_on_combined_qs(self):\n                 'annotate',\n                 'defer',\n                 'delete',\n+                'distinct',\n                 'exclude',\n                 'extra',\n                 'filter',\n",
  "problem_statement": "Union queryset should raise on distinct().\nDescription\n\t \n\t\t(last modified by Sielc Technologies)\n\t \nAfter using\n.annotate() on 2 different querysets\nand then .union()\n.distinct() will not affect the queryset\n\tdef setUp(self) -> None:\n\t\tuser = self.get_or_create_admin_user()\n\t\tSample.h.create(user, name=\"Sam1\")\n\t\tSample.h.create(user, name=\"Sam2 acid\")\n\t\tSample.h.create(user, name=\"Sam3\")\n\t\tSample.h.create(user, name=\"Sam4 acid\")\n\t\tSample.h.create(user, name=\"Dub\")\n\t\tSample.h.create(user, name=\"Dub\")\n\t\tSample.h.create(user, name=\"Dub\")\n\t\tself.user = user\n\tdef test_union_annotated_diff_distinct(self):\n\t\tqs = Sample.objects.filter(user=self.user)\n\t\tqs1 = qs.filter(name='Dub').annotate(rank=Value(0, IntegerField()))\n\t\tqs2 = qs.filter(name='Sam1').annotate(rank=Value(1, IntegerField()))\n\t\tqs = qs1.union(qs2)\n\t\tqs = qs.order_by('name').distinct('name') # THIS DISTINCT DOESN'T WORK\n\t\tself.assertEqual(qs.count(), 2)\nexpected to get wrapped union\n\tSELECT DISTINCT ON (siebox_sample.name) * FROM (SELECT ... UNION SELECT ...) AS siebox_sample\n",
  "hints_text": "distinct() is not supported but doesn't raise an error yet. As \u200b\u200bper the documentation, \"only LIMIT, OFFSET, COUNT(*), ORDER BY, and specifying columns (i.e. slicing, count(), order_by(), and values()/values_list()) are allowed on the resulting QuerySet.\". Follow up to #27995.",
  "created_at": "2020-05-13T11:36:48Z",
  "version": "3.2",
  "FAIL_TO_PASS": "[\"test_unsupported_operations_on_combined_qs (queries.test_qs_combinators.QuerySetSetOperationTests)\", \"test_unsupported_ordering_slicing_raises_db_error (queries.test_qs_combinators.QuerySetSetOperationTests)\"]",
  "PASS_TO_PASS": "[\"test_combining_multiple_models (queries.test_qs_combinators.QuerySetSetOperationTests)\", \"test_count_difference (queries.test_qs_combinators.QuerySetSetOperationTests)\", \"test_count_intersection (queries.test_qs_combinators.QuerySetSetOperationTests)\", \"test_count_union (queries.test_qs_combinators.QuerySetSetOperationTests)\", \"test_count_union_empty_result (queries.test_qs_combinators.QuerySetSetOperationTests)\", \"test_difference_with_empty_qs (queries.test_qs_combinators.QuerySetSetOperationTests)\", \"test_difference_with_values (queries.test_qs_combinators.QuerySetSetOperationTests)\", \"test_intersection_with_empty_qs (queries.test_qs_combinators.QuerySetSetOperationTests)\", \"test_intersection_with_values (queries.test_qs_combinators.QuerySetSetOperationTests)\", \"test_limits (queries.test_qs_combinators.QuerySetSetOperationTests)\", \"test_order_by_same_type (queries.test_qs_combinators.QuerySetSetOperationTests)\", \"test_order_raises_on_non_selected_column (queries.test_qs_combinators.QuerySetSetOperationTests)\", \"test_ordering (queries.test_qs_combinators.QuerySetSetOperationTests)\", \"test_ordering_by_f_expression (queries.test_qs_combinators.QuerySetSetOperationTests)\", \"test_qs_with_subcompound_qs (queries.test_qs_combinators.QuerySetSetOperationTests)\", \"test_simple_difference (queries.test_qs_combinators.QuerySetSetOperationTests)\", \"test_simple_intersection (queries.test_qs_combinators.QuerySetSetOperationTests)\", \"test_simple_union (queries.test_qs_combinators.QuerySetSetOperationTests)\", \"test_union_distinct (queries.test_qs_combinators.QuerySetSetOperationTests)\", \"test_union_with_empty_qs (queries.test_qs_combinators.QuerySetSetOperationTests)\", \"test_union_with_extra_and_values_list (queries.test_qs_combinators.QuerySetSetOperationTests)\", \"test_union_with_two_annotated_values_list (queries.test_qs_combinators.QuerySetSetOperationTests)\", \"test_union_with_values (queries.test_qs_combinators.QuerySetSetOperationTests)\", \"test_union_with_values_list_and_order (queries.test_qs_combinators.QuerySetSetOperationTests)\", \"test_union_with_values_list_on_annotated_and_unannotated (queries.test_qs_combinators.QuerySetSetOperationTests)\"]",
  "environment_setup_commit": "65dfb06a1ab56c238cc80f5e1c31f61210c4577d",
  "patch_files": [
    "django/db/models/query.py"
  ],
  "test_patch_files": [
    "tests/queries/test_qs_combinators.py"
  ],
  "patch_diff_details": {
    "django/db/models/query.py": {
      "diffs": [
        {
          "start_line_old": 1141,
          "end_line_old": 1141,
          "file_pos": 2,
          "file_context_length": 31157,
          "closest_snippet_id": "/tmp/repos/django/django/db/models/query.py_QuerySet._update.alters_data_QuerySet.values.4.1",
          "closest_snippet_line_distance": 298,
          "pos": 6,
          "context_length": 1559
        }
      ]
    }
  },
  "vectors": 3466,
  "snippets": [
    {
      "position": 1,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler.ordering_parts.get_distinct_SQLCompiler.ordering_parts.get_distinct.6.1",
      "distance": 0.9761157035827637,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 680,
      "end_line": 702,
      "tokens": 202,
      "context_length": 202
    },
    {
      "position": 2,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet._combinator_query_QuerySet.difference.2.2.1",
      "distance": 0.9955923557281494,
      "file_path": "django/db/models/query.py",
      "start_line": 988,
      "end_line": 1019,
      "tokens": 341,
      "context_length": 543,
      "file_pos": 2
    },
    {
      "position": 3,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet._merge_sanity_check_QuerySet._merge_sanity_check.2.1",
      "distance": 1.0346225500106812,
      "file_path": "django/db/models/query.py",
      "start_line": 1321,
      "end_line": 1330,
      "tokens": 114,
      "context_length": 657,
      "file_pos": 2
    },
    {
      "position": 4,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet._update.alters_data_QuerySet.values.4.1",
      "distance": 1.0423940420150757,
      "file_path": "django/db/models/query.py",
      "start_line": 804,
      "end_line": 843,
      "tokens": 322,
      "context_length": 979,
      "file_pos": 2
    },
    {
      "position": 5,
      "id": "/tmp/repos/django/django/db/models/aggregates.py_Aggregate.as_sql_Aggregate._get_repr_options.4.1",
      "distance": 1.0512248277664185,
      "file_path": "django/db/models/aggregates.py",
      "start_line": 70,
      "end_line": 96,
      "tokens": 266,
      "context_length": 1245
    },
    {
      "position": 6,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet.order_by_QuerySet.reverse.5.1",
      "distance": 1.0564649105072021,
      "file_path": "django/db/models/query.py",
      "start_line": 1128,
      "end_line": 1163,
      "tokens": 314,
      "context_length": 1559,
      "file_pos": 3
    },
    {
      "position": 7,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet.__class_getitem___QuerySet.__or__.9.1",
      "distance": 1.0585970878601074,
      "file_path": "django/db/models/query.py",
      "start_line": 327,
      "end_line": 353,
      "tokens": 222,
      "context_length": 1781,
      "file_pos": 3
    },
    {
      "position": 8,
      "id": "/tmp/repos/django/django/contrib/admin/utils.py_lookup_needs_distinct_lookup_needs_distinct.5.1",
      "distance": 1.0673203468322754,
      "file_path": "django/contrib/admin/utils.py",
      "start_line": 27,
      "end_line": 49,
      "tokens": 199,
      "context_length": 1980
    },
    {
      "position": 9,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler.ordering_parts._setup_joins_SQLCompiler.ordering_parts._setup_joins.5.1",
      "distance": 1.0717849731445312,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 740,
      "end_line": 751,
      "tokens": 163,
      "context_length": 2143
    },
    {
      "position": 10,
      "id": "/tmp/repos/django/django/db/backends/base/schema.py_BaseDatabaseSchemaEditor.alter_unique_together_BaseDatabaseSchemaEditor.alter_unique_together.7.2",
      "distance": 1.0964818000793457,
      "file_path": "django/db/backends/base/schema.py",
      "start_line": 370,
      "end_line": 384,
      "tokens": 182,
      "context_length": 2325
    },
    {
      "position": 11,
      "id": "/tmp/repos/django/django/db/models/base.py_Model._perform_unique_checks_Model._perform_unique_checks.3.1",
      "distance": 1.0974125862121582,
      "file_path": "django/db/models/base.py",
      "start_line": 1073,
      "end_line": 1116,
      "tokens": 404,
      "context_length": 2729
    },
    {
      "position": 12,
      "id": "/tmp/repos/django/django/db/models/sql/where.py_SubqueryConstraint_",
      "distance": 1.1190283298492432,
      "file_path": "django/db/models/sql/where.py",
      "start_line": 230,
      "end_line": 246,
      "tokens": 130,
      "context_length": 2859
    },
    {
      "position": 13,
      "id": "/tmp/repos/django/django/db/models/base.py_Model._check_unique_together_Model._check_unique_together.2.3.3.1",
      "distance": 1.127833604812622,
      "file_path": "django/db/models/base.py",
      "start_line": 1561,
      "end_line": 1586,
      "tokens": 183,
      "context_length": 3042
    },
    {
      "position": 14,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet._fetch_all_QuerySet._next_is_sticky.3.1",
      "distance": 1.1312503814697266,
      "file_path": "django/db/models/query.py",
      "start_line": 1301,
      "end_line": 1319,
      "tokens": 186,
      "context_length": 3228,
      "file_pos": 7
    },
    {
      "position": 15,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet.annotate_QuerySet.annotate.12.1",
      "distance": 1.131960153579712,
      "file_path": "django/db/models/query.py",
      "start_line": 1081,
      "end_line": 1126,
      "tokens": 349,
      "context_length": 3577,
      "file_pos": 7
    },
    {
      "position": 16,
      "id": "/tmp/repos/django/django/db/models/constraints.py_UniqueConstraint_",
      "distance": 1.1344513893127441,
      "file_path": "django/db/models/constraints.py",
      "start_line": 79,
      "end_line": 154,
      "tokens": 666,
      "context_length": 4243
    },
    {
      "position": 17,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.resolve_ref_Query.resolve_ref.3.3.10.1",
      "distance": 1.1360242366790771,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1658,
      "end_line": 1692,
      "tokens": 399,
      "context_length": 4642
    },
    {
      "position": 18,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet._merge_known_related_objects_QuerySet._not_support_combined_queries.1.1",
      "distance": 1.1390690803527832,
      "file_path": "django/db/models/query.py",
      "start_line": 1332,
      "end_line": 1380,
      "tokens": 405,
      "context_length": 5047,
      "file_pos": 9
    },
    {
      "position": 19,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet.using_QuerySet.99",
      "distance": 1.1461044549942017,
      "file_path": "django/db/models/query.py",
      "start_line": 1203,
      "end_line": 1237,
      "tokens": 234,
      "context_length": 5281,
      "file_pos": 9
    },
    {
      "position": 20,
      "id": "/tmp/repos/django/django/db/models/sql/datastructures.py_Join.equals_Join.promote.3.1",
      "distance": 1.1469571590423584,
      "file_path": "django/db/models/sql/datastructures.py",
      "start_line": 117,
      "end_line": 137,
      "tokens": 144,
      "context_length": 5425
    },
    {
      "position": 21,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.get_count_Query.explain.6.1",
      "distance": 1.1482179164886475,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 509,
      "end_line": 543,
      "tokens": 282,
      "context_length": 5707
    },
    {
      "position": 22,
      "id": "/tmp/repos/django/django/db/models/query_utils.py_FilteredRelation_",
      "distance": 1.1520617008209229,
      "file_path": "django/db/models/query_utils.py",
      "start_line": 312,
      "end_line": 352,
      "tokens": 286,
      "context_length": 5993
    },
    {
      "position": 23,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.setup_joins.16_Query.setup_joins.17.1",
      "distance": 1.1527159214019775,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1592,
      "end_line": 1616,
      "tokens": 227,
      "context_length": 6220
    },
    {
      "position": 24,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.combine.40_Query.combine.self.extra_order_by.1",
      "distance": 1.1543517112731934,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 620,
      "end_line": 644,
      "tokens": 269,
      "context_length": 6489
    },
    {
      "position": 25,
      "id": "/tmp/repos/django/django/db/models/aggregates.py_Aggregate.resolve_expression_Aggregate.get_group_by_cols.1.1",
      "distance": 1.1547666788101196,
      "file_path": "django/db/models/aggregates.py",
      "start_line": 45,
      "end_line": 68,
      "tokens": 294,
      "context_length": 6783
    },
    {
      "position": 26,
      "id": "/tmp/repos/django/django/contrib/admin/options.py_ModelAdmin.get_search_results.use_distinct_ModelAdmin.get_search_results.7.1",
      "distance": 1.1566336154937744,
      "file_path": "django/contrib/admin/options.py",
      "start_line": 1020,
      "end_line": 1031,
      "tokens": 149,
      "context_length": 6932
    },
    {
      "position": 27,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet.none_QuerySet._filter_or_exclude_inplace.1.2.1",
      "distance": 1.1643426418304443,
      "file_path": "django/db/models/query.py",
      "start_line": 919,
      "end_line": 969,
      "tokens": 381,
      "context_length": 7313,
      "file_pos": 12
    },
    {
      "position": 28,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.bump_prefix.3_Query.bump_prefix.12",
      "distance": 1.1646919250488281,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 891,
      "end_line": 913,
      "tokens": 248,
      "context_length": 7561
    },
    {
      "position": 29,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.clear_limits_Query.add_distinct_fields.self.distinct.1",
      "distance": 1.1650646924972534,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1796,
      "end_line": 1845,
      "tokens": 330,
      "context_length": 7891
    },
    {
      "position": 30,
      "id": "/tmp/repos/django/django/db/migrations/operations/models.py_AlterUniqueTogether_AlterIndexTogether.__init__.1",
      "distance": 1.1733601093292236,
      "file_path": "django/db/migrations/operations/models.py",
      "start_line": 530,
      "end_line": 549,
      "tokens": 148,
      "context_length": 8039
    },
    {
      "position": 31,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.add_filtered_relation_Query.add_filtered_relation.4",
      "distance": 1.1758819818496704,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1407,
      "end_line": 1418,
      "tokens": 137,
      "context_length": 8176
    },
    {
      "position": 32,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.combine_Query.combine.39",
      "distance": 1.1788947582244873,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 545,
      "end_line": 619,
      "tokens": 809,
      "context_length": 8985
    },
    {
      "position": 33,
      "id": "/tmp/repos/django/django/contrib/gis/db/backends/postgis/operations.py_PostGISOperations.spatial_version_PostGISOperations.spatial_version.9.1",
      "distance": 1.1814100742340088,
      "file_path": "django/contrib/gis/db/backends/postgis/operations.py",
      "start_line": 160,
      "end_line": 188,
      "tokens": 302,
      "context_length": 9287
    },
    {
      "position": 34,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet.__setstate___QuerySet.__len__.2.1",
      "distance": 1.181464672088623,
      "file_path": "django/db/models/query.py",
      "start_line": 243,
      "end_line": 270,
      "tokens": 221,
      "context_length": 9508,
      "file_pos": 14
    },
    {
      "position": 35,
      "id": "/tmp/repos/django/django/db/models/base.py_Model.unique_error_message_Model.unique_error_message.4.5.3.1",
      "distance": 1.1848341226577759,
      "file_path": "django/db/models/base.py",
      "start_line": 1164,
      "end_line": 1192,
      "tokens": 213,
      "context_length": 9721
    },
    {
      "position": 36,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.annotation_select_Query.extra_select.2.3.1.1",
      "distance": 1.186126947402954,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 2162,
      "end_line": 2194,
      "tokens": 228,
      "context_length": 9949
    },
    {
      "position": 37,
      "id": "/tmp/repos/django/django/db/backends/base/schema.py_BaseDatabaseSchemaEditor._create_unique_sql_BaseDatabaseSchemaEditor._create_unique_sql.7.1",
      "distance": 1.188117265701294,
      "file_path": "django/db/backends/base/schema.py",
      "start_line": 1108,
      "end_line": 1137,
      "tokens": 233,
      "context_length": 10182
    },
    {
      "position": 38,
      "id": "/tmp/repos/django/django/contrib/admin/checks.py_ModelAdminChecks._check_actions_uniqueness_ModelAdminChecks._check_actions_uniqueness.5.1",
      "distance": 1.1912720203399658,
      "file_path": "django/contrib/admin/checks.py",
      "start_line": 988,
      "end_line": 1003,
      "tokens": 136,
      "context_length": 10318
    },
    {
      "position": 39,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.demote_joins_Query.reset_refcounts.2.2",
      "distance": 1.1929550170898438,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 799,
      "end_line": 825,
      "tokens": 280,
      "context_length": 10598
    },
    {
      "position": 40,
      "id": "/tmp/repos/django/django/db/backends/base/schema.py_BaseDatabaseSchemaEditor._unique_sql_BaseDatabaseSchemaEditor._unique_sql.4.1",
      "distance": 1.198401689529419,
      "file_path": "django/db/backends/base/schema.py",
      "start_line": 1086,
      "end_line": 1106,
      "tokens": 176,
      "context_length": 10774
    },
    {
      "position": 41,
      "id": "/tmp/repos/django/django/db/models/fields/related.py_ForeignObject._check_unique_target_ForeignObject._check_unique_target.10.5.1.1",
      "distance": 1.1997437477111816,
      "file_path": "django/db/models/fields/related.py",
      "start_line": 509,
      "end_line": 574,
      "tokens": 492,
      "context_length": 11266
    },
    {
      "position": 42,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet.delete.alters_data_QuerySet.update.11.1",
      "distance": 1.2081358432769775,
      "file_path": "django/db/models/query.py",
      "start_line": 753,
      "end_line": 786,
      "tokens": 274,
      "context_length": 11540,
      "file_pos": 16
    },
    {
      "position": 43,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.split_exclude_Query.split_exclude.23.1",
      "distance": 1.2091035842895508,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1694,
      "end_line": 1765,
      "tokens": 784,
      "context_length": 12324
    },
    {
      "position": 44,
      "id": "/tmp/repos/django/django/contrib/admin/options.py_ModelAdmin.get_search_results_ModelAdmin.get_search_results.construct_search.9.1",
      "distance": 1.2157316207885742,
      "file_path": "django/contrib/admin/options.py",
      "start_line": 985,
      "end_line": 1018,
      "tokens": 310,
      "context_length": 12634
    },
    {
      "position": 45,
      "id": "/tmp/repos/django/django/contrib/admin/checks.py_BaseModelAdminChecks._check_exclude_BaseModelAdminChecks._check_exclude.2.5.1.1",
      "distance": 1.216522216796875,
      "file_path": "django/contrib/admin/checks.py",
      "start_line": 354,
      "end_line": 370,
      "tokens": 134,
      "context_length": 12768
    },
    {
      "position": 46,
      "id": "/tmp/repos/django/django/db/models/query.py_RawQuerySet.iterator_RawQuerySet.iterator.db.4.8.2.1",
      "distance": 1.2177550792694092,
      "file_path": "django/db/models/query.py",
      "start_line": 1466,
      "end_line": 1499,
      "tokens": 297,
      "context_length": 13065,
      "file_pos": 16
    },
    {
      "position": 47,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler.ordering_parts.get_group_by_SQLCompiler.ordering_parts.get_group_by.45.1",
      "distance": 1.218198299407959,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 63,
      "end_line": 146,
      "tokens": 867,
      "context_length": 13932
    },
    {
      "position": 48,
      "id": "/tmp/repos/django/django/db/models/sql/subqueries.py_1_DeleteQuery.delete_batch.6.1",
      "distance": 1.2204363346099854,
      "file_path": "django/db/models/sql/subqueries.py",
      "start_line": 1,
      "end_line": 44,
      "tokens": 320,
      "context_length": 14252
    },
    {
      "position": 49,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet.delete_QuerySet.delete.19.1",
      "distance": 1.2207366228103638,
      "file_path": "django/db/models/query.py",
      "start_line": 724,
      "end_line": 751,
      "tokens": 235,
      "context_length": 14487,
      "file_pos": 17
    },
    {
      "position": 50,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.clear_ordering_Query.set_group_by.self.group_by.1",
      "distance": 1.2210277318954468,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1931,
      "end_line": 1980,
      "tokens": 420,
      "context_length": 14907
    },
    {
      "position": 51,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet.__iter___QuerySet.__bool__.2.1",
      "distance": 1.2238121032714844,
      "file_path": "django/db/models/query.py",
      "start_line": 272,
      "end_line": 292,
      "tokens": 180,
      "context_length": 15087,
      "file_pos": 17
    },
    {
      "position": 52,
      "id": "/tmp/repos/django/django/contrib/gis/db/models/functions.py_SymDifference_",
      "distance": 1.224051833152771,
      "file_path": "django/contrib/gis/db/models/functions.py",
      "start_line": 459,
      "end_line": 487,
      "tokens": 225,
      "context_length": 15312
    },
    {
      "position": 53,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.build_filter.19_Query.build_filter.31.1",
      "distance": 1.2241393327713013,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1280,
      "end_line": 1338,
      "tokens": 711,
      "context_length": 16023
    },
    {
      "position": 54,
      "id": "/tmp/repos/django/django/contrib/admin/views/main.py_ChangeList._get_deterministic_ordering_ChangeList._get_deterministic_ordering.6.1",
      "distance": 1.2249703407287598,
      "file_path": "django/contrib/admin/views/main.py",
      "start_line": 332,
      "end_line": 392,
      "tokens": 508,
      "context_length": 16531
    },
    {
      "position": 55,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet.values_list_QuerySet.values_list.10.1",
      "distance": 1.2250139713287354,
      "file_path": "django/db/models/query.py",
      "start_line": 845,
      "end_line": 874,
      "tokens": 248,
      "context_length": 16779,
      "file_pos": 19
    },
    {
      "position": 56,
      "id": "/tmp/repos/django/django/db/backends/base/schema.py_BaseDatabaseSchemaEditor._delete_unique_sql_BaseDatabaseSchemaEditor._delete_constraint_sql.1.1",
      "distance": 1.2257273197174072,
      "file_path": "django/db/backends/base/schema.py",
      "start_line": 1139,
      "end_line": 1174,
      "tokens": 273,
      "context_length": 17052
    },
    {
      "position": 57,
      "id": "/tmp/repos/django/django/forms/models.py_BaseModelFormSet.validate_unique_BaseModelFormSet.validate_unique.all_unique_checks.11.1",
      "distance": 1.2261962890625,
      "file_path": "django/forms/models.py",
      "start_line": 680,
      "end_line": 751,
      "tokens": 732,
      "context_length": 17784
    },
    {
      "position": 58,
      "id": "/tmp/repos/django/django/db/models/sql/subqueries.py_UpdateQuery_UpdateQuery.update_batch.2.3",
      "distance": 1.2264997959136963,
      "file_path": "django/db/models/sql/subqueries.py",
      "start_line": 47,
      "end_line": 75,
      "tokens": 210,
      "context_length": 17994
    },
    {
      "position": 59,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.set_values_Query.set_values.9",
      "distance": 1.2276158332824707,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 2124,
      "end_line": 2160,
      "tokens": 292,
      "context_length": 18286
    },
    {
      "position": 60,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_1_JoinInfo.1",
      "distance": 1.2276642322540283,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1,
      "end_line": 65,
      "tokens": 465,
      "context_length": 18751
    },
    {
      "position": 61,
      "id": "/tmp/repos/django/django/contrib/admin/checks.py_BaseModelAdminChecks._check_fields_BaseModelAdminChecks._check_fields.5.1",
      "distance": 1.2311898469924927,
      "file_path": "django/contrib/admin/checks.py",
      "start_line": 231,
      "end_line": 261,
      "tokens": 229,
      "context_length": 18980
    },
    {
      "position": 62,
      "id": "/tmp/repos/django/django/contrib/postgres/aggregates/mixins.py_OrderableAggMixin.as_sql_OrderableAggMixin.as_sql.2.1",
      "distance": 1.231593370437622,
      "file_path": "django/contrib/postgres/aggregates/mixins.py",
      "start_line": 22,
      "end_line": 34,
      "tokens": 128,
      "context_length": 19108
    },
    {
      "position": 63,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.add_annotation_Query.resolve_expression.12.1",
      "distance": 1.2326645851135254,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1016,
      "end_line": 1046,
      "tokens": 325,
      "context_length": 19433
    },
    {
      "position": 64,
      "id": "/tmp/repos/django/django/db/models/query_utils.py_RegisterLookupMixin_RegisterLookupMixin._unregister_lookup.3",
      "distance": 1.2343093156814575,
      "file_path": "django/db/models/query_utils.py",
      "start_line": 167,
      "end_line": 231,
      "tokens": 492,
      "context_length": 19925
    },
    {
      "position": 65,
      "id": "/tmp/repos/django/django/contrib/gis/db/models/aggregates.py_Collect_",
      "distance": 1.234861135482788,
      "file_path": "django/contrib/gis/db/models/aggregates.py",
      "start_line": 49,
      "end_line": 84,
      "tokens": 207,
      "context_length": 20132
    },
    {
      "position": 66,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query_Query.__init__.self.explain_options.1",
      "distance": 1.2360529899597168,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 136,
      "end_line": 229,
      "tokens": 823,
      "context_length": 20955
    },
    {
      "position": 67,
      "id": "/tmp/repos/django/django/db/models/expressions.py_Subquery_Subquery.get_group_by_cols.4.1",
      "distance": 1.239172101020813,
      "file_path": "django/db/models/expressions.py",
      "start_line": 1013,
      "end_line": 1065,
      "tokens": 371,
      "context_length": 21326
    },
    {
      "position": 68,
      "id": "/tmp/repos/django/django/forms/models.py_BaseModelFormSet.get_unique_error_message_BaseModelFormSet.get_form_error.1.1",
      "distance": 1.24000084400177,
      "file_path": "django/forms/models.py",
      "start_line": 753,
      "end_line": 774,
      "tokens": 194,
      "context_length": 21520
    },
    {
      "position": 69,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.get_initial_alias_Query.count_active_tables.2.1",
      "distance": 1.2411949634552002,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 915,
      "end_line": 933,
      "tokens": 146,
      "context_length": 21666
    },
    {
      "position": 70,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet.earliest_QuerySet.last.2.1.1",
      "distance": 1.2421550750732422,
      "file_path": "django/db/models/query.py",
      "start_line": 670,
      "end_line": 684,
      "tokens": 132,
      "context_length": 21798,
      "file_pos": 23
    },
    {
      "position": 71,
      "id": "/tmp/repos/django/django/db/models/lookups.py_UUIDIExact_",
      "distance": 1.2444374561309814,
      "file_path": "django/db/models/lookups.py",
      "start_line": 606,
      "end_line": 639,
      "tokens": 141,
      "context_length": 21939
    },
    {
      "position": 72,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.names_to_path.3_Query.names_to_path.4.1",
      "distance": 1.2459886074066162,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1436,
      "end_line": 1514,
      "tokens": 734,
      "context_length": 22673
    },
    {
      "position": 73,
      "id": "/tmp/repos/django/django/db/models/sql/subqueries.py_InsertQuery_",
      "distance": 1.2460761070251465,
      "file_path": "django/db/models/sql/subqueries.py",
      "start_line": 137,
      "end_line": 163,
      "tokens": 173,
      "context_length": 22846
    },
    {
      "position": 74,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.add_select_related_Query.add_extra.5.self.extra_order_by.1",
      "distance": 1.2464560270309448,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1982,
      "end_line": 2028,
      "tokens": 370,
      "context_length": 23216
    },
    {
      "position": 75,
      "id": "/tmp/repos/django/django/db/models/aggregates.py_Max_",
      "distance": 1.2468469142913818,
      "file_path": "django/db/models/aggregates.py",
      "start_line": 122,
      "end_line": 158,
      "tokens": 245,
      "context_length": 23461
    },
    {
      "position": 76,
      "id": "/tmp/repos/django/django/db/models/deletion.py_operator_get_candidate_relations_to_delete.3.1",
      "distance": 1.247448205947876,
      "file_path": "django/db/models/deletion.py",
      "start_line": 1,
      "end_line": 76,
      "tokens": 566,
      "context_length": 24027
    },
    {
      "position": 77,
      "id": "/tmp/repos/django/django/contrib/admin/checks.py_BaseModelAdminChecks._check_fieldsets_BaseModelAdminChecks._check_fieldsets.2.3.2.1",
      "distance": 1.2474628686904907,
      "file_path": "django/contrib/admin/checks.py",
      "start_line": 263,
      "end_line": 276,
      "tokens": 135,
      "context_length": 24162
    },
    {
      "position": 78,
      "id": "/tmp/repos/django/django/db/migrations/autodetector.py_MigrationAutodetector.generate_altered_unique_together_MigrationAutodetector.generate_altered_db_table.2.6.1",
      "distance": 1.2505193948745728,
      "file_path": "django/db/migrations/autodetector.py",
      "start_line": 1125,
      "end_line": 1146,
      "tokens": 231,
      "context_length": 24393
    },
    {
      "position": 79,
      "id": "/tmp/repos/django/django/db/models/base.py_Model._get_unique_checks_Model._get_unique_checks.16.1",
      "distance": 1.250546932220459,
      "file_path": "django/db/models/base.py",
      "start_line": 1015,
      "end_line": 1071,
      "tokens": 560,
      "context_length": 24953
    },
    {
      "position": 80,
      "id": "/tmp/repos/django/django/db/backends/sqlite3/creation.py_DatabaseCreation._destroy_test_db_",
      "distance": 1.2536497116088867,
      "file_path": "django/db/backends/sqlite3/creation.py",
      "start_line": 84,
      "end_line": 104,
      "tokens": 174,
      "context_length": 25127
    },
    {
      "position": 81,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet.only_QuerySet.only.8.1",
      "distance": 1.2558125257492065,
      "file_path": "django/db/models/query.py",
      "start_line": 1182,
      "end_line": 1201,
      "tokens": 209,
      "context_length": 25336,
      "file_pos": 27
    },
    {
      "position": 82,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet._chain_QuerySet._clone.9.1",
      "distance": 1.2558214664459229,
      "file_path": "django/db/models/query.py",
      "start_line": 1275,
      "end_line": 1299,
      "tokens": 210,
      "context_length": 25546,
      "file_pos": 27
    },
    {
      "position": 83,
      "id": "/tmp/repos/django/django/contrib/admin/checks.py_ModelAdminChecks._check_list_display_links_ModelAdminChecks._check_list_display_links.4.1",
      "distance": 1.2572541236877441,
      "file_path": "django/contrib/admin/checks.py",
      "start_line": 753,
      "end_line": 768,
      "tokens": 182,
      "context_length": 25728
    },
    {
      "position": 84,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet.select_related_QuerySet.select_related.6.1",
      "distance": 1.258265495300293,
      "file_path": "django/db/models/query.py",
      "start_line": 1036,
      "end_line": 1056,
      "tokens": 155,
      "context_length": 25883,
      "file_pos": 27
    },
    {
      "position": 85,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler_SQLCompiler.ordering_parts.setup_query.self.col_count.1",
      "distance": 1.2586157321929932,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 22,
      "end_line": 47,
      "tokens": 257,
      "context_length": 26140
    },
    {
      "position": 86,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.bump_prefix_Query.bump_prefix.prefix_gen.5.prefix.1",
      "distance": 1.2589452266693115,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 866,
      "end_line": 889,
      "tokens": 203,
      "context_length": 26343
    },
    {
      "position": 87,
      "id": "/tmp/repos/django/django/db/models/deletion.py_Collector.delete_",
      "distance": 1.2597562074661255,
      "file_path": "django/db/models/deletion.py",
      "start_line": 379,
      "end_line": 448,
      "tokens": 577,
      "context_length": 26920
    },
    {
      "position": 88,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.check_related_objects_Query.check_filterable.3.1.1",
      "distance": 1.2611827850341797,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1104,
      "end_line": 1133,
      "tokens": 324,
      "context_length": 27244
    },
    {
      "position": 89,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.add_filter_Query.build_where.1.1",
      "distance": 1.2617151737213135,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1340,
      "end_line": 1361,
      "tokens": 250,
      "context_length": 27494
    },
    {
      "position": 90,
      "id": "/tmp/repos/django/django/contrib/postgres/aggregates/mixins.py_1_OrderableAggMixin.resolve_expression.2.1",
      "distance": 1.2626376152038574,
      "file_path": "django/contrib/postgres/aggregates/mixins.py",
      "start_line": 1,
      "end_line": 20,
      "tokens": 182,
      "context_length": 27676
    },
    {
      "position": 91,
      "id": "/tmp/repos/django/django/db/models/constraints.py_1_BaseConstraint.clone.2.1",
      "distance": 1.2629363536834717,
      "file_path": "django/db/models/constraints.py",
      "start_line": 1,
      "end_line": 29,
      "tokens": 213,
      "context_length": 27889
    },
    {
      "position": 92,
      "id": "/tmp/repos/django/django/db/models/expressions.py_Exists_Exists.select_format.3.2.1",
      "distance": 1.262951374053955,
      "file_path": "django/db/models/expressions.py",
      "start_line": 1068,
      "end_line": 1095,
      "tokens": 261,
      "context_length": 28150
    },
    {
      "position": 93,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.get_external_cols_Query.resolve_lookup_value.2.1",
      "distance": 1.2631211280822754,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1048,
      "end_line": 1073,
      "tokens": 214,
      "context_length": 28364
    },
    {
      "position": 94,
      "id": "/tmp/repos/django/django/db/migrations/operations/models.py_1_ModelOperation.reduce.1.1",
      "distance": 1.2657593488693237,
      "file_path": "django/db/migrations/operations/models.py",
      "start_line": 1,
      "end_line": 38,
      "tokens": 235,
      "context_length": 28599
    },
    {
      "position": 95,
      "id": "/tmp/repos/django/django/db/models/query.py_1_BaseIterable.__init__.self.chunk_size.1",
      "distance": 1.266256332397461,
      "file_path": "django/db/models/query.py",
      "start_line": 1,
      "end_line": 41,
      "tokens": 299,
      "context_length": 28898,
      "file_pos": 27
    },
    {
      "position": 96,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet.aggregate_QuerySet.count.3.1",
      "distance": 1.2662807703018188,
      "file_path": "django/db/models/query.py",
      "start_line": 372,
      "end_line": 411,
      "tokens": 325,
      "context_length": 29223,
      "file_pos": 27
    },
    {
      "position": 97,
      "id": "/tmp/repos/django/django/db/models/__init__.py_1_",
      "distance": 1.2666234970092773,
      "file_path": "django/db/models/__init__.py",
      "start_line": 1,
      "end_line": 53,
      "tokens": 619,
      "context_length": 29842
    },
    {
      "position": 98,
      "id": "/tmp/repos/django/django/db/models/query.py_RawQuerySet.prefetch_related_RawQuerySet.__iter__.2.1",
      "distance": 1.2673510313034058,
      "file_path": "django/db/models/query.py",
      "start_line": 1426,
      "end_line": 1464,
      "tokens": 308,
      "context_length": 30150,
      "file_pos": 28
    },
    {
      "position": 99,
      "id": "/tmp/repos/django/django/db/models/sql/datastructures.py_1_Empty.1",
      "distance": 1.2679383754730225,
      "file_path": "django/db/models/sql/datastructures.py",
      "start_line": 1,
      "end_line": 21,
      "tokens": 126,
      "context_length": 30276
    },
    {
      "position": 100,
      "id": "/tmp/repos/django/django/db/models/expressions.py_Col_Col.get_db_converters.2.1",
      "distance": 1.2680459022521973,
      "file_path": "django/db/models/expressions.py",
      "start_line": 763,
      "end_line": 797,
      "tokens": 292,
      "context_length": 30568
    },
    {
      "position": 101,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.clone_Query.clone.29.1",
      "distance": 1.2686147689819336,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 287,
      "end_line": 335,
      "tokens": 424,
      "context_length": 30992
    },
    {
      "position": 102,
      "id": "/tmp/repos/django/django/db/models/fields/related_lookups.py_RelatedLookupMixin.as_sql_",
      "distance": 1.2696741819381714,
      "file_path": "django/db/models/fields/related_lookups.py",
      "start_line": 119,
      "end_line": 155,
      "tokens": 244,
      "context_length": 31236
    }
  ],
  "files": [
    {
      "file_path": "django/db/models/sql/compiler.py",
      "position": 1,
      "tokens": 14081,
      "context_length": 14081
    },
    {
      "file_path": "django/db/models/query.py",
      "position": 2,
      "tokens": 17076,
      "context_length": 31157
    },
    {
      "file_path": "django/db/models/aggregates.py",
      "position": 3,
      "tokens": 1301,
      "context_length": 32458
    },
    {
      "file_path": "django/contrib/admin/utils.py",
      "position": 4,
      "tokens": 4152,
      "context_length": 36610
    },
    {
      "file_path": "django/db/backends/base/schema.py",
      "position": 5,
      "tokens": 11600,
      "context_length": 48210
    },
    {
      "file_path": "django/db/models/base.py",
      "position": 6,
      "tokens": 15788,
      "context_length": 63998
    },
    {
      "file_path": "django/db/models/sql/where.py",
      "position": 7,
      "tokens": 1804,
      "context_length": 65802
    },
    {
      "file_path": "django/db/models/constraints.py",
      "position": 8,
      "tokens": 1252,
      "context_length": 67054
    },
    {
      "file_path": "django/db/models/sql/query.py",
      "position": 9,
      "tokens": 21934,
      "context_length": 88988
    },
    {
      "file_path": "django/db/models/sql/datastructures.py",
      "position": 10,
      "tokens": 1402,
      "context_length": 90390
    },
    {
      "file_path": "django/db/models/query_utils.py",
      "position": 11,
      "tokens": 2712,
      "context_length": 93102
    },
    {
      "file_path": "django/contrib/admin/options.py",
      "position": 12,
      "tokens": 18555,
      "context_length": 111657
    },
    {
      "file_path": "django/db/migrations/operations/models.py",
      "position": 13,
      "tokens": 6570,
      "context_length": 118227
    },
    {
      "file_path": "django/contrib/gis/db/backends/postgis/operations.py",
      "position": 14,
      "tokens": 3608,
      "context_length": 121835
    },
    {
      "file_path": "django/contrib/admin/checks.py",
      "position": 15,
      "tokens": 9007,
      "context_length": 130842
    },
    {
      "file_path": "django/db/models/fields/related.py",
      "position": 16,
      "tokens": 13831,
      "context_length": 144673
    },
    {
      "file_path": "django/db/models/sql/subqueries.py",
      "position": 17,
      "tokens": 1213,
      "context_length": 145886
    },
    {
      "file_path": "django/contrib/gis/db/models/functions.py",
      "position": 18,
      "tokens": 3927,
      "context_length": 149813
    },
    {
      "file_path": "django/contrib/admin/views/main.py",
      "position": 19,
      "tokens": 4298,
      "context_length": 154111
    },
    {
      "file_path": "django/forms/models.py",
      "position": 20,
      "tokens": 11721,
      "context_length": 165832
    },
    {
      "file_path": "django/contrib/postgres/aggregates/mixins.py",
      "position": 21,
      "tokens": 442,
      "context_length": 166274
    },
    {
      "file_path": "django/contrib/gis/db/models/aggregates.py",
      "position": 22,
      "tokens": 617,
      "context_length": 166891
    },
    {
      "file_path": "django/db/models/expressions.py",
      "position": 23,
      "tokens": 10226,
      "context_length": 177117
    },
    {
      "file_path": "django/db/models/lookups.py",
      "position": 24,
      "tokens": 4926,
      "context_length": 182043
    },
    {
      "file_path": "django/db/models/deletion.py",
      "position": 25,
      "tokens": 3823,
      "context_length": 185866
    },
    {
      "file_path": "django/db/migrations/autodetector.py",
      "position": 26,
      "tokens": 11729,
      "context_length": 197595
    },
    {
      "file_path": "django/db/backends/sqlite3/creation.py",
      "position": 27,
      "tokens": 851,
      "context_length": 198446
    },
    {
      "file_path": "django/db/models/__init__.py",
      "position": 28,
      "tokens": 619,
      "context_length": 199065
    },
    {
      "file_path": "django/db/models/fields/related_lookups.py",
      "position": 29,
      "tokens": 1449,
      "context_length": 200514
    }
  ]
}