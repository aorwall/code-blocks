{
  "instance_id": "django__django-13569",
  "model_patch": "diff --git a/django/db/models/sql/compiler.py b/django/db/models/sql/compiler.py\nindex 04e430a42e..02e3295246 100644\n--- a/django/db/models/sql/compiler.py\n+++ b/django/db/models/sql/compiler.py\n@@ -126,9 +126,9 @@ class SQLCompiler:\n             for col in cols:\n                 expressions.append(col)\n         for expr, (sql, params, is_ref) in order_by:\n-            # Skip References to the select clause, as all expressions in the\n-            # select clause are already part of the group by.\n-            if not is_ref:\n+            # Skip References to the select clause and Random expressions, as all expressions in the\n+            # select clause are already part of the group by and Random should not be included.\n+            if not is_ref and not isinstance(expr, Random):\n                 expressions.extend(expr.get_group_by_cols())\n         having_group_by = self.having.get_group_by_cols() if self.having else ()\n         for expr in having_group_by:\n",
  "model_name_or_path": "Devin",
  "pass_or_fail": "fail",
  "model_patch_files": [
    "django/db/models/sql/compiler.py"
  ],
  "repo": "django/django",
  "base_commit": "257f8495d6c93e30ab0f52af4c488d7344bcf112",
  "patch": "diff --git a/django/db/models/functions/math.py b/django/db/models/functions/math.py\n--- a/django/db/models/functions/math.py\n+++ b/django/db/models/functions/math.py\n@@ -154,6 +154,9 @@ def as_oracle(self, compiler, connection, **extra_context):\n     def as_sqlite(self, compiler, connection, **extra_context):\n         return super().as_sql(compiler, connection, function='RAND', **extra_context)\n \n+    def get_group_by_cols(self, alias=None):\n+        return []\n+\n \n class Round(Transform):\n     function = 'ROUND'\n",
  "test_patch": "diff --git a/tests/aggregation/tests.py b/tests/aggregation/tests.py\n--- a/tests/aggregation/tests.py\n+++ b/tests/aggregation/tests.py\n@@ -1315,3 +1315,18 @@ def test_aggregation_subquery_annotation_related_field(self):\n         # with self.assertNumQueries(1) as ctx:\n         #     self.assertSequenceEqual(books_qs, [book])\n         # self.assertEqual(ctx[0]['sql'].count('SELECT'), 2)\n+\n+    def test_aggregation_random_ordering(self):\n+        \"\"\"Random() is not included in the GROUP BY when used for ordering.\"\"\"\n+        authors = Author.objects.annotate(contact_count=Count('book')).order_by('?')\n+        self.assertQuerysetEqual(authors, [\n+            ('Adrian Holovaty', 1),\n+            ('Jacob Kaplan-Moss', 1),\n+            ('Brad Dayley', 1),\n+            ('James Bennett', 1),\n+            ('Jeffrey Forcier', 1),\n+            ('Paul Bissex', 1),\n+            ('Wesley J. Chun', 1),\n+            ('Stuart Russell', 1),\n+            ('Peter Norvig', 2),\n+        ], lambda a: (a.name, a.contact_count), ordered=False)\n",
  "problem_statement": "order_by('?') unexpectedly breaking queryset aggregation\nDescription\n\t\nSteps to reproduce:\nclass Thing(models.Model):\n\tpass\nclass Related(models.Model):\n\tmodels.ForeignKey(Thing)\nWith data\nt = Thing.objects.create()\nrs = [Related.objects.create(thing=t) for _ in range(2)]\nThe following query works as expected. The aggregation with Count produces a GROUP BY clause on related.id.\n>>> Thing.objects.annotate(rc=Count('related')).order_by('rc').values('id', 'rc')\n<QuerySet [{'id': 1, 'rc': 2}]>\nThis also works as expected (at least to me). Although there is an aggregation, ordering by related means that the grouping will be broken down.\n>>> Thing.objects.annotate(rc=Count('related')).order_by('related').values('id', 'rc')\n<QuerySet [{'id': 1, 'rc': 1}, {'id': 1, 'rc': 1}]>\nBut the following seems wrong to me.\n>>> Thing.objects.annotate(rc=Count('related')).order_by('?').values('id', 'rc')\n<QuerySet [{'id': 1, 'rc': 1}, {'id': 1, 'rc': 1}]>\nThe random function call has nothing to do with the aggregation, and I see no reason it should break it. Dumping the query seems that indeed the random call breaks the group by call: (I simpilfied the table names a little)\n>>> print(Thing.objects.annotate(rc=Count('related')).order_by('?').values('id', 'rc').query)\nSELECT \"thing\".\"id\", COUNT(\"related\".\"id\") AS \"rc\" FROM \"thing\" LEFT OUTER JOIN \"related\" ON (\"thing\".\"id\" = \"related\".\"thing_id\") GROUP BY \"thing\".\"id\", RANDOM() ORDER BY RANDOM() ASC\nI dug into the SQL compiler, and it seems to me the problem is inside django.db.models.sql.compiler.get_group_by, where the compiler combines all non-aggregate, non-ref order_by expressions into group_by. I patched it like this\nfor expr, (sql, params, is_ref) in order_by:\n\tif expr.contains_aggregate:\n\t\tcontinue\n\tif is_ref:\n\t\tcontinue\n\texpressions.extend([\n\t\texp for exp in expr.get_source_expressions()\n\t\tif not isinstance(exp, Random)\n\t])\nand things seem to work correctly. No failed tests against SQLite3 with default settings.\n",
  "hints_text": "Patch to SQLCompiler.get_group_by that excluds Random expressions\n\u200bPR\nI wonder what would happen if we skipped all expressions that have no cols as source expressions (plus, we need to include any raw sql).\nI wonder what would happen if we skipped all expressions that have no cols as source expressions (plus, we need to include any raw sql). This seems like a very good idea, and I can\u2019t think of a scenario where this will break things. I\u2019ve updated the PR.\nThe new test isn't passing on MySQL/PostgreSQL.\nSome test additions are still needed.\nIt's documented that ordering will be included in the grouping clause so I wouldn't say that this behavior is unexpected. It seems to me that trying to remove some (but not all) columns from the group by clause according to new rules is less clear than the simple rule that is in place now.\nIf you need to filter on an annotated value while still using .order_by('?'), this could work: Thing.objects.filter(pk__in=Thing.objects.annotate(rc=Count('related')).filter(rc__gte=2)).order_by('?') This avoids the GROUP BY RANDOM() ORDER BY RANDOM() ASC issue while still allowing .annotate() and .order_by('?') to be used together.",
  "created_at": "2020-10-19T21:20:55Z",
  "version": "3.2",
  "FAIL_TO_PASS": "[\"Random() is not included in the GROUP BY when used for ordering.\"]",
  "PASS_TO_PASS": "[\"Subquery annotations are excluded from the GROUP BY if they are\", \"test_add_implementation (aggregation.tests.AggregateTestCase)\", \"test_aggregate_alias (aggregation.tests.AggregateTestCase)\", \"test_aggregate_annotation (aggregation.tests.AggregateTestCase)\", \"test_aggregate_in_order_by (aggregation.tests.AggregateTestCase)\", \"test_aggregate_multi_join (aggregation.tests.AggregateTestCase)\", \"test_aggregate_over_aggregate (aggregation.tests.AggregateTestCase)\", \"test_aggregate_over_complex_annotation (aggregation.tests.AggregateTestCase)\", \"test_aggregation_exists_annotation (aggregation.tests.AggregateTestCase)\", \"test_aggregation_expressions (aggregation.tests.AggregateTestCase)\", \"test_aggregation_order_by_not_selected_annotation_values (aggregation.tests.AggregateTestCase)\", \"test_aggregation_subquery_annotation_exists (aggregation.tests.AggregateTestCase)\", \"test_aggregation_subquery_annotation_multivalued (aggregation.tests.AggregateTestCase)\", \"test_aggregation_subquery_annotation_related_field (aggregation.tests.AggregateTestCase)\", \"test_aggregation_subquery_annotation_values (aggregation.tests.AggregateTestCase)\", \"test_aggregation_subquery_annotation_values_collision (aggregation.tests.AggregateTestCase)\", \"test_annotate_basic (aggregation.tests.AggregateTestCase)\", \"test_annotate_defer (aggregation.tests.AggregateTestCase)\", \"test_annotate_defer_select_related (aggregation.tests.AggregateTestCase)\", \"test_annotate_m2m (aggregation.tests.AggregateTestCase)\", \"test_annotate_ordering (aggregation.tests.AggregateTestCase)\", \"test_annotate_over_annotate (aggregation.tests.AggregateTestCase)\", \"test_annotate_values (aggregation.tests.AggregateTestCase)\", \"test_annotate_values_aggregate (aggregation.tests.AggregateTestCase)\", \"test_annotate_values_list (aggregation.tests.AggregateTestCase)\", \"test_annotated_aggregate_over_annotated_aggregate (aggregation.tests.AggregateTestCase)\", \"test_annotation (aggregation.tests.AggregateTestCase)\", \"test_annotation_expressions (aggregation.tests.AggregateTestCase)\", \"test_arguments_must_be_expressions (aggregation.tests.AggregateTestCase)\", \"test_avg_decimal_field (aggregation.tests.AggregateTestCase)\", \"test_avg_duration_field (aggregation.tests.AggregateTestCase)\", \"test_backwards_m2m_annotate (aggregation.tests.AggregateTestCase)\", \"test_combine_different_types (aggregation.tests.AggregateTestCase)\", \"test_complex_aggregations_require_kwarg (aggregation.tests.AggregateTestCase)\", \"test_complex_values_aggregation (aggregation.tests.AggregateTestCase)\", \"test_count (aggregation.tests.AggregateTestCase)\", \"test_count_distinct_expression (aggregation.tests.AggregateTestCase)\", \"test_count_star (aggregation.tests.AggregateTestCase)\", \"test_dates_with_aggregation (aggregation.tests.AggregateTestCase)\", \"test_decimal_max_digits_has_no_effect (aggregation.tests.AggregateTestCase)\", \"test_distinct_on_aggregate (aggregation.tests.AggregateTestCase)\", \"test_empty_aggregate (aggregation.tests.AggregateTestCase)\", \"test_even_more_aggregate (aggregation.tests.AggregateTestCase)\", \"test_expression_on_aggregation (aggregation.tests.AggregateTestCase)\", \"test_filter_aggregate (aggregation.tests.AggregateTestCase)\", \"test_filtering (aggregation.tests.AggregateTestCase)\", \"test_fkey_aggregate (aggregation.tests.AggregateTestCase)\", \"test_group_by_exists_annotation (aggregation.tests.AggregateTestCase)\", \"test_group_by_subquery_annotation (aggregation.tests.AggregateTestCase)\", \"test_grouped_annotation_in_group_by (aggregation.tests.AggregateTestCase)\", \"test_more_aggregation (aggregation.tests.AggregateTestCase)\", \"test_multi_arg_aggregate (aggregation.tests.AggregateTestCase)\", \"test_multiple_aggregates (aggregation.tests.AggregateTestCase)\", \"test_non_grouped_annotation_not_in_group_by (aggregation.tests.AggregateTestCase)\", \"test_nonaggregate_aggregation_throws (aggregation.tests.AggregateTestCase)\", \"test_nonfield_annotation (aggregation.tests.AggregateTestCase)\", \"test_order_of_precedence (aggregation.tests.AggregateTestCase)\", \"test_related_aggregate (aggregation.tests.AggregateTestCase)\", \"test_reverse_fkey_annotate (aggregation.tests.AggregateTestCase)\", \"test_single_aggregate (aggregation.tests.AggregateTestCase)\", \"test_sum_distinct_aggregate (aggregation.tests.AggregateTestCase)\", \"test_sum_duration_field (aggregation.tests.AggregateTestCase)\", \"test_ticket11881 (aggregation.tests.AggregateTestCase)\", \"test_ticket12886 (aggregation.tests.AggregateTestCase)\", \"test_ticket17424 (aggregation.tests.AggregateTestCase)\", \"test_values_aggregation (aggregation.tests.AggregateTestCase)\", \"test_values_annotation_with_expression (aggregation.tests.AggregateTestCase)\"]",
  "environment_setup_commit": "65dfb06a1ab56c238cc80f5e1c31f61210c4577d",
  "patch_files": [
    "django/db/models/functions/math.py"
  ],
  "test_patch_files": [
    "tests/aggregation/tests.py"
  ],
  "patch_diff_details": {
    "django/db/models/functions/math.py": {
      "diffs": [
        {
          "start_line_old": 157,
          "end_line_old": 157,
          "file_pos": 11,
          "file_context_length": 75263,
          "pos": 37,
          "context_length": 13268
        }
      ]
    }
  },
  "vectors": 3501,
  "snippets": [
    {
      "position": 1,
      "id": "/tmp/repos/django/django/db/models/aggregates.py_Aggregate.resolve_expression_Aggregate.get_group_by_cols.1.1",
      "distance": 0.8592958450317383,
      "file_path": "django/db/models/aggregates.py",
      "start_line": 45,
      "end_line": 68,
      "tokens": 294,
      "context_length": 294
    },
    {
      "position": 2,
      "id": "/tmp/repos/django/django/db/models/aggregates.py_Aggregate.as_sql_Aggregate._get_repr_options.4.1",
      "distance": 0.9186473488807678,
      "file_path": "django/db/models/aggregates.py",
      "start_line": 70,
      "end_line": 96,
      "tokens": 266,
      "context_length": 560
    },
    {
      "position": 3,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler.ordering_parts.get_order_by.8_SQLCompiler.ordering_parts.get_order_by.9.1",
      "distance": 0.9333177804946899,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 360,
      "end_line": 396,
      "tokens": 430,
      "context_length": 990
    },
    {
      "position": 4,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler.ordering_parts.get_group_by_SQLCompiler.ordering_parts.get_group_by.45.1",
      "distance": 0.9340723752975464,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 63,
      "end_line": 147,
      "tokens": 881,
      "context_length": 1871
    },
    {
      "position": 5,
      "id": "/tmp/repos/django/django/contrib/postgres/aggregates/mixins.py_OrderableAggMixin.as_sql_OrderableAggMixin.as_sql.2.1",
      "distance": 0.9614524841308594,
      "file_path": "django/contrib/postgres/aggregates/mixins.py",
      "start_line": 22,
      "end_line": 34,
      "tokens": 124,
      "context_length": 1995
    },
    {
      "position": 6,
      "id": "/tmp/repos/django/django/contrib/postgres/aggregates/mixins.py_1_OrderableAggMixin.resolve_expression.2.1",
      "distance": 0.9654720425605774,
      "file_path": "django/contrib/postgres/aggregates/mixins.py",
      "start_line": 1,
      "end_line": 20,
      "tokens": 182,
      "context_length": 2177
    },
    {
      "position": 7,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler.ordering_parts.get_order_by_SQLCompiler.ordering_parts.get_order_by.seen.1",
      "distance": 0.9709537625312805,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 271,
      "end_line": 358,
      "tokens": 712,
      "context_length": 2889
    },
    {
      "position": 8,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler.ordering_parts.collapse_group_by_SQLCompiler.ordering_parts.collapse_group_by.5.4.1",
      "distance": 0.9847835898399353,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 149,
      "end_line": 197,
      "tokens": 523,
      "context_length": 3412
    },
    {
      "position": 9,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet._annotate_QuerySet._annotate.10.1",
      "distance": 0.9909186363220215,
      "file_path": "django/db/models/query.py",
      "start_line": 1096,
      "end_line": 1137,
      "tokens": 323,
      "context_length": 3735
    },
    {
      "position": 10,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler.ordering_parts._setup_joins_SQLCompiler.ordering_parts._setup_joins.5.1",
      "distance": 1.0070273876190186,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 756,
      "end_line": 767,
      "tokens": 163,
      "context_length": 3898
    },
    {
      "position": 11,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.add_ordering_Query.add_ordering.5.2.self.default_ordering.1",
      "distance": 1.0084638595581055,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1941,
      "end_line": 1985,
      "tokens": 364,
      "context_length": 4262
    },
    {
      "position": 12,
      "id": "/tmp/repos/django/django/db/models/expressions.py_OrderBy.as_sql_OrderBy.as_sql.8.1",
      "distance": 1.018149971961975,
      "file_path": "django/db/models/expressions.py",
      "start_line": 1192,
      "end_line": 1217,
      "tokens": 248,
      "context_length": 4510
    },
    {
      "position": 13,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.clear_ordering_Query.set_group_by.self.group_by.1",
      "distance": 1.0240130424499512,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1987,
      "end_line": 2036,
      "tokens": 420,
      "context_length": 4930
    },
    {
      "position": 14,
      "id": "/tmp/repos/django/django/db/models/expressions.py_OrderBy.as_oracle_OrderBy.desc.self.descending.1",
      "distance": 1.0270345211029053,
      "file_path": "django/db/models/expressions.py",
      "start_line": 1219,
      "end_line": 1248,
      "tokens": 211,
      "context_length": 5141
    },
    {
      "position": 15,
      "id": "/tmp/repos/django/django/db/models/sql/where.py_SubqueryConstraint_",
      "distance": 1.0274382829666138,
      "file_path": "django/db/models/sql/where.py",
      "start_line": 233,
      "end_line": 249,
      "tokens": 130,
      "context_length": 5271
    },
    {
      "position": 16,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.bump_prefix.3_Query.bump_prefix.12",
      "distance": 1.0282944440841675,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 899,
      "end_line": 921,
      "tokens": 248,
      "context_length": 5519
    },
    {
      "position": 17,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.resolve_ref_Query.resolve_ref.3.3.10.1",
      "distance": 1.033877968788147,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1702,
      "end_line": 1741,
      "tokens": 439,
      "context_length": 5958
    },
    {
      "position": 18,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler.ordering_parts.get_related_selections.13_SQLCompiler.ordering_parts.get_related_selections.14.1",
      "distance": 1.0375360250473022,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 885,
      "end_line": 977,
      "tokens": 839,
      "context_length": 6797
    },
    {
      "position": 19,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.rewrite_cols_Query.rewrite_cols.orig_exprs.5.1",
      "distance": 1.041964054107666,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 364,
      "end_line": 414,
      "tokens": 494,
      "context_length": 7291
    },
    {
      "position": 20,
      "id": "/tmp/repos/django/django/db/models/__init__.py_1_",
      "distance": 1.0447635650634766,
      "file_path": "django/db/models/__init__.py",
      "start_line": 1,
      "end_line": 53,
      "tokens": 619,
      "context_length": 7910
    },
    {
      "position": 21,
      "id": "/tmp/repos/django/django/contrib/admin/views/main.py_ChangeList._get_deterministic_ordering_ChangeList._get_deterministic_ordering.6.1",
      "distance": 1.0473012924194336,
      "file_path": "django/contrib/admin/views/main.py",
      "start_line": 340,
      "end_line": 400,
      "tokens": 508,
      "context_length": 8418
    },
    {
      "position": 22,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_collections_16",
      "distance": 1.0477161407470703,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 1,
      "end_line": 19,
      "tokens": 170,
      "context_length": 8588
    },
    {
      "position": 23,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler.ordering_parts.get_combinator_sql_SQLCompiler.ordering_parts.get_combinator_sql.14.1",
      "distance": 1.0484567880630493,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 433,
      "end_line": 486,
      "tokens": 564,
      "context_length": 9152
    },
    {
      "position": 24,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler.ordering_parts.as_subquery_condition_SQLCompiler.ordering_parts.explain_query.4.1.2.1",
      "distance": 1.0499110221862793,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 1199,
      "end_line": 1220,
      "tokens": 223,
      "context_length": 9375
    },
    {
      "position": 25,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler_SQLCompiler.ordering_parts.setup_query.self.col_count.1",
      "distance": 1.0503668785095215,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 22,
      "end_line": 47,
      "tokens": 257,
      "context_length": 9632
    },
    {
      "position": 26,
      "id": "/tmp/repos/django/django/contrib/gis/db/models/aggregates.py_GeoAggregate.as_oracle_GeoAggregate.resolve_expression.3.1",
      "distance": 1.0509140491485596,
      "file_path": "django/contrib/gis/db/models/aggregates.py",
      "start_line": 29,
      "end_line": 46,
      "tokens": 216,
      "context_length": 9848
    },
    {
      "position": 27,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet._update.alters_data_QuerySet.values.4.1",
      "distance": 1.058523178100586,
      "file_path": "django/db/models/query.py",
      "start_line": 799,
      "end_line": 838,
      "tokens": 322,
      "context_length": 10170
    },
    {
      "position": 28,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet.order_by_QuerySet.reverse.5.1",
      "distance": 1.0596110820770264,
      "file_path": "django/db/models/query.py",
      "start_line": 1139,
      "end_line": 1175,
      "tokens": 324,
      "context_length": 10494
    },
    {
      "position": 29,
      "id": "/tmp/repos/django/django/contrib/postgres/aggregates/mixins.py_OrderableAggMixin.set_source_expressions_",
      "distance": 1.0606553554534912,
      "file_path": "django/contrib/postgres/aggregates/mixins.py",
      "start_line": 36,
      "end_line": 49,
      "tokens": 145,
      "context_length": 10639
    },
    {
      "position": 30,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.combine.40_Query.combine.self.extra_order_by.1",
      "distance": 1.0623359680175781,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 628,
      "end_line": 652,
      "tokens": 269,
      "context_length": 10908
    },
    {
      "position": 31,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler.ordering_parts.get_select_for_update_of_arguments.result_SQLCompiler.ordering_parts.get_select_for_update_of_arguments.9.1",
      "distance": 1.0666307210922241,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 1038,
      "end_line": 1078,
      "tokens": 337,
      "context_length": 11245
    },
    {
      "position": 32,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler.ordering_parts.get_extra_select_SQLCompiler.ordering_parts.get_extra_select.3.1",
      "distance": 1.068774938583374,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 398,
      "end_line": 406,
      "tokens": 133,
      "context_length": 11378
    },
    {
      "position": 33,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.names_to_path.3_Query.names_to_path.4.1",
      "distance": 1.0709056854248047,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1473,
      "end_line": 1558,
      "tokens": 801,
      "context_length": 12179
    },
    {
      "position": 34,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet.__class_getitem___QuerySet.__or__.9.1",
      "distance": 1.077627182006836,
      "file_path": "django/db/models/query.py",
      "start_line": 320,
      "end_line": 346,
      "tokens": 222,
      "context_length": 12401
    },
    {
      "position": 35,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.deferred_to_data.8_Query.deferred_to_data.8.6.6.1",
      "distance": 1.0817830562591553,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 703,
      "end_line": 738,
      "tokens": 389,
      "context_length": 12790
    },
    {
      "position": 36,
      "id": "/tmp/repos/django/django/db/models/aggregates.py_Max_",
      "distance": 1.083815336227417,
      "file_path": "django/db/models/aggregates.py",
      "start_line": 122,
      "end_line": 158,
      "tokens": 245,
      "context_length": 13035
    },
    {
      "position": 37,
      "id": "/tmp/repos/django/django/db/models/functions/math.py_Random_",
      "distance": 1.0867563486099243,
      "file_path": "django/db/models/functions/math.py",
      "start_line": 144,
      "end_line": 181,
      "tokens": 233,
      "context_length": 13268,
      "file_pos": 11
    },
    {
      "position": 38,
      "id": "/tmp/repos/django/django/contrib/postgres/aggregates/general.py_1_",
      "distance": 1.088731050491333,
      "file_path": "django/contrib/postgres/aggregates/general.py",
      "start_line": 1,
      "end_line": 68,
      "tokens": 413,
      "context_length": 13681
    },
    {
      "position": 39,
      "id": "/tmp/repos/django/django/contrib/postgres/aggregates/statistics.py_1_",
      "distance": 1.0901682376861572,
      "file_path": "django/contrib/postgres/aggregates/statistics.py",
      "start_line": 1,
      "end_line": 66,
      "tokens": 419,
      "context_length": 14100
    },
    {
      "position": 40,
      "id": "/tmp/repos/django/django/db/models/query.py_RawQuerySet.iterator_RawQuerySet.iterator.db.4.8.2.1",
      "distance": 1.0905835628509521,
      "file_path": "django/db/models/query.py",
      "start_line": 1483,
      "end_line": 1516,
      "tokens": 297,
      "context_length": 14397
    },
    {
      "position": 41,
      "id": "/tmp/repos/django/django/db/models/expressions.py_OrderBy_OrderBy.get_source_expressions.1.1",
      "distance": 1.0935941934585571,
      "file_path": "django/db/models/expressions.py",
      "start_line": 1168,
      "end_line": 1190,
      "tokens": 188,
      "context_length": 14585
    },
    {
      "position": 42,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.check_related_objects_Query.check_filterable.3.1.1",
      "distance": 1.0948904752731323,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1115,
      "end_line": 1147,
      "tokens": 338,
      "context_length": 14923
    },
    {
      "position": 43,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.build_filter.19_Query.build_filter.31.1",
      "distance": 1.0984210968017578,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1294,
      "end_line": 1359,
      "tokens": 772,
      "context_length": 15695
    },
    {
      "position": 44,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet.aggregate_QuerySet.aggregate.7.1",
      "distance": 1.1020538806915283,
      "file_path": "django/db/models/query.py",
      "start_line": 365,
      "end_line": 399,
      "tokens": 314,
      "context_length": 16009
    },
    {
      "position": 45,
      "id": "/tmp/repos/django/django/db/models/base.py_Model._check_ordering_Model._check_ordering.29.1",
      "distance": 1.1020715236663818,
      "file_path": "django/db/models/base.py",
      "start_line": 1711,
      "end_line": 1811,
      "tokens": 729,
      "context_length": 16738
    },
    {
      "position": 46,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.add_filtered_relation_Query.add_filtered_relation.6",
      "distance": 1.1043696403503418,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1428,
      "end_line": 1455,
      "tokens": 283,
      "context_length": 17021
    },
    {
      "position": 47,
      "id": "/tmp/repos/django/django/db/models/query.py_RelatedPopulator.populate_",
      "distance": 1.104426622390747,
      "file_path": "django/db/models/query.py",
      "start_line": 1972,
      "end_line": 1995,
      "tokens": 200,
      "context_length": 17221
    },
    {
      "position": 48,
      "id": "/tmp/repos/django/django/db/models/sql/subqueries.py_InsertQuery_",
      "distance": 1.1060434579849243,
      "file_path": "django/db/models/sql/subqueries.py",
      "start_line": 137,
      "end_line": 163,
      "tokens": 173,
      "context_length": 17394
    },
    {
      "position": 49,
      "id": "/tmp/repos/django/django/db/backends/mysql/compiler.py_SQLUpdateCompiler_",
      "distance": 1.1079614162445068,
      "file_path": "django/db/backends/mysql/compiler.py",
      "start_line": 41,
      "end_line": 63,
      "tokens": 176,
      "context_length": 17570
    },
    {
      "position": 50,
      "id": "/tmp/repos/django/django/db/models/sql/subqueries.py_UpdateQuery_UpdateQuery.update_batch.2.3",
      "distance": 1.108142375946045,
      "file_path": "django/db/models/sql/subqueries.py",
      "start_line": 47,
      "end_line": 75,
      "tokens": 210,
      "context_length": 17780
    },
    {
      "position": 51,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet._combinator_query_QuerySet.union.2.5.1",
      "distance": 1.1088066101074219,
      "file_path": "django/db/models/query.py",
      "start_line": 983,
      "end_line": 1003,
      "tokens": 239,
      "context_length": 18019
    },
    {
      "position": 52,
      "id": "/tmp/repos/django/django/db/models/query.py_prefetch_related_objects.13_prefetch_related_objects.13.7.2.16.8.new_obj_list.obj_list.1",
      "distance": 1.109579086303711,
      "file_path": "django/db/models/query.py",
      "start_line": 1655,
      "end_line": 1761,
      "tokens": 1063,
      "context_length": 19082
    },
    {
      "position": 53,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_RawQuery._execute_query_RawQuery._execute_query.8",
      "distance": 1.1098225116729736,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 118,
      "end_line": 133,
      "tokens": 145,
      "context_length": 19227
    },
    {
      "position": 54,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler.ordering_parts.get_select_SQLCompiler.ordering_parts.get_select.14.1",
      "distance": 1.110969066619873,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 199,
      "end_line": 269,
      "tokens": 580,
      "context_length": 19807
    },
    {
      "position": 55,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.bump_prefix_Query.bump_prefix.prefix_gen.5.prefix.1",
      "distance": 1.1140332221984863,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 874,
      "end_line": 897,
      "tokens": 203,
      "context_length": 20010
    },
    {
      "position": 56,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.set_values_Query.set_values.9",
      "distance": 1.1152528524398804,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 2180,
      "end_line": 2225,
      "tokens": 371,
      "context_length": 20381
    },
    {
      "position": 57,
      "id": "/tmp/repos/django/django/contrib/admin/options.py_BaseModelAdmin.get_field_queryset_BaseModelAdmin.get_field_queryset.4.1",
      "distance": 1.1158336400985718,
      "file_path": "django/contrib/admin/options.py",
      "start_line": 207,
      "end_line": 218,
      "tokens": 135,
      "context_length": 20516
    },
    {
      "position": 58,
      "id": "/tmp/repos/django/django/db/models/fields/related_lookups.py_RelatedLookupMixin.as_sql_",
      "distance": 1.1204557418823242,
      "file_path": "django/db/models/fields/related_lookups.py",
      "start_line": 121,
      "end_line": 157,
      "tokens": 244,
      "context_length": 20760
    },
    {
      "position": 59,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.get_aggregation_Query.get_aggregation.25.1",
      "distance": 1.121488332748413,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 416,
      "end_line": 509,
      "tokens": 917,
      "context_length": 21677
    },
    {
      "position": 60,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.setup_joins.16_Query.setup_joins.17.1",
      "distance": 1.1219851970672607,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1636,
      "end_line": 1660,
      "tokens": 227,
      "context_length": 21904
    },
    {
      "position": 61,
      "id": "/tmp/repos/django/django/db/models/aggregates.py_Avg_Count.convert_value.1.1",
      "distance": 1.1238701343536377,
      "file_path": "django/db/models/aggregates.py",
      "start_line": 99,
      "end_line": 119,
      "tokens": 158,
      "context_length": 22062
    },
    {
      "position": 62,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler.ordering_parts.get_select_for_update_of_arguments_SQLCompiler.ordering_parts.get_select_for_update_of_arguments._get_parent_klass_info.2.2",
      "distance": 1.1241583824157715,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 979,
      "end_line": 1001,
      "tokens": 207,
      "context_length": 22269
    },
    {
      "position": 63,
      "id": "/tmp/repos/django/django/contrib/postgres/search.py_SearchQueryCombinable_SearchQueryCombinable.__rand__.1.1",
      "distance": 1.125978946685791,
      "file_path": "django/contrib/postgres/search.py",
      "start_line": 130,
      "end_line": 157,
      "tokens": 248,
      "context_length": 22517
    },
    {
      "position": 64,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query_Query.__init__.self.explain_options.1",
      "distance": 1.126084804534912,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 136,
      "end_line": 230,
      "tokens": 833,
      "context_length": 23350
    },
    {
      "position": 65,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet.using_QuerySet.ordered.3.3.1.1",
      "distance": 1.1271313428878784,
      "file_path": "django/db/models/query.py",
      "start_line": 1215,
      "end_line": 1243,
      "tokens": 183,
      "context_length": 23533
    },
    {
      "position": 66,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler.ordering_parts.get_select_for_update_of_arguments._get_field_choices_SQLCompiler.ordering_parts.get_select_for_update_of_arguments._get_field_choices.3.4",
      "distance": 1.1312856674194336,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 1016,
      "end_line": 1037,
      "tokens": 199,
      "context_length": 23732
    },
    {
      "position": 67,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.split_exclude_Query.split_exclude.23.1",
      "distance": 1.132692575454712,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1743,
      "end_line": 1814,
      "tokens": 784,
      "context_length": 24516
    },
    {
      "position": 68,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.set_empty_Query.set_limits.4.1",
      "distance": 1.1334664821624756,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1816,
      "end_line": 1845,
      "tokens": 259,
      "context_length": 24775
    },
    {
      "position": 69,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLAggregateCompiler_",
      "distance": 1.1358790397644043,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 1583,
      "end_line": 1614,
      "tokens": 244,
      "context_length": 25019
    },
    {
      "position": 70,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.get_count_Query.explain.6.1",
      "distance": 1.1362777948379517,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 511,
      "end_line": 551,
      "tokens": 325,
      "context_length": 25344
    },
    {
      "position": 71,
      "id": "/tmp/repos/django/django/views/generic/list.py_MultipleObjectMixin.get_ordering_MultipleObjectMixin.paginate_queryset.6.3.1",
      "distance": 1.1414272785186768,
      "file_path": "django/views/generic/list.py",
      "start_line": 50,
      "end_line": 75,
      "tokens": 244,
      "context_length": 25588
    },
    {
      "position": 72,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLUpdateCompiler.pre_sql_setup_SQLUpdateCompiler.pre_sql_setup.19",
      "distance": 1.1415412425994873,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 1540,
      "end_line": 1580,
      "tokens": 409,
      "context_length": 25997
    },
    {
      "position": 73,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_1_JoinInfo.1",
      "distance": 1.1429564952850342,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1,
      "end_line": 65,
      "tokens": 465,
      "context_length": 26462
    },
    {
      "position": 74,
      "id": "/tmp/repos/django/django/db/models/deletion.py_operator_get_candidate_relations_to_delete.3.1",
      "distance": 1.1455364227294922,
      "file_path": "django/db/models/deletion.py",
      "start_line": 1,
      "end_line": 76,
      "tokens": 566,
      "context_length": 27028
    },
    {
      "position": 75,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_RawQuery_RawQuery.__str__.1.1",
      "distance": 1.147207498550415,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 68,
      "end_line": 116,
      "tokens": 361,
      "context_length": 27389
    },
    {
      "position": 76,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler.ordering_parts.execute_sql_SQLCompiler.ordering_parts.execute_sql.11.1",
      "distance": 1.148307204246521,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 1132,
      "end_line": 1197,
      "tokens": 527,
      "context_length": 27916
    },
    {
      "position": 77,
      "id": "/tmp/repos/django/django/db/backends/postgresql/features.py_operator_",
      "distance": 1.1492750644683838,
      "file_path": "django/db/backends/postgresql/features.py",
      "start_line": 1,
      "end_line": 104,
      "tokens": 844,
      "context_length": 28760
    },
    {
      "position": 78,
      "id": "/tmp/repos/django/django/db/models/fields/related_lookups.py_RelatedIn.as_sql_RelatedIn.as_sql.1.5.2.1",
      "distance": 1.1499453783035278,
      "file_path": "django/db/models/fields/related_lookups.py",
      "start_line": 62,
      "end_line": 101,
      "tokens": 451,
      "context_length": 29211
    },
    {
      "position": 79,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler.ordering_parts.as_sql_SQLCompiler.ordering_parts.as_sql.3.14.2",
      "distance": 1.149990439414978,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 488,
      "end_line": 645,
      "tokens": 1469,
      "context_length": 30680
    },
    {
      "position": 80,
      "id": "/tmp/repos/django/django/db/models/base.py_35_",
      "distance": 1.1502330303192139,
      "file_path": "django/db/models/base.py",
      "start_line": 2038,
      "end_line": 2089,
      "tokens": 351,
      "context_length": 31031
    },
    {
      "position": 81,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet.earliest_QuerySet.last.2.1.1",
      "distance": 1.1513121128082275,
      "file_path": "django/db/models/query.py",
      "start_line": 664,
      "end_line": 678,
      "tokens": 132,
      "context_length": 31163
    },
    {
      "position": 82,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler.ordering_parts.pre_sql_setup_SQLCompiler.ordering_parts.pre_sql_setup.8.1",
      "distance": 1.1527620553970337,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 49,
      "end_line": 61,
      "tokens": 155,
      "context_length": 31318
    },
    {
      "position": 83,
      "id": "/tmp/repos/django/django/contrib/gis/db/models/aggregates.py_1_GeoAggregate.as_sql.3",
      "distance": 1.153244972229004,
      "file_path": "django/contrib/gis/db/models/aggregates.py",
      "start_line": 1,
      "end_line": 27,
      "tokens": 199,
      "context_length": 31517
    },
    {
      "position": 84,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet._fetch_all_QuerySet._next_is_sticky.3.1",
      "distance": 1.1532607078552246,
      "file_path": "django/db/models/query.py",
      "start_line": 1318,
      "end_line": 1336,
      "tokens": 186,
      "context_length": 31703
    },
    {
      "position": 85,
      "id": "/tmp/repos/django/django/db/models/aggregates.py_1_Aggregate.set_source_expressions.2.1",
      "distance": 1.154346227645874,
      "file_path": "django/db/models/aggregates.py",
      "start_line": 1,
      "end_line": 43,
      "tokens": 344,
      "context_length": 32047
    },
    {
      "position": 86,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet._merge_known_related_objects_QuerySet._not_support_combined_queries.1.1",
      "distance": 1.1547691822052002,
      "file_path": "django/db/models/query.py",
      "start_line": 1349,
      "end_line": 1397,
      "tokens": 405,
      "context_length": 32452
    },
    {
      "position": 87,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.clear_limits_Query.add_distinct_fields.self.distinct.1",
      "distance": 1.1561074256896973,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1847,
      "end_line": 1896,
      "tokens": 330,
      "context_length": 32782
    },
    {
      "position": 88,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.add_filter_Query.build_where.1.1",
      "distance": 1.1571176052093506,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1361,
      "end_line": 1382,
      "tokens": 250,
      "context_length": 33032
    },
    {
      "position": 89,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.annotation_select_Query.extra_select.2.3.1.1",
      "distance": 1.157279372215271,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 2227,
      "end_line": 2259,
      "tokens": 228,
      "context_length": 33260
    },
    {
      "position": 90,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler.ordering_parts.get_distinct_SQLCompiler.ordering_parts.get_distinct.6.1",
      "distance": 1.1587880849838257,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 691,
      "end_line": 713,
      "tokens": 202,
      "context_length": 33462
    },
    {
      "position": 91,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.combine_Query.combine.39",
      "distance": 1.1604419946670532,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 553,
      "end_line": 627,
      "tokens": 809,
      "context_length": 34271
    },
    {
      "position": 92,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet.count_QuerySet._populate_pk_values.1.1.obj.pk.1",
      "distance": 1.1619001626968384,
      "file_path": "django/db/models/query.py",
      "start_line": 401,
      "end_line": 459,
      "tokens": 474,
      "context_length": 34745
    },
    {
      "position": 93,
      "id": "/tmp/repos/django/django/db/models/expressions.py_Window_Window.set_source_expressions.1",
      "distance": 1.1637507677078247,
      "file_path": "django/db/models/expressions.py",
      "start_line": 1251,
      "end_line": 1294,
      "tokens": 378,
      "context_length": 35123
    },
    {
      "position": 94,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler.ordering_parts.results_iter_SQLCompiler.ordering_parts.has_results.2.1",
      "distance": 1.166019320487976,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 1111,
      "end_line": 1130,
      "tokens": 206,
      "context_length": 35329
    },
    {
      "position": 95,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet.__setstate___QuerySet.__len__.2.1",
      "distance": 1.1669014692306519,
      "file_path": "django/db/models/query.py",
      "start_line": 236,
      "end_line": 263,
      "tokens": 221,
      "context_length": 35550
    },
    {
      "position": 96,
      "id": "/tmp/repos/django/django/contrib/gis/db/models/__init__.py_1_",
      "distance": 1.1670167446136475,
      "file_path": "django/contrib/gis/db/models/__init__.py",
      "start_line": 1,
      "end_line": 19,
      "tokens": 204,
      "context_length": 35754
    },
    {
      "position": 97,
      "id": "/tmp/repos/django/django/db/models/lookups.py_Lookup.rhs_is_direct_value_Lookup.is_summary.1.1",
      "distance": 1.1680450439453125,
      "file_path": "django/db/models/lookups.py",
      "start_line": 102,
      "end_line": 144,
      "tokens": 359,
      "context_length": 36113
    },
    {
      "position": 98,
      "id": "/tmp/repos/django/django/db/backends/oracle/features.py_1_",
      "distance": 1.1692492961883545,
      "file_path": "django/db/backends/oracle/features.py",
      "start_line": 1,
      "end_line": 94,
      "tokens": 736,
      "context_length": 36849
    },
    {
      "position": 99,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet.__iter___QuerySet.__bool__.2.1",
      "distance": 1.1693899631500244,
      "file_path": "django/db/models/query.py",
      "start_line": 265,
      "end_line": 285,
      "tokens": 180,
      "context_length": 37029
    },
    {
      "position": 100,
      "id": "/tmp/repos/django/django/db/backends/sqlite3/operations.py_DatabaseOperations.check_expression_support_DatabaseOperations.check_expression_support.4.1",
      "distance": 1.1703832149505615,
      "file_path": "django/db/backends/sqlite3/operations.py",
      "start_line": 40,
      "end_line": 66,
      "tokens": 232,
      "context_length": 37261
    },
    {
      "position": 101,
      "id": "/tmp/repos/django/django/db/models/expressions.py_When_When.get_group_by_cols.cols.3.1",
      "distance": 1.1706829071044922,
      "file_path": "django/db/models/expressions.py",
      "start_line": 929,
      "end_line": 993,
      "tokens": 591,
      "context_length": 37852
    },
    {
      "position": 102,
      "id": "/tmp/repos/django/django/contrib/postgres/search.py_CombinedSearchQuery_SearchRank.__init__.7",
      "distance": 1.1707699298858643,
      "file_path": "django/contrib/postgres/search.py",
      "start_line": 198,
      "end_line": 230,
      "tokens": 243,
      "context_length": 38095
    },
    {
      "position": 103,
      "id": "/tmp/repos/django/django/db/models/sql/subqueries.py_1_DeleteQuery.delete_batch.6.1",
      "distance": 1.1716307401657104,
      "file_path": "django/db/models/sql/subqueries.py",
      "start_line": 1,
      "end_line": 44,
      "tokens": 320,
      "context_length": 38415
    },
    {
      "position": 104,
      "id": "/tmp/repos/django/django/db/models/expressions.py_Case.as_sql_Case.get_group_by_cols.2.1",
      "distance": 1.1723406314849854,
      "file_path": "django/db/models/expressions.py",
      "start_line": 1044,
      "end_line": 1074,
      "tokens": 281,
      "context_length": 38696
    },
    {
      "position": 105,
      "id": "/tmp/repos/django/django/db/models/fields/related.py_RelatedField._check_clashes_RelatedField._check_clashes.potential_clashes_38.1",
      "distance": 1.1724846363067627,
      "file_path": "django/db/models/fields/related.py",
      "start_line": 190,
      "end_line": 254,
      "tokens": 673,
      "context_length": 39369
    },
    {
      "position": 106,
      "id": "/tmp/repos/django/django/contrib/gis/db/models/aggregates.py_Collect_",
      "distance": 1.1731419563293457,
      "file_path": "django/contrib/gis/db/models/aggregates.py",
      "start_line": 49,
      "end_line": 84,
      "tokens": 207,
      "context_length": 39576
    },
    {
      "position": 107,
      "id": "/tmp/repos/django/django/db/models/query.py_1_BaseIterable.__init__.self.chunk_size.1",
      "distance": 1.1736857891082764,
      "file_path": "django/db/models/query.py",
      "start_line": 1,
      "end_line": 39,
      "tokens": 294,
      "context_length": 39870
    },
    {
      "position": 108,
      "id": "/tmp/repos/django/django/db/models/expressions.py_Window.as_sqlite_Window.get_group_by_cols.1.1",
      "distance": 1.1743416786193848,
      "file_path": "django/db/models/expressions.py",
      "start_line": 1330,
      "end_line": 1352,
      "tokens": 215,
      "context_length": 40085
    },
    {
      "position": 109,
      "id": "/tmp/repos/django/django/db/models/query_utils.py_InvalidQueryType_subclasses.2.1",
      "distance": 1.1757800579071045,
      "file_path": "django/db/models/query_utils.py",
      "start_line": 25,
      "end_line": 54,
      "tokens": 185,
      "context_length": 40270
    },
    {
      "position": 110,
      "id": "/tmp/repos/django/django/contrib/postgres/search.py_SearchQuery_SearchQuery.__str__.2.1",
      "distance": 1.1758205890655518,
      "file_path": "django/contrib/postgres/search.py",
      "start_line": 160,
      "end_line": 195,
      "tokens": 313,
      "context_length": 40583
    },
    {
      "position": 111,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.add_select_related_Query.add_extra.5.self.extra_order_by.1",
      "distance": 1.1760801076889038,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 2038,
      "end_line": 2084,
      "tokens": 370,
      "context_length": 40953
    },
    {
      "position": 112,
      "id": "/tmp/repos/django/django/db/models/expressions.py_RawSQL_RawSQL.get_group_by_cols.1.1",
      "distance": 1.1764552593231201,
      "file_path": "django/db/models/expressions.py",
      "start_line": 779,
      "end_line": 793,
      "tokens": 120,
      "context_length": 41073
    },
    {
      "position": 113,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.get_external_cols_Query.resolve_lookup_value.2.1",
      "distance": 1.1767349243164062,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1059,
      "end_line": 1084,
      "tokens": 214,
      "context_length": 41287
    },
    {
      "position": 114,
      "id": "/tmp/repos/django/django/db/models/fields/related.py_RelatedField._check_related_query_name_is_valid_RelatedField._check_related_query_name_is_valid.6.1",
      "distance": 1.1770308017730713,
      "file_path": "django/db/models/fields/related.py",
      "start_line": 127,
      "end_line": 154,
      "tokens": 201,
      "context_length": 41488
    },
    {
      "position": 115,
      "id": "/tmp/repos/django/django/db/models/functions/comparison.py_Collate_Collate.as_sql.2.1",
      "distance": 1.1773104667663574,
      "file_path": "django/db/models/functions/comparison.py",
      "start_line": 78,
      "end_line": 92,
      "tokens": 175,
      "context_length": 41663
    },
    {
      "position": 116,
      "id": "/tmp/repos/django/django/db/models/fields/related.py_ManyToManyField._check_relationship_model_ManyToManyField._check_relationship_model.3.3.9.3.seen_from.5.1",
      "distance": 1.177879810333252,
      "file_path": "django/db/models/fields/related.py",
      "start_line": 1235,
      "end_line": 1352,
      "tokens": 963,
      "context_length": 42626
    },
    {
      "position": 117,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet.intersection_QuerySet.difference.2.2.1",
      "distance": 1.177890658378601,
      "file_path": "django/db/models/query.py",
      "start_line": 1005,
      "end_line": 1018,
      "tokens": 126,
      "context_length": 42752
    },
    {
      "position": 118,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.join_parent_model_Query.join_parent_model.7.1",
      "distance": 1.1785484552383423,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 991,
      "end_line": 1022,
      "tokens": 307,
      "context_length": 43059
    },
    {
      "position": 119,
      "id": "/tmp/repos/django/django/db/models/expressions.py_RawSQL.resolve_expression_Star.as_sql.1.1",
      "distance": 1.178917646408081,
      "file_path": "django/db/models/expressions.py",
      "start_line": 795,
      "end_line": 811,
      "tokens": 153,
      "context_length": 43212
    },
    {
      "position": 120,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet.22_QuerySet.iterator.4.1",
      "distance": 1.179863691329956,
      "file_path": "django/db/models/query.py",
      "start_line": 348,
      "end_line": 363,
      "tokens": 146,
      "context_length": 43358
    },
    {
      "position": 121,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler.ordering_parts.get_related_selections_SQLCompiler.ordering_parts.get_related_selections.12.14",
      "distance": 1.1803102493286133,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 803,
      "end_line": 883,
      "tokens": 717,
      "context_length": 44075
    },
    {
      "position": 122,
      "id": "/tmp/repos/django/django/db/backends/postgresql/operations.py_DatabaseOperations.sequence_reset_sql_DatabaseOperations.sequence_reset_sql.5.1",
      "distance": 1.181777000427246,
      "file_path": "django/db/backends/postgresql/operations.py",
      "start_line": 160,
      "end_line": 187,
      "tokens": 311,
      "context_length": 44386
    },
    {
      "position": 123,
      "id": "/tmp/repos/django/django/db/models/fields/related.py_RelatedField._check_clashes.39_RelatedField._check_clashes.40.1",
      "distance": 1.1830992698669434,
      "file_path": "django/db/models/fields/related.py",
      "start_line": 255,
      "end_line": 282,
      "tokens": 269,
      "context_length": 44655
    },
    {
      "position": 124,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.demote_joins_Query.reset_refcounts.2.2",
      "distance": 1.1840637922286987,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 807,
      "end_line": 833,
      "tokens": 280,
      "context_length": 44935
    },
    {
      "position": 125,
      "id": "/tmp/repos/django/django/db/models/lookups.py_IExact_IntegerLessThan.1",
      "distance": 1.184522032737732,
      "file_path": "django/db/models/lookups.py",
      "start_line": 305,
      "end_line": 355,
      "tokens": 306,
      "context_length": 45241
    },
    {
      "position": 126,
      "id": "/tmp/repos/django/django/db/models/query.py_RelatedPopulator_RelatedPopulator.__init__.self.remote_setter.1",
      "distance": 1.1846625804901123,
      "file_path": "django/db/models/query.py",
      "start_line": 1911,
      "end_line": 1970,
      "tokens": 772,
      "context_length": 46013
    },
    {
      "position": 127,
      "id": "/tmp/repos/django/django/db/models/expressions.py_Subquery_Subquery.get_group_by_cols.4.1",
      "distance": 1.1867170333862305,
      "file_path": "django/db/models/expressions.py",
      "start_line": 1077,
      "end_line": 1136,
      "tokens": 440,
      "context_length": 46453
    },
    {
      "position": 128,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet.prefetch_related_QuerySet.prefetch_related.5.1",
      "distance": 1.186718225479126,
      "file_path": "django/db/models/query.py",
      "start_line": 1058,
      "end_line": 1079,
      "tokens": 214,
      "context_length": 46667
    },
    {
      "position": 129,
      "id": "/tmp/repos/django/django/db/migrations/operations/special.py_RunSQL_RunSQL.describe.1.1",
      "distance": 1.1869772672653198,
      "file_path": "django/db/migrations/operations/special.py",
      "start_line": 63,
      "end_line": 114,
      "tokens": 390,
      "context_length": 47057
    },
    {
      "position": 130,
      "id": "/tmp/repos/django/django/forms/models.py_BaseModelFormSet.get_queryset_BaseModelFormSet.get_queryset.2.1",
      "distance": 1.1871514320373535,
      "file_path": "django/forms/models.py",
      "start_line": 629,
      "end_line": 646,
      "tokens": 167,
      "context_length": 47224
    },
    {
      "position": 131,
      "id": "/tmp/repos/django/django/db/backends/sqlite3/operations.py_datetime_DatabaseOperations.bulk_batch_size.2.3.1.1",
      "distance": 1.1878602504730225,
      "file_path": "django/db/backends/sqlite3/operations.py",
      "start_line": 1,
      "end_line": 38,
      "tokens": 258,
      "context_length": 47482
    },
    {
      "position": 132,
      "id": "/tmp/repos/django/django/db/models/expressions.py_BaseExpression.get_lookup_BaseExpression.select_format.3.1",
      "distance": 1.1886299848556519,
      "file_path": "django/db/models/expressions.py",
      "start_line": 332,
      "end_line": 387,
      "tokens": 368,
      "context_length": 47850
    },
    {
      "position": 133,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_JoinPromoter.update_join_types_",
      "distance": 1.1889781951904297,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 2415,
      "end_line": 2470,
      "tokens": 827,
      "context_length": 48677
    },
    {
      "position": 134,
      "id": "/tmp/repos/django/django/contrib/gis/db/backends/mysql/operations.py_MySQLOperations.disallowed_aggregates_MySQLOperations.unsupported_functions.3.1",
      "distance": 1.1917386054992676,
      "file_path": "django/contrib/gis/db/backends/mysql/operations.py",
      "start_line": 51,
      "end_line": 71,
      "tokens": 225,
      "context_length": 48902
    },
    {
      "position": 135,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet.delete_QuerySet.delete.19.1",
      "distance": 1.1920846700668335,
      "file_path": "django/db/models/query.py",
      "start_line": 719,
      "end_line": 746,
      "tokens": 235,
      "context_length": 49137
    },
    {
      "position": 136,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLUpdateCompiler.execute_sql_SQLUpdateCompiler.execute_sql.5.1",
      "distance": 1.1924266815185547,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 1519,
      "end_line": 1538,
      "tokens": 164,
      "context_length": 49301
    },
    {
      "position": 137,
      "id": "/tmp/repos/django/django/db/models/deletion.py_Collector.related_objects_Collector.instances_with_model.1.1.1",
      "distance": 1.1941351890563965,
      "file_path": "django/db/models/deletion.py",
      "start_line": 346,
      "end_line": 359,
      "tokens": 116,
      "context_length": 49417
    },
    {
      "position": 138,
      "id": "/tmp/repos/django/django/contrib/admin/checks.py_BaseModelAdminChecks._check_ordering_item_BaseModelAdminChecks._check_ordering_item.3.4.3.3.1.1",
      "distance": 1.1945551633834839,
      "file_path": "django/contrib/admin/checks.py",
      "start_line": 563,
      "end_line": 598,
      "tokens": 304,
      "context_length": 49721
    },
    {
      "position": 139,
      "id": "/tmp/repos/django/django/db/backends/mysql/compiler.py_1_SQLInsertCompiler.1",
      "distance": 1.194671869277954,
      "file_path": "django/db/backends/mysql/compiler.py",
      "start_line": 1,
      "end_line": 14,
      "tokens": 123,
      "context_length": 49844
    },
    {
      "position": 140,
      "id": "/tmp/repos/django/django/db/models/base.py_Model._get_next_or_previous_by_FIELD_Model._get_next_or_previous_by_FIELD.8.2.1",
      "distance": 1.1952087879180908,
      "file_path": "django/db/models/base.py",
      "start_line": 961,
      "end_line": 975,
      "tokens": 212,
      "context_length": 50056
    },
    {
      "position": 141,
      "id": "/tmp/repos/django/django/db/backends/oracle/operations.py_DatabaseOperations.integer_field_ranges.__foreign_key_constraints_DatabaseOperations.integer_field_ranges._foreign_key_constraints.3.1",
      "distance": 1.197394847869873,
      "file_path": "django/db/backends/oracle/operations.py",
      "start_line": 369,
      "end_line": 406,
      "tokens": 369,
      "context_length": 50425
    },
    {
      "position": 142,
      "id": "/tmp/repos/django/django/core/management/commands/dumpdata.py_Command.handle.get_objects_Command.handle.get_objects.3.3.4.2.1",
      "distance": 1.1998987197875977,
      "file_path": "django/core/management/commands/dumpdata.py",
      "start_line": 142,
      "end_line": 178,
      "tokens": 316,
      "context_length": 50741
    },
    {
      "position": 143,
      "id": "/tmp/repos/django/django/db/models/fields/__init__.py_Field.__lt___Field.__lt__.3.2.1",
      "distance": 1.2025498151779175,
      "file_path": "django/db/models/fields/__init__.py",
      "start_line": 525,
      "end_line": 542,
      "tokens": 182,
      "context_length": 50923
    }
  ],
  "files": [
    {
      "file_path": "django/db/models/aggregates.py",
      "position": 1,
      "tokens": 1301,
      "context_length": 1301
    },
    {
      "file_path": "django/db/models/sql/compiler.py",
      "position": 2,
      "tokens": 14270,
      "context_length": 15571
    },
    {
      "file_path": "django/contrib/postgres/aggregates/mixins.py",
      "position": 3,
      "tokens": 438,
      "context_length": 16009
    },
    {
      "file_path": "django/db/models/query.py",
      "position": 4,
      "tokens": 17212,
      "context_length": 33221
    },
    {
      "file_path": "django/db/models/sql/query.py",
      "position": 5,
      "tokens": 22490,
      "context_length": 55711
    },
    {
      "file_path": "django/db/models/expressions.py",
      "position": 6,
      "tokens": 10856,
      "context_length": 66567
    },
    {
      "file_path": "django/db/models/sql/where.py",
      "position": 7,
      "tokens": 1814,
      "context_length": 68381
    },
    {
      "file_path": "django/db/models/__init__.py",
      "position": 8,
      "tokens": 619,
      "context_length": 69000
    },
    {
      "file_path": "django/contrib/admin/views/main.py",
      "position": 9,
      "tokens": 4396,
      "context_length": 73396
    },
    {
      "file_path": "django/contrib/gis/db/models/aggregates.py",
      "position": 10,
      "tokens": 617,
      "context_length": 74013
    },
    {
      "file_path": "django/db/models/functions/math.py",
      "position": 11,
      "tokens": 1250,
      "context_length": 75263
    },
    {
      "file_path": "django/contrib/postgres/aggregates/general.py",
      "position": 12,
      "tokens": 414,
      "context_length": 75677
    },
    {
      "file_path": "django/contrib/postgres/aggregates/statistics.py",
      "position": 13,
      "tokens": 419,
      "context_length": 76096
    },
    {
      "file_path": "django/db/models/base.py",
      "position": 14,
      "tokens": 16644,
      "context_length": 92740
    },
    {
      "file_path": "django/db/models/sql/subqueries.py",
      "position": 15,
      "tokens": 1213,
      "context_length": 93953
    },
    {
      "file_path": "django/db/backends/mysql/compiler.py",
      "position": 16,
      "tokens": 520,
      "context_length": 94473
    },
    {
      "file_path": "django/contrib/admin/options.py",
      "position": 17,
      "tokens": 18582,
      "context_length": 113055
    },
    {
      "file_path": "django/db/models/fields/related_lookups.py",
      "position": 18,
      "tokens": 1453,
      "context_length": 114508
    },
    {
      "file_path": "django/contrib/postgres/search.py",
      "position": 19,
      "tokens": 2222,
      "context_length": 116730
    },
    {
      "file_path": "django/views/generic/list.py",
      "position": 20,
      "tokens": 1572,
      "context_length": 118302
    },
    {
      "file_path": "django/db/models/deletion.py",
      "position": 21,
      "tokens": 3828,
      "context_length": 122130
    },
    {
      "file_path": "django/db/backends/postgresql/features.py",
      "position": 22,
      "tokens": 844,
      "context_length": 122974
    },
    {
      "file_path": "django/contrib/gis/db/models/__init__.py",
      "position": 23,
      "tokens": 204,
      "context_length": 123178
    },
    {
      "file_path": "django/db/models/lookups.py",
      "position": 24,
      "tokens": 4949,
      "context_length": 128127
    },
    {
      "file_path": "django/db/backends/oracle/features.py",
      "position": 25,
      "tokens": 737,
      "context_length": 128864
    },
    {
      "file_path": "django/db/backends/sqlite3/operations.py",
      "position": 26,
      "tokens": 3090,
      "context_length": 131954
    },
    {
      "file_path": "django/db/models/fields/related.py",
      "position": 27,
      "tokens": 13876,
      "context_length": 145830
    },
    {
      "file_path": "django/db/models/query_utils.py",
      "position": 28,
      "tokens": 2706,
      "context_length": 148536
    },
    {
      "file_path": "django/db/models/functions/comparison.py",
      "position": 29,
      "tokens": 1404,
      "context_length": 149940
    },
    {
      "file_path": "django/db/backends/postgresql/operations.py",
      "position": 30,
      "tokens": 2561,
      "context_length": 152501
    },
    {
      "file_path": "django/db/migrations/operations/special.py",
      "position": 31,
      "tokens": 1558,
      "context_length": 154059
    },
    {
      "file_path": "django/forms/models.py",
      "position": 32,
      "tokens": 11774,
      "context_length": 165833
    },
    {
      "file_path": "django/contrib/gis/db/backends/mysql/operations.py",
      "position": 33,
      "tokens": 851,
      "context_length": 166684
    },
    {
      "file_path": "django/contrib/admin/checks.py",
      "position": 34,
      "tokens": 9137,
      "context_length": 175821
    },
    {
      "file_path": "django/db/backends/oracle/operations.py",
      "position": 35,
      "tokens": 5971,
      "context_length": 181792
    },
    {
      "file_path": "django/core/management/commands/dumpdata.py",
      "position": 36,
      "tokens": 1612,
      "context_length": 183404
    },
    {
      "file_path": "django/db/models/fields/__init__.py",
      "position": 37,
      "tokens": 18371,
      "context_length": 201775
    }
  ]
}