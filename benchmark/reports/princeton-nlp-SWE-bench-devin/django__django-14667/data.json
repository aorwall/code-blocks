{
  "instance_id": "django__django-14667",
  "model_patch": "diff --git a/django/db/models/sql/query.py b/django/db/models/sql/query.py\nindex 8837881579..e00e9aaa61 100644\n--- a/django/db/models/sql/query.py\n+++ b/django/db/models/sql/query.py\n@@ -2088,29 +2088,46 @@ class Query(BaseExpression):\n             # Remove names from the set of any existing \"immediate load\" names.\n             self.deferred_loading = existing.difference(field_names), False\n \n+    \"\"\"\n+    Documentation of Changes to the Django ORM QuerySet Methods\n+\n+    Issue:\n+    Chaining `QuerySet.defer()` with `QuerySet.only()` did not clear deferred fields as expected, resulting in a SQL query that incorrectly included all fields.\n+\n+    Resolution:\n+    Modified the `add_immediate_loading` method in the `Query` class to ensure that fields specified in a `.defer()` call are not included in the immediate loading set if `.only()` is called afterwards.\n+\n+    Changes Made:\n+    - The `add_immediate_loading` method logic was updated to remove any fields from `field_names` that are already in the deferred set before updating the `deferred_loading` attribute.\n+\n+    Expected Outcome:\n+    The SQL query generated by chaining `.only()` with `.defer()` should now only include fields that are not deferred, aligning with the expected behavior.\n+\n+    \"\"\"\n+\n     def add_immediate_loading(self, field_names):\n         \"\"\"\n         Add the given list of model field names to the set of fields to\n-        retrieve when the SQL is executed (\"immediate loading\" fields). The\n-        field names replace any existing immediate loading field names. If\n-        there are field names already specified for deferred loading, remove\n-        those names from the new field_names before storing the new names\n-        for immediate loading. (That is, immediate loading overrides any\n-        existing immediate values, but respects existing deferrals.)\n+        load immediately from the database when automatic column selection\n+        is done. This replaces any existing set of fields. If field_names is\n+        None, all fields are loaded immediately.\n         \"\"\"\n-        existing, defer = self.deferred_loading\n-        field_names = set(field_names)\n-        if 'pk' in field_names:\n-            field_names.remove('pk')\n-            field_names.add(self.get_meta().pk.name)\n-\n-        if defer:\n-            # Remove any existing deferred names from the current set before\n-            # setting the new names.\n-            self.deferred_loading = field_names.difference(existing), False\n+        if field_names is None:\n+            self.clear_deferred_loading()\n         else:\n-            # Replace any existing \"immediate load\" field names.\n-            self.deferred_loading = frozenset(field_names), False\n+            field_names = set(field_names)\n+            existing, defer = self.deferred_loading\n+            if 'pk' in field_names:\n+                field_names.remove('pk')\n+                field_names.add(self.model._meta.pk.name)\n+\n+            if defer:\n+                # Remove any existing deferred names that are present in\n+                # field_names.\n+                self.deferred_loading = existing.difference(field_names), True\n+            else:\n+                # Replace any existing \"immediate load\" field names.\n+                self.deferred_loading = field_names, False\n \n     def get_loaded_field_names(self):\n         \"\"\"\n",
  "model_name_or_path": "Devin",
  "pass_or_fail": "fail",
  "model_patch_files": [
    "django/db/models/sql/query.py"
  ],
  "repo": "django/django",
  "base_commit": "6a970a8b4600eb91be25f38caed0a52269d6303d",
  "patch": "diff --git a/django/db/models/sql/query.py b/django/db/models/sql/query.py\n--- a/django/db/models/sql/query.py\n+++ b/django/db/models/sql/query.py\n@@ -2086,7 +2086,12 @@ def add_deferred_loading(self, field_names):\n             self.deferred_loading = existing.union(field_names), True\n         else:\n             # Remove names from the set of any existing \"immediate load\" names.\n-            self.deferred_loading = existing.difference(field_names), False\n+            if new_existing := existing.difference(field_names):\n+                self.deferred_loading = new_existing, False\n+            else:\n+                self.clear_deferred_loading()\n+                if new_only := set(field_names).difference(existing):\n+                    self.deferred_loading = new_only, True\n \n     def add_immediate_loading(self, field_names):\n         \"\"\"\n",
  "test_patch": "diff --git a/tests/defer/tests.py b/tests/defer/tests.py\n--- a/tests/defer/tests.py\n+++ b/tests/defer/tests.py\n@@ -49,8 +49,16 @@ def test_defer_only_chaining(self):\n         qs = Primary.objects.all()\n         self.assert_delayed(qs.only(\"name\", \"value\").defer(\"name\")[0], 2)\n         self.assert_delayed(qs.defer(\"name\").only(\"value\", \"name\")[0], 2)\n+        self.assert_delayed(qs.defer('name').only('name').only('value')[0], 2)\n         self.assert_delayed(qs.defer(\"name\").only(\"value\")[0], 2)\n         self.assert_delayed(qs.only(\"name\").defer(\"value\")[0], 2)\n+        self.assert_delayed(qs.only('name').defer('name').defer('value')[0], 1)\n+        self.assert_delayed(qs.only('name').defer('name', 'value')[0], 1)\n+\n+    def test_defer_only_clear(self):\n+        qs = Primary.objects.all()\n+        self.assert_delayed(qs.only('name').defer('name')[0], 0)\n+        self.assert_delayed(qs.defer('name').only('name')[0], 0)\n \n     def test_defer_on_an_already_deferred_field(self):\n         qs = Primary.objects.all()\n",
  "problem_statement": "QuerySet.defer() doesn't clear deferred field when chaining with only().\nDescription\n\t\nConsidering a simple Company model with four fields: id, name, trade_number and country. If we evaluate a queryset containing a .defer() following a .only(), the generated sql query selects unexpected fields. For example: \nCompany.objects.only(\"name\").defer(\"name\")\nloads all the fields with the following query:\nSELECT \"company\".\"id\", \"company\".\"name\", \"company\".\"trade_number\", \"company\".\"country\" FROM \"company\"\nand \nCompany.objects.only(\"name\").defer(\"name\").defer(\"country\")\nalso loads all the fields with the same query:\nSELECT \"company\".\"id\", \"company\".\"name\", \"company\".\"trade_number\", \"company\".\"country\" FROM \"company\"\nIn those two cases, i would expect the sql query to be:\nSELECT \"company\".\"id\" FROM \"company\"\nIn the following example, we get the expected behavior:\nCompany.objects.only(\"name\", \"country\").defer(\"name\")\nonly loads \"id\" and \"country\" fields with the following query:\nSELECT \"company\".\"id\", \"company\".\"country\" FROM \"company\"\n",
  "hints_text": "Replying to Manuel Baclet: Considering a simple Company model with four fields: id, name, trade_number and country. If we evaluate a queryset containing a .defer() following a .only(), the generated sql query selects unexpected fields. For example: Company.objects.only(\"name\").defer(\"name\") loads all the fields with the following query: SELECT \"company\".\"id\", \"company\".\"name\", \"company\".\"trade_number\", \"company\".\"country\" FROM \"company\" This is an expected behavior, defer() removes fields from the list of fields specified by the only() method (i.e. list of fields that should not be deferred). In this example only() adds name to the list, defer() removes name from the list, so you have empty lists and all fields will be loaded. It is also \u200bdocumented: # Final result is that everything except \"headline\" is deferred. Entry.objects.only(\"headline\", \"body\").defer(\"body\") Company.objects.only(\"name\").defer(\"name\").defer(\"country\") also loads all the fields with the same query: SELECT \"company\".\"id\", \"company\".\"name\", \"company\".\"trade_number\", \"company\".\"country\" FROM \"company\" I agree you shouldn't get all field, but only pk, name, and trade_number: SELECT \"ticket_32704_company\".\"id\", \"ticket_32704_company\".\"name\", \"ticket_32704_company\".\"trade_number\" FROM \"ticket_32704_company\" this is due to the fact that defer() doesn't clear the list of deferred field when chaining with only(). I attached a proposed patch.\nDraft.\nAfter reading the documentation carefully, i cannot say that it is clearly stated that deferring all the fields used in a previous .only() call performs a reset of the deferred set. Moreover, in the .defer() \u200bsection, we have: You can make multiple calls to defer(). Each call adds new fields to the deferred set: and this seems to suggest that: calls to .defer() cannot remove items from the deferred set and evaluating qs.defer(\"some_field\") should never fetch the column \"some_field\" (since this should add \"some_field\" to the deferred set) the querysets qs.defer(\"field1\").defer(\"field2\") and qs.defer(\"field1\", \"field2\") should be equivalent IMHO, there is a mismatch between the doc and the actual implementation.\ncalls to .defer() cannot remove items from the deferred set and evaluating qs.defer(\"some_field\") should never fetch the column \"some_field\" (since this should add \"some_field\" to the deferred set) Feel-free to propose a docs clarification (see also #24048). the querysets qs.defer(\"field1\").defer(\"field2\") and qs.defer(\"field1\", \"field2\") should be equivalent That's why I accepted Company.objects.only(\"name\").defer(\"name\").defer(\"country\") as a bug.\nI think that what is described in the documentation is what users are expected and it is the implementation that should be fixed! With your patch proposal, i do not think that: Company.objects.only(\"name\").defer(\"name\").defer(\"country\") is equivalent to Company.objects.only(\"name\").defer(\"name\", \"country\")\nReplying to Manuel Baclet: I think that what is described in the documentation is what users are expected and it is the implementation that should be fixed! I don't agree, and there is no need to shout. As documented: \"The only() method is more or less the opposite of defer(). You call it with the fields that should not be deferred ...\", so .only('name').defer('name') should return all fields. You can start a discussion on DevelopersMailingList if you don't agree. With your patch proposal, i do not think that: Company.objects.only(\"name\").defer(\"name\").defer(\"country\") is equivalent to Company.objects.only(\"name\").defer(\"name\", \"country\") Did you check this? with proposed patch country is the only deferred fields in both cases. As far as I'm aware that's an intended behavior.\nWith the proposed patch, I think that: Company.objects.only(\"name\").defer(\"name\", \"country\") loads all fields whereas: Company.objects.only(\"name\").defer(\"name\").defer(\"country\") loads all fields except \"country\". Why is that? In the first case: existing.difference(field_names) == {\"name\"}.difference([\"name\", \"country\"]) == empty_set and we go into the if branch clearing all the deferred fields and we are done. In the second case: existing.difference(field_names) == {\"name\"}.difference([\"name\"]) == empty_set and we go into the if branch clearing all the deferred fields. Then we add \"country\" to the set of deferred fields.\nHey all, Replying to Mariusz Felisiak: Replying to Manuel Baclet: With your patch proposal, i do not think that: Company.objects.only(\"name\").defer(\"name\").defer(\"country\") is equivalent to Company.objects.only(\"name\").defer(\"name\", \"country\") Did you check this? with proposed patch country is the only deferred fields in both cases. As far as I'm aware that's an intended behavior. I believe Manuel is right. This happens because the set difference in one direction gives you the empty set that will clear out the deferred fields - but it is missing the fact that we might also be adding more defer fields than we had only fields in the first place, so that we actually switch from an .only() to a .defer() mode. See the corresponding PR that should fix this behaviour \u200bhttps://github.com/django/django/pull/14667",
  "created_at": "2021-07-19T21:08:03Z",
  "version": "4.0",
  "FAIL_TO_PASS": "[\"test_defer_only_chaining (defer.tests.DeferTests)\"]",
  "PASS_TO_PASS": "[\"Ensure select_related together with only on a proxy model behaves\", \"When an inherited model is fetched from the DB, its PK is also fetched.\", \"test_custom_refresh_on_deferred_loading (defer.tests.TestDefer2)\", \"test_defer (defer.tests.DeferTests)\", \"test_defer_baseclass_when_subclass_has_added_field (defer.tests.BigChildDeferTests)\", \"test_defer_baseclass_when_subclass_has_no_added_fields (defer.tests.DeferTests)\", \"test_defer_extra (defer.tests.DeferTests)\", \"test_defer_foreign_keys_are_deferred_and_not_traversed (defer.tests.DeferTests)\", \"test_defer_none_to_clear_deferred_set (defer.tests.DeferTests)\", \"test_defer_of_overridden_scalar (defer.tests.DeferTests)\", \"test_defer_on_an_already_deferred_field (defer.tests.DeferTests)\", \"test_defer_only_clear (defer.tests.DeferTests)\", \"test_defer_select_related_raises_invalid_query (defer.tests.DeferTests)\", \"test_defer_subclass (defer.tests.BigChildDeferTests)\", \"test_defer_subclass_both (defer.tests.BigChildDeferTests)\", \"test_defer_values_does_not_defer (defer.tests.DeferTests)\", \"test_defer_with_select_related (defer.tests.DeferTests)\", \"test_eq (defer.tests.TestDefer2)\", \"test_get (defer.tests.DeferTests)\", \"test_only (defer.tests.DeferTests)\", \"test_only_baseclass_when_subclass_has_added_field (defer.tests.BigChildDeferTests)\", \"test_only_baseclass_when_subclass_has_no_added_fields (defer.tests.DeferTests)\", \"test_only_none_raises_error (defer.tests.DeferTests)\", \"test_only_select_related_raises_invalid_query (defer.tests.DeferTests)\", \"test_only_subclass (defer.tests.BigChildDeferTests)\", \"test_only_values_does_not_defer (defer.tests.DeferTests)\", \"test_only_with_select_related (defer.tests.DeferTests)\", \"test_refresh_not_loading_deferred_fields (defer.tests.TestDefer2)\", \"test_saving_object_with_deferred_field (defer.tests.DeferTests)\"]",
  "environment_setup_commit": "475cffd1d64c690cdad16ede4d5e81985738ceb4",
  "patch_files": [
    "django/db/models/sql/query.py"
  ],
  "test_patch_files": [
    "tests/defer/tests.py"
  ],
  "patch_diff_details": {
    "django/db/models/sql/query.py": {
      "diffs": [
        {
          "start_line_old": 2089,
          "end_line_old": 2089,
          "file_pos": 2,
          "file_context_length": 39914,
          "closest_snippet_id": "/tmp/repos/django/django/db/models/sql/query.py_Query.deferred_to_data.8_Query.deferred_to_data.8.6.6.1",
          "closest_snippet_line_distance": 1339,
          "pos": 4,
          "context_length": 996
        }
      ]
    }
  },
  "vectors": 3564,
  "snippets": [
    {
      "position": 1,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet.only_QuerySet.only.8.1",
      "distance": 0.662624716758728,
      "file_path": "django/db/models/query.py",
      "start_line": 1227,
      "end_line": 1246,
      "tokens": 209,
      "context_length": 209
    },
    {
      "position": 2,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet.defer_QuerySet.defer.6.1",
      "distance": 0.6833370923995972,
      "file_path": "django/db/models/query.py",
      "start_line": 1210,
      "end_line": 1225,
      "tokens": 149,
      "context_length": 358
    },
    {
      "position": 3,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.deferred_to_data.8_Query.deferred_to_data.8.6.6.1",
      "distance": 0.8962123394012451,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 715,
      "end_line": 750,
      "tokens": 389,
      "context_length": 747,
      "file_pos": 2
    },
    {
      "position": 4,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.clear_deferred_loading_Query.add_deferred_loading.7.3.self.deferred_loading.1",
      "distance": 0.9051305055618286,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 2067,
      "end_line": 2089,
      "tokens": 249,
      "context_length": 996,
      "file_pos": 2
    },
    {
      "position": 5,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.get_loaded_field_names_Query.get_loaded_field_names.4.2.4.1",
      "distance": 0.9266186952590942,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 2115,
      "end_line": 2132,
      "tokens": 156,
      "context_length": 1152,
      "file_pos": 2
    },
    {
      "position": 6,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.deferred_to_data_Query.deferred_to_data.7.10.1",
      "distance": 0.9954679012298584,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 666,
      "end_line": 713,
      "tokens": 511,
      "context_length": 1663,
      "file_pos": 2
    },
    {
      "position": 7,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet._prefetch_related_objects_QuerySet.values.4.1",
      "distance": 1.0131521224975586,
      "file_path": "django/db/models/query.py",
      "start_line": 839,
      "end_line": 870,
      "tokens": 272,
      "context_length": 1935
    },
    {
      "position": 8,
      "id": "/tmp/repos/django/django/db/models/query_utils.py_DeferredAttribute_DeferredAttribute._check_parent_chain.5.1",
      "distance": 1.0216310024261475,
      "file_path": "django/db/models/query_utils.py",
      "start_line": 94,
      "end_line": 131,
      "tokens": 300,
      "context_length": 2235
    },
    {
      "position": 9,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.set_values_Query.set_values.9",
      "distance": 1.0429000854492188,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 2161,
      "end_line": 2208,
      "tokens": 394,
      "context_length": 2629,
      "file_pos": 3
    },
    {
      "position": 10,
      "id": "/tmp/repos/django/django/db/models/query.py_Prefetch_Prefetch.__hash__.1.1",
      "distance": 1.0705152750015259,
      "file_path": "django/db/models/query.py",
      "start_line": 1600,
      "end_line": 1656,
      "tokens": 481,
      "context_length": 3110
    },
    {
      "position": 11,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.add_immediate_loading_Query.add_immediate_loading.5.4.self.deferred_loading.1",
      "distance": 1.0809574127197266,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 2091,
      "end_line": 2113,
      "tokens": 229,
      "context_length": 3339,
      "file_pos": 3
    },
    {
      "position": 12,
      "id": "/tmp/repos/django/django/db/models/fields/related_descriptors.py_ForwardManyToOneDescriptor.get_prefetch_queryset_ForwardManyToOneDescriptor.get_object.3.1",
      "distance": 1.090281367301941,
      "file_path": "django/db/models/fields/related_descriptors.py",
      "start_line": 120,
      "end_line": 154,
      "tokens": 405,
      "context_length": 3744
    },
    {
      "position": 13,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.get_loaded_field_names_cb_Query.set_extra_mask.self._extra_select_cache.1",
      "distance": 1.0963478088378906,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 2134,
      "end_line": 2159,
      "tokens": 214,
      "context_length": 3958,
      "file_pos": 4
    },
    {
      "position": 14,
      "id": "/tmp/repos/django/django/db/models/query.py_prefetch_one_level.29_prefetch_one_level.30.1",
      "distance": 1.1326463222503662,
      "file_path": "django/db/models/query.py",
      "start_line": 1925,
      "end_line": 1957,
      "tokens": 314,
      "context_length": 4272
    },
    {
      "position": 15,
      "id": "/tmp/repos/django/django/db/models/query.py_prefetch_related_objects.13_prefetch_related_objects.13.7.2.18.8.new_obj_list.obj_list.1",
      "distance": 1.1337018013000488,
      "file_path": "django/db/models/query.py",
      "start_line": 1688,
      "end_line": 1803,
      "tokens": 1098,
      "context_length": 5370
    },
    {
      "position": 16,
      "id": "/tmp/repos/django/django/db/models/base.py_Model._get_pk_val_Model.get_deferred_fields.2.1",
      "distance": 1.1379475593566895,
      "file_path": "django/db/models/base.py",
      "start_line": 577,
      "end_line": 596,
      "tokens": 170,
      "context_length": 5540
    },
    {
      "position": 17,
      "id": "/tmp/repos/django/django/db/models/__init__.py_1_",
      "distance": 1.1478859186172485,
      "file_path": "django/db/models/__init__.py",
      "start_line": 1,
      "end_line": 53,
      "tokens": 619,
      "context_length": 6159
    },
    {
      "position": 18,
      "id": "/tmp/repos/django/django/db/models/fields/related_descriptors.py_ReverseOneToOneDescriptor.get_prefetch_queryset_ReverseOneToOneDescriptor.get_prefetch_queryset.11.1",
      "distance": 1.1513751745224,
      "file_path": "django/db/models/fields/related_descriptors.py",
      "start_line": 365,
      "end_line": 381,
      "tokens": 184,
      "context_length": 6343
    },
    {
      "position": 19,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.names_to_path.3_Query.names_to_path.4.1",
      "distance": 1.1543482542037964,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1472,
      "end_line": 1557,
      "tokens": 801,
      "context_length": 7144,
      "file_pos": 6
    },
    {
      "position": 20,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.clear_limits_Query.add_distinct_fields.self.distinct.1",
      "distance": 1.1556483507156372,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1843,
      "end_line": 1892,
      "tokens": 329,
      "context_length": 7473,
      "file_pos": 6
    },
    {
      "position": 21,
      "id": "/tmp/repos/django/django/db/models/sql/where.py_SubqueryConstraint_",
      "distance": 1.1724505424499512,
      "file_path": "django/db/models/sql/where.py",
      "start_line": 252,
      "end_line": 269,
      "tokens": 141,
      "context_length": 7614
    },
    {
      "position": 22,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet_QuerySet.__getstate__.2",
      "distance": 1.1732702255249023,
      "file_path": "django/db/models/query.py",
      "start_line": 175,
      "end_line": 234,
      "tokens": 469,
      "context_length": 8083
    },
    {
      "position": 23,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.resolve_ref_Query.resolve_ref.2.3.12.1",
      "distance": 1.1767661571502686,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1701,
      "end_line": 1743,
      "tokens": 436,
      "context_length": 8519,
      "file_pos": 7
    },
    {
      "position": 24,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet.prefetch_related_QuerySet.prefetch_related.5.1",
      "distance": 1.1773760318756104,
      "file_path": "django/db/models/query.py",
      "start_line": 1091,
      "end_line": 1112,
      "tokens": 214,
      "context_length": 8733
    },
    {
      "position": 25,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler.ordering_parts.deferred_to_columns_SQLCompiler.ordering_parts.apply_converters.3.2",
      "distance": 1.1793237924575806,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 1118,
      "end_line": 1147,
      "tokens": 253,
      "context_length": 8986
    },
    {
      "position": 26,
      "id": "/tmp/repos/django/django/core/serializers/base.py_DeserializedObject.save_deferred_fields_DeserializedObject.save_deferred_fields.3",
      "distance": 1.1813371181488037,
      "file_path": "django/core/serializers/base.py",
      "start_line": 232,
      "end_line": 249,
      "tokens": 208,
      "context_length": 9194
    },
    {
      "position": 27,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler.ordering_parts._order_by_pairs_SQLCompiler.ordering_parts._order_by_pairs.3.8.2.1.4.3",
      "distance": 1.1832959651947021,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 276,
      "end_line": 371,
      "tokens": 710,
      "context_length": 9904
    },
    {
      "position": 28,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.set_group_by_Query.add_select_related.self.select_related.1",
      "distance": 1.1928834915161133,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1988,
      "end_line": 2033,
      "tokens": 356,
      "context_length": 10260,
      "file_pos": 9
    },
    {
      "position": 29,
      "id": "/tmp/repos/django/django/db/models/fields/related_descriptors.py_1_ForeignKeyDeferredAttribute.__set__.2",
      "distance": 1.1931354999542236,
      "file_path": "django/db/models/fields/related_descriptors.py",
      "start_line": 1,
      "end_line": 79,
      "tokens": 683,
      "context_length": 10943
    },
    {
      "position": 30,
      "id": "/tmp/repos/django/django/db/models/query.py_RawQuerySet.prefetch_related_RawQuerySet.__iter__.2.1",
      "distance": 1.1958789825439453,
      "file_path": "django/db/models/query.py",
      "start_line": 1476,
      "end_line": 1514,
      "tokens": 308,
      "context_length": 11251
    },
    {
      "position": 31,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet.values_list_QuerySet.values_list.10.1",
      "distance": 1.1993122100830078,
      "file_path": "django/db/models/query.py",
      "start_line": 872,
      "end_line": 901,
      "tokens": 248,
      "context_length": 11499
    },
    {
      "position": 32,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.setup_joins.16_Query.setup_joins.17.1",
      "distance": 1.2005693912506104,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1633,
      "end_line": 1654,
      "tokens": 200,
      "context_length": 11699,
      "file_pos": 9
    },
    {
      "position": 33,
      "id": "/tmp/repos/django/django/db/models/base.py_copy_DEFERRED.1",
      "distance": 1.2034612894058228,
      "file_path": "django/db/models/base.py",
      "start_line": 1,
      "end_line": 50,
      "tokens": 328,
      "context_length": 12027
    },
    {
      "position": 34,
      "id": "/tmp/repos/django/django/db/models/query.py_get_prefetcher_get_prefetcher.10.1",
      "distance": 1.2037444114685059,
      "file_path": "django/db/models/query.py",
      "start_line": 1806,
      "end_line": 1857,
      "tokens": 480,
      "context_length": 12507
    },
    {
      "position": 35,
      "id": "/tmp/repos/django/django/db/models/aggregates.py_Aggregate.resolve_expression_Aggregate.resolve_expression.c.8.1",
      "distance": 1.2047126293182373,
      "file_path": "django/db/models/aggregates.py",
      "start_line": 50,
      "end_line": 68,
      "tokens": 278,
      "context_length": 12785
    },
    {
      "position": 36,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet.update.alters_data_QuerySet.exists.2.1",
      "distance": 1.2056543827056885,
      "file_path": "django/db/models/query.py",
      "start_line": 793,
      "end_line": 816,
      "tokens": 207,
      "context_length": 12992
    },
    {
      "position": 37,
      "id": "/tmp/repos/django/django/db/models/query.py_prefetch_one_level_prefetch_one_level.leaf.1",
      "distance": 1.2098283767700195,
      "file_path": "django/db/models/query.py",
      "start_line": 1860,
      "end_line": 1923,
      "tokens": 658,
      "context_length": 13650
    },
    {
      "position": 38,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.add_fields_Query.add_fields.4.5.1.5.2",
      "distance": 1.2110068798065186,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1894,
      "end_line": 1935,
      "tokens": 355,
      "context_length": 14005,
      "file_pos": 10
    },
    {
      "position": 39,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler_SQLCompiler.ordering_parts.setup_query.self.col_count.1",
      "distance": 1.211167573928833,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 23,
      "end_line": 51,
      "tokens": 302,
      "context_length": 14307
    },
    {
      "position": 40,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet.__class_getitem___QuerySet.__or__.9.1",
      "distance": 1.2126052379608154,
      "file_path": "django/db/models/query.py",
      "start_line": 324,
      "end_line": 350,
      "tokens": 222,
      "context_length": 14529
    },
    {
      "position": 41,
      "id": "/tmp/repos/django/django/db/models/base.py_35_",
      "distance": 1.213350772857666,
      "file_path": "django/db/models/base.py",
      "start_line": 2127,
      "end_line": 2178,
      "tokens": 351,
      "context_length": 14880
    },
    {
      "position": 42,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.build_filter.18_Query.build_filter.30.1",
      "distance": 1.2138621807098389,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1295,
      "end_line": 1359,
      "tokens": 761,
      "context_length": 15641,
      "file_pos": 10
    },
    {
      "position": 43,
      "id": "/tmp/repos/django/django/db/models/fields/related.py_RelatedField._check_related_query_name_is_valid_RelatedField._check_related_query_name_is_valid.6.1",
      "distance": 1.2168121337890625,
      "file_path": "django/db/models/fields/related.py",
      "start_line": 139,
      "end_line": 166,
      "tokens": 201,
      "context_length": 15842
    },
    {
      "position": 44,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet._fetch_all_QuerySet._next_is_sticky.3.1",
      "distance": 1.2184317111968994,
      "file_path": "django/db/models/query.py",
      "start_line": 1351,
      "end_line": 1369,
      "tokens": 186,
      "context_length": 16028
    },
    {
      "position": 45,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler.ordering_parts.get_distinct_SQLCompiler.ordering_parts.get_distinct.6.1",
      "distance": 1.2198104858398438,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 729,
      "end_line": 751,
      "tokens": 202,
      "context_length": 16230
    },
    {
      "position": 46,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.clear_ordering_Query.clear_ordering.5.self.default_ordering.1",
      "distance": 1.223366379737854,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1974,
      "end_line": 1986,
      "tokens": 129,
      "context_length": 16359,
      "file_pos": 11
    },
    {
      "position": 47,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler.ordering_parts.get_related_selections.13_SQLCompiler.ordering_parts.get_related_selections.14.1",
      "distance": 1.2246592044830322,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 923,
      "end_line": 1015,
      "tokens": 839,
      "context_length": 17198
    },
    {
      "position": 48,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet._combinator_query_QuerySet.union.2.5.1",
      "distance": 1.2269642353057861,
      "file_path": "django/db/models/query.py",
      "start_line": 1016,
      "end_line": 1036,
      "tokens": 240,
      "context_length": 17438
    },
    {
      "position": 49,
      "id": "/tmp/repos/django/django/db/models/fields/related_lookups.py_RelatedIn.as_sql_RelatedIn.as_sql.1.5.2.1",
      "distance": 1.2273350954055786,
      "file_path": "django/db/models/fields/related_lookups.py",
      "start_line": 65,
      "end_line": 104,
      "tokens": 451,
      "context_length": 17889
    },
    {
      "position": 50,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler.ordering_parts.get_combinator_sql_SQLCompiler.ordering_parts.get_combinator_sql.14.1",
      "distance": 1.22806715965271,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 462,
      "end_line": 515,
      "tokens": 569,
      "context_length": 18458
    },
    {
      "position": 51,
      "id": "/tmp/repos/django/django/db/models/aggregates.py_Aggregate.default_alias_Aggregate._get_repr_options.4.1",
      "distance": 1.2300974130630493,
      "file_path": "django/db/models/aggregates.py",
      "start_line": 70,
      "end_line": 106,
      "tokens": 349,
      "context_length": 18807
    },
    {
      "position": 52,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler.ordering_parts.get_select_for_update_of_arguments.result_SQLCompiler.ordering_parts.get_select_for_update_of_arguments.9.1",
      "distance": 1.231243371963501,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 1076,
      "end_line": 1116,
      "tokens": 337,
      "context_length": 19144
    },
    {
      "position": 53,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLUpdateCompiler.pre_sql_setup_SQLUpdateCompiler.pre_sql_setup.19",
      "distance": 1.2317826747894287,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 1602,
      "end_line": 1642,
      "tokens": 410,
      "context_length": 19554
    },
    {
      "position": 54,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet._annotate_QuerySet._annotate.10.1",
      "distance": 1.2324212789535522,
      "file_path": "django/db/models/query.py",
      "start_line": 1129,
      "end_line": 1170,
      "tokens": 323,
      "context_length": 19877
    },
    {
      "position": 55,
      "id": "/tmp/repos/django/django/contrib/contenttypes/fields.py_GenericForeignKey.get_prefetch_queryset_GenericForeignKey.get_prefetch_queryset.14.1",
      "distance": 1.2324693202972412,
      "file_path": "django/contrib/contenttypes/fields.py",
      "start_line": 173,
      "end_line": 217,
      "tokens": 411,
      "context_length": 20288
    },
    {
      "position": 56,
      "id": "/tmp/repos/django/django/db/migrations/autodetector.py_MigrationAutodetector.only_relation_agnostic_fields_MigrationAutodetector.only_relation_agnostic_fields.4.1",
      "distance": 1.2326421737670898,
      "file_path": "django/db/migrations/autodetector.py",
      "start_line": 89,
      "end_line": 101,
      "tokens": 116,
      "context_length": 20404
    },
    {
      "position": 57,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.get_external_cols_Query.as_sql.3.4.1",
      "distance": 1.2340655326843262,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1056,
      "end_line": 1074,
      "tokens": 162,
      "context_length": 20566,
      "file_pos": 14
    },
    {
      "position": 58,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_collections_17",
      "distance": 1.2356200218200684,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 1,
      "end_line": 20,
      "tokens": 173,
      "context_length": 20739
    },
    {
      "position": 59,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet.__setstate___QuerySet.__len__.2.1",
      "distance": 1.238539457321167,
      "file_path": "django/db/models/query.py",
      "start_line": 236,
      "end_line": 263,
      "tokens": 221,
      "context_length": 20960
    },
    {
      "position": 60,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_1_JoinInfo.1",
      "distance": 1.239060878753662,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1,
      "end_line": 62,
      "tokens": 450,
      "context_length": 21410,
      "file_pos": 14
    },
    {
      "position": 61,
      "id": "/tmp/repos/django/django/db/models/query.py_RawQuerySet.iterator_RawQuerySet.iterator.db.4.8.2.1",
      "distance": 1.239246129989624,
      "file_path": "django/db/models/query.py",
      "start_line": 1516,
      "end_line": 1549,
      "tokens": 297,
      "context_length": 21707
    },
    {
      "position": 62,
      "id": "/tmp/repos/django/django/db/backends/mysql/features.py_DatabaseFeatures.django_test_skips_DatabaseFeatures.django_test_skips.7.1",
      "distance": 1.2426645755767822,
      "file_path": "django/db/backends/mysql/features.py",
      "start_line": 63,
      "end_line": 126,
      "tokens": 640,
      "context_length": 22347
    },
    {
      "position": 63,
      "id": "/tmp/repos/django/django/db/models/fields/related.py_RelatedField.formfield_RelatedField.formfield.5.1",
      "distance": 1.2428977489471436,
      "file_path": "django/db/models/fields/related.py",
      "start_line": 413,
      "end_line": 431,
      "tokens": 165,
      "context_length": 22512
    },
    {
      "position": 64,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler.ordering_parts.get_select_for_update_of_arguments._get_field_choices_SQLCompiler.ordering_parts.get_select_for_update_of_arguments._get_field_choices.3.4",
      "distance": 1.2432794570922852,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 1054,
      "end_line": 1075,
      "tokens": 199,
      "context_length": 22711
    },
    {
      "position": 65,
      "id": "/tmp/repos/django/django/db/models/fields/__init__.py_Field._check_deprecation_details_Field._check_deprecation_details.2.1",
      "distance": 1.2457847595214844,
      "file_path": "django/db/models/fields/__init__.py",
      "start_line": 366,
      "end_line": 392,
      "tokens": 199,
      "context_length": 22910
    },
    {
      "position": 66,
      "id": "/tmp/repos/django/django/db/models/fields/related.py_ManyToManyField._check_relationship_model_ManyToManyField._check_relationship_model.3.3.9.3.seen_from.5.1",
      "distance": 1.2484954595565796,
      "file_path": "django/db/models/fields/related.py",
      "start_line": 1263,
      "end_line": 1380,
      "tokens": 963,
      "context_length": 23873
    },
    {
      "position": 67,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query_Query.__init__.self.explain_options.1",
      "distance": 1.2506541013717651,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 139,
      "end_line": 233,
      "tokens": 833,
      "context_length": 24706,
      "file_pos": 16
    },
    {
      "position": 68,
      "id": "/tmp/repos/django/django/db/backends/sqlite3/operations.py_DatabaseOperations._quote_params_for_last_executed_query_DatabaseOperations._quote_params_for_last_executed_query.14.2.1",
      "distance": 1.2508270740509033,
      "file_path": "django/db/backends/sqlite3/operations.py",
      "start_line": 135,
      "end_line": 160,
      "tokens": 279,
      "context_length": 24985
    },
    {
      "position": 69,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet.using_QuerySet.ordered.3.3.1.1",
      "distance": 1.25225830078125,
      "file_path": "django/db/models/query.py",
      "start_line": 1248,
      "end_line": 1276,
      "tokens": 183,
      "context_length": 25168
    },
    {
      "position": 70,
      "id": "/tmp/repos/django/django/db/models/sql/subqueries.py_InsertQuery_",
      "distance": 1.2534370422363281,
      "file_path": "django/db/models/sql/subqueries.py",
      "start_line": 137,
      "end_line": 163,
      "tokens": 161,
      "context_length": 25329
    },
    {
      "position": 71,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet.__iter___QuerySet.__bool__.2.1",
      "distance": 1.2539111375808716,
      "file_path": "django/db/models/query.py",
      "start_line": 265,
      "end_line": 285,
      "tokens": 180,
      "context_length": 25509
    },
    {
      "position": 72,
      "id": "/tmp/repos/django/django/db/models/query.py_RawQuerySet.resolve_model_init_order_RawQuerySet.resolve_model_init_order.7.1",
      "distance": 1.2548198699951172,
      "file_path": "django/db/models/query.py",
      "start_line": 1466,
      "end_line": 1474,
      "tokens": 136,
      "context_length": 25645
    },
    {
      "position": 73,
      "id": "/tmp/repos/django/django/db/models/deletion.py_operator_get_candidate_relations_to_delete.3.1",
      "distance": 1.2557849884033203,
      "file_path": "django/db/models/deletion.py",
      "start_line": 1,
      "end_line": 76,
      "tokens": 566,
      "context_length": 26211
    },
    {
      "position": 74,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet.none_QuerySet._filter_or_exclude_inplace.1.2.1",
      "distance": 1.2561595439910889,
      "file_path": "django/db/models/query.py",
      "start_line": 949,
      "end_line": 997,
      "tokens": 371,
      "context_length": 26582
    },
    {
      "position": 75,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler.ordering_parts.as_subquery_condition_SQLCompiler.ordering_parts.explain_query.5.1.2.1",
      "distance": 1.2609034776687622,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 1233,
      "end_line": 1255,
      "tokens": 243,
      "context_length": 26825
    },
    {
      "position": 76,
      "id": "/tmp/repos/django/django/db/backends/base/features.py_1_BaseDatabaseFeatures.82",
      "distance": 1.2617355585098267,
      "file_path": "django/db/backends/base/features.py",
      "start_line": 1,
      "end_line": 112,
      "tokens": 895,
      "context_length": 27720
    },
    {
      "position": 77,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet.earliest_QuerySet.last.2.1.1",
      "distance": 1.2652229070663452,
      "file_path": "django/db/models/query.py",
      "start_line": 670,
      "end_line": 688,
      "tokens": 178,
      "context_length": 27898
    },
    {
      "position": 78,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler.ordering_parts.get_extra_select_SQLCompiler.ordering_parts.get_extra_select.3.1",
      "distance": 1.26583993434906,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 427,
      "end_line": 435,
      "tokens": 133,
      "context_length": 28031
    },
    {
      "position": 79,
      "id": "/tmp/repos/django/django/db/models/sql/subqueries.py_1_DeleteQuery.delete_batch.6.1",
      "distance": 1.266126036643982,
      "file_path": "django/db/models/sql/subqueries.py",
      "start_line": 1,
      "end_line": 44,
      "tokens": 320,
      "context_length": 28351
    },
    {
      "position": 80,
      "id": "/tmp/repos/django/django/db/models/fields/related_lookups.py_RelatedLookupMixin.as_sql_",
      "distance": 1.2672137022018433,
      "file_path": "django/db/models/fields/related_lookups.py",
      "start_line": 124,
      "end_line": 160,
      "tokens": 244,
      "context_length": 28595
    },
    {
      "position": 81,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.rewrite_cols_Query.rewrite_cols.orig_exprs.5.1",
      "distance": 1.267561674118042,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 367,
      "end_line": 417,
      "tokens": 494,
      "context_length": 29089,
      "file_pos": 20
    },
    {
      "position": 82,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet.select_related_QuerySet.select_related.6.1",
      "distance": 1.2688785791397095,
      "file_path": "django/db/models/query.py",
      "start_line": 1069,
      "end_line": 1089,
      "tokens": 155,
      "context_length": 29244
    },
    {
      "position": 83,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler.ordering_parts._setup_joins_SQLCompiler.ordering_parts._setup_joins.5.1",
      "distance": 1.2689024209976196,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 794,
      "end_line": 805,
      "tokens": 163,
      "context_length": 29407
    },
    {
      "position": 84,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler.ordering_parts.collapse_group_by_SQLCompiler.ordering_parts.collapse_group_by.5.4.1",
      "distance": 1.269545555114746,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 154,
      "end_line": 202,
      "tokens": 523,
      "context_length": 29930
    },
    {
      "position": 85,
      "id": "/tmp/repos/django/django/db/models/fields/related.py_ManyToManyField._check_ignored_options_ManyToManyField._check_ignored_options.5.1",
      "distance": 1.2705587148666382,
      "file_path": "django/db/models/fields/related.py",
      "start_line": 1230,
      "end_line": 1261,
      "tokens": 180,
      "context_length": 30110
    },
    {
      "position": 86,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.set_empty_Query.set_limits.4.1",
      "distance": 1.271629810333252,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1812,
      "end_line": 1841,
      "tokens": 259,
      "context_length": 30369,
      "file_pos": 20
    },
    {
      "position": 87,
      "id": "/tmp/repos/django/django/db/models/lookups.py_In_In.process_rhs.3.3.3.1",
      "distance": 1.2720036506652832,
      "file_path": "django/db/models/lookups.py",
      "start_line": 387,
      "end_line": 426,
      "tokens": 329,
      "context_length": 30698
    },
    {
      "position": 88,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet.delete.alters_data_QuerySet.update.11.1",
      "distance": 1.2721222639083862,
      "file_path": "django/db/models/query.py",
      "start_line": 759,
      "end_line": 792,
      "tokens": 274,
      "context_length": 30972
    },
    {
      "position": 89,
      "id": "/tmp/repos/django/django/db/models/fields/related.py_ForeignObject._check_unique_target_ForeignObject._check_unique_target.10.5.1.1",
      "distance": 1.2745087146759033,
      "file_path": "django/db/models/fields/related.py",
      "start_line": 527,
      "end_line": 592,
      "tokens": 492,
      "context_length": 31464
    },
    {
      "position": 90,
      "id": "/tmp/repos/django/django/contrib/admin/filters.py_24_RelatedOnlyFieldListFilter.field_choices.3.1",
      "distance": 1.274726390838623,
      "file_path": "django/contrib/admin/filters.py",
      "start_line": 424,
      "end_line": 431,
      "tokens": 107,
      "context_length": 31571
    },
    {
      "position": 91,
      "id": "/tmp/repos/django/django/db/backends/base/schema.py_BaseDatabaseSchemaEditor._unique_sql_BaseDatabaseSchemaEditor._unique_sql.4.1",
      "distance": 1.275192379951477,
      "file_path": "django/db/backends/base/schema.py",
      "start_line": 1199,
      "end_line": 1230,
      "tokens": 233,
      "context_length": 31804
    },
    {
      "position": 92,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.add_filtered_relation_Query.add_filtered_relation.6",
      "distance": 1.275223731994629,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1427,
      "end_line": 1454,
      "tokens": 283,
      "context_length": 32087,
      "file_pos": 23
    },
    {
      "position": 93,
      "id": "/tmp/repos/django/django/db/models/fields/related_descriptors.py_ReverseOneToOneDescriptor.RelatedObjectDoesNotExist_ReverseOneToOneDescriptor.get_queryset.1.1",
      "distance": 1.2760926485061646,
      "file_path": "django/db/models/fields/related_descriptors.py",
      "start_line": 344,
      "end_line": 363,
      "tokens": 156,
      "context_length": 32243
    },
    {
      "position": 94,
      "id": "/tmp/repos/django/django/db/models/fields/reverse_related.py_ForeignObjectRel.is_hidden_ForeignObjectRel.set_field_name.self.field_name.1",
      "distance": 1.2762117385864258,
      "file_path": "django/db/models/fields/reverse_related.py",
      "start_line": 160,
      "end_line": 178,
      "tokens": 172,
      "context_length": 32415
    },
    {
      "position": 95,
      "id": "/tmp/repos/django/django/db/backends/base/operations.py_BaseDatabaseOperations.time_extract_sql_BaseDatabaseOperations.limit_offset_sql.3.1",
      "distance": 1.2763097286224365,
      "file_path": "django/db/backends/base/operations.py",
      "start_line": 155,
      "end_line": 228,
      "tokens": 615,
      "context_length": 33030
    },
    {
      "position": 96,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.combine.42_Query.combine.self.extra_order_by.1",
      "distance": 1.2782458066940308,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 639,
      "end_line": 664,
      "tokens": 277,
      "context_length": 33307,
      "file_pos": 25
    },
    {
      "position": 97,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet.order_by_QuerySet.reverse.5.1",
      "distance": 1.2794547080993652,
      "file_path": "django/db/models/query.py",
      "start_line": 1172,
      "end_line": 1208,
      "tokens": 327,
      "context_length": 33634
    },
    {
      "position": 98,
      "id": "/tmp/repos/django/django/db/models/options.py_Options._forward_fields_map_Options.fields_map.4.1",
      "distance": 1.2798008918762207,
      "file_path": "django/db/models/options.py",
      "start_line": 557,
      "end_line": 585,
      "tokens": 231,
      "context_length": 33865
    },
    {
      "position": 99,
      "id": "/tmp/repos/django/django/db/models/fields/related.py_RelatedField.db_type_RelatedField.contribute_to_class.3.5",
      "distance": 1.2798775434494019,
      "file_path": "django/db/models/fields/related.py",
      "start_line": 296,
      "end_line": 330,
      "tokens": 293,
      "context_length": 34158
    },
    {
      "position": 100,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.bump_prefix.3_Query.bump_prefix.12",
      "distance": 1.2809582948684692,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 911,
      "end_line": 933,
      "tokens": 248,
      "context_length": 34406,
      "file_pos": 26
    },
    {
      "position": 101,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.split_exclude_Query.split_exclude.21.1",
      "distance": 1.2817856073379517,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1745,
      "end_line": 1810,
      "tokens": 667,
      "context_length": 35073,
      "file_pos": 26
    },
    {
      "position": 102,
      "id": "/tmp/repos/django/django/db/models/query_utils.py_select_related_descend_select_related_descend.7.1",
      "distance": 1.2821407318115234,
      "file_path": "django/db/models/query_utils.py",
      "start_line": 201,
      "end_line": 235,
      "tokens": 303,
      "context_length": 35376
    },
    {
      "position": 103,
      "id": "/tmp/repos/django/django/db/models/fields/related.py_ForeignObject.get_extra_restriction_ForeignObject.get_extra_restriction.2.1",
      "distance": 1.2836248874664307,
      "file_path": "django/db/models/fields/related.py",
      "start_line": 714,
      "end_line": 726,
      "tokens": 116,
      "context_length": 35492
    },
    {
      "position": 104,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet.delete_QuerySet.delete.20.1",
      "distance": 1.2850558757781982,
      "file_path": "django/db/models/query.py",
      "start_line": 729,
      "end_line": 757,
      "tokens": 261,
      "context_length": 35753
    },
    {
      "position": 105,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.is_nullable_Query.is_nullable.7.1",
      "distance": 1.2853410243988037,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 2318,
      "end_line": 2334,
      "tokens": 177,
      "context_length": 35930,
      "file_pos": 26
    },
    {
      "position": 106,
      "id": "/tmp/repos/django/django/db/models/base.py_Model._check_field_name_clashes_Model._check_field_name_clashes.12.1",
      "distance": 1.2854870557785034,
      "file_path": "django/db/models/base.py",
      "start_line": 1440,
      "end_line": 1495,
      "tokens": 491,
      "context_length": 36421
    },
    {
      "position": 107,
      "id": "/tmp/repos/django/django/db/models/query.py_normalize_prefetch_lookups_prefetch_related_objects.all_lookups.1",
      "distance": 1.2856895923614502,
      "file_path": "django/db/models/query.py",
      "start_line": 1659,
      "end_line": 1687,
      "tokens": 246,
      "context_length": 36667
    },
    {
      "position": 108,
      "id": "/tmp/repos/django/django/db/backends/oracle/features.py_1_",
      "distance": 1.2861318588256836,
      "file_path": "django/db/backends/oracle/features.py",
      "start_line": 1,
      "end_line": 120,
      "tokens": 1015,
      "context_length": 37682
    },
    {
      "position": 109,
      "id": "/tmp/repos/django/django/db/models/deletion.py_Collector.collect.11_Collector.collect.15.3.3.3.1",
      "distance": 1.2877907752990723,
      "file_path": "django/db/models/deletion.py",
      "start_line": 269,
      "end_line": 344,
      "tokens": 800,
      "context_length": 38482
    },
    {
      "position": 110,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.annotation_select_Query.extra_select.2.3.1.1",
      "distance": 1.288792371749878,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 2210,
      "end_line": 2242,
      "tokens": 228,
      "context_length": 38710,
      "file_pos": 27
    },
    {
      "position": 111,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet._merge_known_related_objects_QuerySet._not_support_combined_queries.1.1",
      "distance": 1.2897611856460571,
      "file_path": "django/db/models/query.py",
      "start_line": 1382,
      "end_line": 1430,
      "tokens": 405,
      "context_length": 39115
    },
    {
      "position": 112,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.resolve_lookup_value_Query.resolve_lookup_value.2.1",
      "distance": 1.2903554439544678,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1076,
      "end_line": 1092,
      "tokens": 152,
      "context_length": 39267,
      "file_pos": 27
    },
    {
      "position": 113,
      "id": "/tmp/repos/django/django/db/models/expressions.py_When_When.get_group_by_cols.cols.3.1",
      "distance": 1.2928258180618286,
      "file_path": "django/db/models/expressions.py",
      "start_line": 962,
      "end_line": 1026,
      "tokens": 591,
      "context_length": 39858
    }
  ],
  "files": [
    {
      "file_path": "django/db/models/query.py",
      "position": 1,
      "tokens": 17575,
      "context_length": 17575
    },
    {
      "file_path": "django/db/models/sql/query.py",
      "position": 2,
      "tokens": 22339,
      "context_length": 39914
    },
    {
      "file_path": "django/db/models/query_utils.py",
      "position": 3,
      "tokens": 2488,
      "context_length": 42402
    },
    {
      "file_path": "django/db/models/fields/related_descriptors.py",
      "position": 4,
      "tokens": 10397,
      "context_length": 52799
    },
    {
      "file_path": "django/db/models/base.py",
      "position": 5,
      "tokens": 17324,
      "context_length": 70123
    },
    {
      "file_path": "django/db/models/__init__.py",
      "position": 6,
      "tokens": 619,
      "context_length": 70742
    },
    {
      "file_path": "django/db/models/sql/where.py",
      "position": 7,
      "tokens": 1976,
      "context_length": 72718
    },
    {
      "file_path": "django/db/models/sql/compiler.py",
      "position": 8,
      "tokens": 14763,
      "context_length": 87481
    },
    {
      "file_path": "django/core/serializers/base.py",
      "position": 9,
      "tokens": 2426,
      "context_length": 89907
    },
    {
      "file_path": "django/db/models/aggregates.py",
      "position": 10,
      "tokens": 1415,
      "context_length": 91322
    },
    {
      "file_path": "django/db/models/fields/related.py",
      "position": 11,
      "tokens": 13980,
      "context_length": 105302
    },
    {
      "file_path": "django/db/models/fields/related_lookups.py",
      "position": 12,
      "tokens": 1469,
      "context_length": 106771
    },
    {
      "file_path": "django/contrib/contenttypes/fields.py",
      "position": 13,
      "tokens": 5451,
      "context_length": 112222
    },
    {
      "file_path": "django/db/migrations/autodetector.py",
      "position": 14,
      "tokens": 11580,
      "context_length": 123802
    },
    {
      "file_path": "django/db/backends/mysql/features.py",
      "position": 15,
      "tokens": 2242,
      "context_length": 126044
    },
    {
      "file_path": "django/db/models/fields/__init__.py",
      "position": 16,
      "tokens": 18359,
      "context_length": 144403
    },
    {
      "file_path": "django/db/backends/sqlite3/operations.py",
      "position": 17,
      "tokens": 3272,
      "context_length": 147675
    },
    {
      "file_path": "django/db/models/sql/subqueries.py",
      "position": 18,
      "tokens": 1201,
      "context_length": 148876
    },
    {
      "file_path": "django/db/models/deletion.py",
      "position": 19,
      "tokens": 3828,
      "context_length": 152704
    },
    {
      "file_path": "django/db/backends/base/features.py",
      "position": 20,
      "tokens": 2986,
      "context_length": 155690
    },
    {
      "file_path": "django/db/models/lookups.py",
      "position": 21,
      "tokens": 5339,
      "context_length": 161029
    },
    {
      "file_path": "django/contrib/admin/filters.py",
      "position": 22,
      "tokens": 4123,
      "context_length": 165152
    },
    {
      "file_path": "django/db/backends/base/schema.py",
      "position": 23,
      "tokens": 12823,
      "context_length": 177975
    },
    {
      "file_path": "django/db/models/fields/reverse_related.py",
      "position": 24,
      "tokens": 2322,
      "context_length": 180297
    },
    {
      "file_path": "django/db/backends/base/operations.py",
      "position": 25,
      "tokens": 5762,
      "context_length": 186059
    },
    {
      "file_path": "django/db/models/options.py",
      "position": 26,
      "tokens": 7367,
      "context_length": 193426
    },
    {
      "file_path": "django/db/backends/oracle/features.py",
      "position": 27,
      "tokens": 1016,
      "context_length": 194442
    },
    {
      "file_path": "django/db/models/expressions.py",
      "position": 28,
      "tokens": 11111,
      "context_length": 205553
    }
  ]
}