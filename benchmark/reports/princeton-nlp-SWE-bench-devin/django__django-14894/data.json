{
  "instance_id": "django__django-14894",
  "model_patch": "diff --git a/django/db/models/expressions.py b/django/db/models/expressions.py\nindex 9381257bb2..816763f90d 100644\n--- a/django/db/models/expressions.py\n+++ b/django/db/models/expressions.py\n@@ -1147,7 +1147,12 @@ class Subquery(BaseExpression, Combinable):\n         template_params = {**self.extra, **extra_context}\n         query = query or self.query\n         subquery_sql, sql_params = query.as_sql(compiler, connection)\n-        template_params['subquery'] = subquery_sql[1:-1]\n+        # If the subquery is empty, the SQL string should be NULL to allow\n+        # coalescing to work with the subquery.\n+        if not sql_params:\n+            subquery_sql = 'NULL'\n+        else:\n+            template_params['subquery'] = subquery_sql[1:-1]\n \n         template = template or template_params.get('template', self.template)\n         sql = template % template_params\n",
  "model_name_or_path": "Devin",
  "pass_or_fail": "fail",
  "model_patch_files": [
    "django/db/models/expressions.py"
  ],
  "repo": "django/django",
  "base_commit": "9466fd78420a851460c92673dad50a5737c75b12",
  "patch": "diff --git a/django/contrib/postgres/aggregates/statistics.py b/django/contrib/postgres/aggregates/statistics.py\n--- a/django/contrib/postgres/aggregates/statistics.py\n+++ b/django/contrib/postgres/aggregates/statistics.py\n@@ -36,7 +36,7 @@ class RegrAvgY(StatAggregate):\n class RegrCount(StatAggregate):\n     function = 'REGR_COUNT'\n     output_field = IntegerField()\n-    empty_aggregate_value = 0\n+    empty_result_set_value = 0\n \n \n class RegrIntercept(StatAggregate):\ndiff --git a/django/db/models/aggregates.py b/django/db/models/aggregates.py\n--- a/django/db/models/aggregates.py\n+++ b/django/db/models/aggregates.py\n@@ -21,12 +21,12 @@ class Aggregate(Func):\n     filter_template = '%s FILTER (WHERE %%(filter)s)'\n     window_compatible = True\n     allow_distinct = False\n-    empty_aggregate_value = None\n+    empty_result_set_value = None\n \n     def __init__(self, *expressions, distinct=False, filter=None, default=None, **extra):\n         if distinct and not self.allow_distinct:\n             raise TypeError(\"%s does not allow distinct.\" % self.__class__.__name__)\n-        if default is not None and self.empty_aggregate_value is not None:\n+        if default is not None and self.empty_result_set_value is not None:\n             raise TypeError(f'{self.__class__.__name__} does not allow default.')\n         self.distinct = distinct\n         self.filter = filter\n@@ -117,7 +117,7 @@ class Count(Aggregate):\n     name = 'Count'\n     output_field = IntegerField()\n     allow_distinct = True\n-    empty_aggregate_value = 0\n+    empty_result_set_value = 0\n \n     def __init__(self, expression, filter=None, **extra):\n         if expression == '*':\ndiff --git a/django/db/models/expressions.py b/django/db/models/expressions.py\n--- a/django/db/models/expressions.py\n+++ b/django/db/models/expressions.py\n@@ -150,10 +150,10 @@ def __ror__(self, other):\n class BaseExpression:\n     \"\"\"Base class for all query expressions.\"\"\"\n \n+    empty_result_set_value = NotImplemented\n     # aggregate specific fields\n     is_summary = False\n     _output_field_resolved_to_none = False\n-    empty_aggregate_value = NotImplemented\n     # Can the expression be used in a WHERE clause?\n     filterable = True\n     # Can the expression can be used as a source expression in Window?\n@@ -702,7 +702,13 @@ def as_sql(self, compiler, connection, function=None, template=None, arg_joiner=\n         sql_parts = []\n         params = []\n         for arg in self.source_expressions:\n-            arg_sql, arg_params = compiler.compile(arg)\n+            try:\n+                arg_sql, arg_params = compiler.compile(arg)\n+            except EmptyResultSet:\n+                empty_result_set_value = getattr(arg, 'empty_result_set_value', NotImplemented)\n+                if empty_result_set_value is NotImplemented:\n+                    raise\n+                arg_sql, arg_params = compiler.compile(Value(empty_result_set_value))\n             sql_parts.append(arg_sql)\n             params.extend(arg_params)\n         data = {**self.extra, **extra_context}\n@@ -797,7 +803,7 @@ def _resolve_output_field(self):\n             return fields.UUIDField()\n \n     @property\n-    def empty_aggregate_value(self):\n+    def empty_result_set_value(self):\n         return self.value\n \n \n@@ -1114,6 +1120,7 @@ class Subquery(BaseExpression, Combinable):\n     \"\"\"\n     template = '(%(subquery)s)'\n     contains_aggregate = False\n+    empty_result_set_value = None\n \n     def __init__(self, queryset, output_field=None, **extra):\n         # Allow the usage of both QuerySet and sql.Query objects.\ndiff --git a/django/db/models/functions/comparison.py b/django/db/models/functions/comparison.py\n--- a/django/db/models/functions/comparison.py\n+++ b/django/db/models/functions/comparison.py\n@@ -66,9 +66,9 @@ def __init__(self, *expressions, **extra):\n         super().__init__(*expressions, **extra)\n \n     @property\n-    def empty_aggregate_value(self):\n+    def empty_result_set_value(self):\n         for expression in self.get_source_expressions():\n-            result = expression.empty_aggregate_value\n+            result = expression.empty_result_set_value\n             if result is NotImplemented or result is not None:\n                 return result\n         return None\ndiff --git a/django/db/models/sql/compiler.py b/django/db/models/sql/compiler.py\n--- a/django/db/models/sql/compiler.py\n+++ b/django/db/models/sql/compiler.py\n@@ -266,8 +266,12 @@ def get_select_from_parent(klass_info):\n             try:\n                 sql, params = self.compile(col)\n             except EmptyResultSet:\n-                # Select a predicate that's always False.\n-                sql, params = '0', ()\n+                empty_result_set_value = getattr(col, 'empty_result_set_value', NotImplemented)\n+                if empty_result_set_value is NotImplemented:\n+                    # Select a predicate that's always False.\n+                    sql, params = '0', ()\n+                else:\n+                    sql, params = self.compile(Value(empty_result_set_value))\n             else:\n                 sql, params = col.select_format(self, sql, params)\n             ret.append((col, (sql, params), alias))\ndiff --git a/django/db/models/sql/query.py b/django/db/models/sql/query.py\n--- a/django/db/models/sql/query.py\n+++ b/django/db/models/sql/query.py\n@@ -143,6 +143,7 @@ class Query(BaseExpression):\n     \"\"\"A single SQL query.\"\"\"\n \n     alias_prefix = 'T'\n+    empty_result_set_value = None\n     subq_aliases = frozenset([alias_prefix])\n \n     compiler = 'SQLCompiler'\n@@ -487,11 +488,11 @@ def get_aggregation(self, using, added_aggregate_names):\n             self.default_cols = False\n             self.extra = {}\n \n-        empty_aggregate_result = [\n-            expression.empty_aggregate_value\n+        empty_set_result = [\n+            expression.empty_result_set_value\n             for expression in outer_query.annotation_select.values()\n         ]\n-        elide_empty = not any(result is NotImplemented for result in empty_aggregate_result)\n+        elide_empty = not any(result is NotImplemented for result in empty_set_result)\n         outer_query.clear_ordering(force=True)\n         outer_query.clear_limits()\n         outer_query.select_for_update = False\n@@ -499,7 +500,7 @@ def get_aggregation(self, using, added_aggregate_names):\n         compiler = outer_query.get_compiler(using, elide_empty=elide_empty)\n         result = compiler.execute_sql(SINGLE)\n         if result is None:\n-            result = empty_aggregate_result\n+            result = empty_set_result\n \n         converters = compiler.get_converters(outer_query.annotation_select.values())\n         result = next(compiler.apply_converters((result,), converters))\n",
  "test_patch": "diff --git a/tests/aggregation/tests.py b/tests/aggregation/tests.py\n--- a/tests/aggregation/tests.py\n+++ b/tests/aggregation/tests.py\n@@ -1367,7 +1367,7 @@ def test_empty_result_optimization(self):\n                     'books_count': 0,\n                 }\n             )\n-        # Expression without empty_aggregate_value forces queries to be\n+        # Expression without empty_result_set_value forces queries to be\n         # executed even if they would return an empty result set.\n         raw_books_count = Func('book', function='COUNT')\n         raw_books_count.contains_aggregate = True\ndiff --git a/tests/annotations/tests.py b/tests/annotations/tests.py\n--- a/tests/annotations/tests.py\n+++ b/tests/annotations/tests.py\n@@ -210,6 +210,12 @@ def test_empty_expression_annotation(self):\n         self.assertEqual(len(books), Book.objects.count())\n         self.assertTrue(all(not book.selected for book in books))\n \n+    def test_empty_queryset_annotation(self):\n+        qs = Author.objects.annotate(\n+            empty=Subquery(Author.objects.values('id').none())\n+        )\n+        self.assertIsNone(qs.first().empty)\n+\n     def test_annotate_with_aggregation(self):\n         books = Book.objects.annotate(is_book=Value(1), rating_count=Count('rating'))\n         for book in books:\ndiff --git a/tests/db_functions/comparison/test_coalesce.py b/tests/db_functions/comparison/test_coalesce.py\n--- a/tests/db_functions/comparison/test_coalesce.py\n+++ b/tests/db_functions/comparison/test_coalesce.py\n@@ -1,4 +1,4 @@\n-from django.db.models import TextField\n+from django.db.models import Subquery, TextField\n from django.db.models.functions import Coalesce, Lower\n from django.test import TestCase\n from django.utils import timezone\n@@ -70,3 +70,14 @@ def test_ordering(self):\n             authors, ['John Smith', 'Rhonda'],\n             lambda a: a.name\n         )\n+\n+    def test_empty_queryset(self):\n+        Author.objects.create(name='John Smith')\n+        tests = [\n+            Author.objects.none(),\n+            Subquery(Author.objects.none()),\n+        ]\n+        for empty_query in tests:\n+            with self.subTest(empty_query.__class__.__name__):\n+                qs = Author.objects.annotate(annotation=Coalesce(empty_query, 42))\n+                self.assertEqual(qs.first().annotation, 42)\n",
  "problem_statement": "Incorrect annotation value when doing a subquery with empty queryset\nDescription\n\t\nORM seems to generate annotation/subqueries incorrectly if empty queryset is used. \nModels:\nclass Article(models.Model):\n\tauthor_name = models.CharField(max_length=100)\n\tcontent = models.TextField()\n\tis_public = models.BooleanField()\nclass Comment(models.Model):\n\tarticle = models.ForeignKey(Article, related_name=\"comments\", on_delete=models.CASCADE)\n\tauthor_name = models.CharField(max_length=100)\n\tcontent = models.TextField()\ntest data:\narticle = Article.objects.create(author_name=\"Jack\", content=\"Example content\", is_public=True)\ncomment = Comment.objects.create(article=article, author_name=\"John\", content=\"Example comment\")\nqueries:\nqs = Article.objects.all()\n# keep one list_x uncommented to see the difference:\nlist_x = [\"random_thing_that_is_not_equal_to_any_authors_name\"] # list not empty, bug doesnt occur\n#list_x = [] # if this list is empty, then the bug occurs\ncomment_qs = Comment.objects.filter(author_name__in=list_x)\nqs = qs.annotate(\n\tA=Coalesce(Subquery(\n\t\tcomment_qs.annotate(x=Count('content')).values('x')[:1], output_field=IntegerField(),\n\t), 101) # if list_x == [], Coalesce wont work and A will be 0 instead of 101\n)\n# please note that above annotation doesnt make much logical sense, its just for testing purposes\nqs = qs.annotate(\n\tB=Value(99, output_field=IntegerField())\n)\nqs = qs.annotate(\n\tC=F(\"A\") + F(\"B\") # if list_x == [], C will result in 0 sic! instead of 101 + 99 = 200\n)\ndata = {\n\t\"A\": qs.last().A,\n\t\"B\": qs.last().B,\n\t\"C\": qs.last().C,\n}\nprint(data)\nprint(format_sql(qs.query))\nconsole output for list_x=[\"random_thing_that_is_not_equal_to_any_authors_name\"] (expected, correct):\n{'A': 101, 'B': 99, 'C': 200}\nSELECT \"articles_article\".\"id\",\n\t \"articles_article\".\"author_name\",\n\t \"articles_article\".\"content\",\n\t \"articles_article\".\"is_public\",\n\t COALESCE(\n\t\t\t\t (SELECT COUNT(U0.\"content\") AS \"x\"\n\t\t\t\t FROM \"articles_comment\" U0\n\t\t\t\t WHERE U0.\"author_name\" IN (random_thing_that_is_not_equal_to_any_authors_name)\n\t\t\t\t GROUP BY U0.\"id\", U0.\"article_id\", U0.\"author_name\", U0.\"content\"\n\t\t\t\t LIMIT 1), 101) AS \"A\",\n\t 99 AS \"B\",\n\t (COALESCE(\n\t\t\t\t (SELECT COUNT(U0.\"content\") AS \"x\"\n\t\t\t\t\tFROM \"articles_comment\" U0\n\t\t\t\t\tWHERE U0.\"author_name\" IN (random_thing_that_is_not_equal_to_any_authors_name)\n\t\t\t\t\tGROUP BY U0.\"id\", U0.\"article_id\", U0.\"author_name\", U0.\"content\"\n\t\t\t\t\tLIMIT 1), 101) + 99) AS \"C\"\nFROM \"articles_article\"\nconsole output for list_x=[] (incorrect):\n{'A': 0, 'B': 99, 'C': 0}\nSELECT \"articles_article\".\"id\",\n\t \"articles_article\".\"author_name\",\n\t \"articles_article\".\"content\",\n\t \"articles_article\".\"is_public\",\n\t 0 AS \"A\",\n\t 99 AS \"B\",\n\t 0 AS \"C\"\nFROM \"articles_article\"\nBackground story: Above queries are made up (simplified), but based on some parts of logic that I had in my code. list_x was generated dynamically, and it was very hard to detect what is causing unexpected results. This behavior is very strange, I believe its a bug and needs to be fixed, because it is totally unintuitive that:\nSomeModel.objects.filter(x__in=[\"something_that_causes_this_qs_lenth_to_be_0\"])\nand \nSomeModel.objects.filter(x__in=[]) \nmay yield different results when used in queries later, even though results of this querysets are logically equivalent\nI will attach a minimal repro project (with code from above)\n",
  "hints_text": "The 0 assignment on empty result set comes from \u200bthis line. I assume we could adjust the logic to rely on getattr(col, 'empty_aggregate_value', NotImplemented) and fallback to '0' if it's missing. Makes me wonder if we'd want to rename empty_aggregate_value to empty_result_set_value instead since it would not entirely be bound to aggregation anymore. e.g. the following should exhibit the same behavior Author.objects.annotate(annotation=Coalesce(Author.objects.empty(), 42)) It also seems weird that we default to 0 as opposed to NULL which would be a more correct value for a non-coalesced annotation. Alternatively we could adjust Coalesce.as_sql to catch EmptyResultSet when it's compiling its source expressions but that's more involved as most of the logic for that currently lives in Func.as_sql. We could also use both of these approaches.\nHi! Thanks for the hints Simon, I tried a first patch where we catch empty values here \u200bhttps://github.com/django/django/pull/14770 Should we expand the solution a bit further and rename empty_aggregate_value as you suggested, and use it in the SQLCompiler too?\nHi, thanks for your PR, do we have any updates on this?\nHi, the patch is waiting on some review I believe. So once a maintainer has a bit of time available, we'll be able to move forward :)",
  "created_at": "2021-09-24T20:08:24Z",
  "version": "4.1",
  "FAIL_TO_PASS": "[\"test_empty_queryset (db_functions.comparison.test_coalesce.CoalesceTests)\", \"test_empty_queryset_annotation (annotations.tests.NonAggregateAnnotationTestCase)\", \"test_gt_two_expressions (db_functions.comparison.test_coalesce.CoalesceTests)\"]",
  "PASS_TO_PASS": "[\".dates() returns a distinct set of dates when applied to a\", \"Aggregation over sliced queryset works correctly.\", \"An annotation included in values() before an aggregate should be\", \"An annotation not included in values() before an aggregate should be\", \"Annotating None onto a model round-trips\", \"Annotations can reference fields in a values clause,\", \"Columns are aligned in the correct order for resolve_columns. This test\", \"Deferred attributes can be referenced by an annotation,\", \"Doing exclude() on a foreign model after annotate() doesn't crash.\", \"Exists annotations are included in the GROUP BY if they are\", \"Fields on an inherited model can be referenced by an\", \"Random() is not included in the GROUP BY when used for ordering.\", \"Subqueries do not needlessly contain ORDER BY, SELECT FOR UPDATE or\", \"Subquery annotations and external aliases are excluded from the GROUP\", \"Subquery annotations are excluded from the GROUP BY if they are\", \"Subquery annotations are included in the GROUP BY if they are\", \"Subquery annotations must be included in the GROUP BY if they use\", \"Sum on a distinct() QuerySet should aggregate only the distinct items.\", \"test_add_implementation (aggregation.tests.AggregateTestCase)\", \"test_aggregate_alias (aggregation.tests.AggregateTestCase)\", \"test_aggregate_alias (annotations.tests.AliasTests)\", \"test_aggregate_annotation (aggregation.tests.AggregateTestCase)\", \"test_aggregate_in_order_by (aggregation.tests.AggregateTestCase)\", \"test_aggregate_join_transform (aggregation.tests.AggregateTestCase)\", \"test_aggregate_multi_join (aggregation.tests.AggregateTestCase)\", \"test_aggregate_over_aggregate (aggregation.tests.AggregateTestCase)\", \"test_aggregate_over_annotation (annotations.tests.NonAggregateAnnotationTestCase)\", \"test_aggregate_over_complex_annotation (aggregation.tests.AggregateTestCase)\", \"test_aggregate_transform (aggregation.tests.AggregateTestCase)\", \"test_aggregation_default_compound_expression (aggregation.tests.AggregateTestCase)\", \"test_aggregation_default_expression (aggregation.tests.AggregateTestCase)\", \"test_aggregation_default_group_by (aggregation.tests.AggregateTestCase)\", \"test_aggregation_default_integer (aggregation.tests.AggregateTestCase)\", \"test_aggregation_default_passed_another_aggregate (aggregation.tests.AggregateTestCase)\", \"test_aggregation_default_unset (aggregation.tests.AggregateTestCase)\", \"test_aggregation_default_unsupported_by_count (aggregation.tests.AggregateTestCase)\", \"test_aggregation_default_using_date_from_database (aggregation.tests.AggregateTestCase)\", \"test_aggregation_default_using_date_from_python (aggregation.tests.AggregateTestCase)\", \"test_aggregation_default_using_datetime_from_database (aggregation.tests.AggregateTestCase)\", \"test_aggregation_default_using_datetime_from_python (aggregation.tests.AggregateTestCase)\", \"test_aggregation_default_using_decimal_from_database (aggregation.tests.AggregateTestCase)\", \"test_aggregation_default_using_decimal_from_python (aggregation.tests.AggregateTestCase)\", \"test_aggregation_default_using_duration_from_database (aggregation.tests.AggregateTestCase)\", \"test_aggregation_default_using_duration_from_python (aggregation.tests.AggregateTestCase)\", \"test_aggregation_default_using_time_from_database (aggregation.tests.AggregateTestCase)\", \"test_aggregation_default_using_time_from_python (aggregation.tests.AggregateTestCase)\", \"test_aggregation_default_zero (aggregation.tests.AggregateTestCase)\", \"test_aggregation_exists_annotation (aggregation.tests.AggregateTestCase)\", \"test_aggregation_expressions (aggregation.tests.AggregateTestCase)\", \"test_aggregation_nested_subquery_outerref (aggregation.tests.AggregateTestCase)\", \"test_aggregation_order_by_not_selected_annotation_values (aggregation.tests.AggregateTestCase)\", \"test_aggregation_subquery_annotation_exists (aggregation.tests.AggregateTestCase)\", \"test_aggregation_subquery_annotation_related_field (aggregation.tests.AggregateTestCase)\", \"test_aggregation_subquery_annotation_values_collision (aggregation.tests.AggregateTestCase)\", \"test_alias_after_annotation (annotations.tests.AliasTests)\", \"test_alias_annotate_with_aggregation (annotations.tests.AliasTests)\", \"test_alias_annotation_expression (annotations.tests.AliasTests)\", \"test_alias_default_alias_expression (annotations.tests.AliasTests)\", \"test_annotate_basic (aggregation.tests.AggregateTestCase)\", \"test_annotate_defer (aggregation.tests.AggregateTestCase)\", \"test_annotate_defer_select_related (aggregation.tests.AggregateTestCase)\", \"test_annotate_exists (annotations.tests.NonAggregateAnnotationTestCase)\", \"test_annotate_m2m (aggregation.tests.AggregateTestCase)\", \"test_annotate_ordering (aggregation.tests.AggregateTestCase)\", \"test_annotate_over_annotate (aggregation.tests.AggregateTestCase)\", \"test_annotate_values (aggregation.tests.AggregateTestCase)\", \"test_annotate_values_aggregate (aggregation.tests.AggregateTestCase)\", \"test_annotate_values_list (aggregation.tests.AggregateTestCase)\", \"test_annotate_with_aggregation (annotations.tests.NonAggregateAnnotationTestCase)\", \"test_annotated_aggregate_over_annotated_aggregate (aggregation.tests.AggregateTestCase)\", \"test_annotation (aggregation.tests.AggregateTestCase)\", \"test_annotation_aggregate_with_m2o (annotations.tests.NonAggregateAnnotationTestCase)\", \"test_annotation_exists_aggregate_values_chaining (annotations.tests.NonAggregateAnnotationTestCase)\", \"test_annotation_expressions (aggregation.tests.AggregateTestCase)\", \"test_annotation_filter_with_subquery (annotations.tests.NonAggregateAnnotationTestCase)\", \"test_annotation_in_f_grouped_by_annotation (annotations.tests.NonAggregateAnnotationTestCase)\", \"test_annotation_reverse_m2m (annotations.tests.NonAggregateAnnotationTestCase)\", \"test_annotation_subquery_and_aggregate_values_chaining (annotations.tests.NonAggregateAnnotationTestCase)\", \"test_annotation_subquery_outerref_transform (annotations.tests.NonAggregateAnnotationTestCase)\", \"test_annotation_with_m2m (annotations.tests.NonAggregateAnnotationTestCase)\", \"test_arguments_must_be_expressions (aggregation.tests.AggregateTestCase)\", \"test_arguments_must_be_expressions (annotations.tests.NonAggregateAnnotationTestCase)\", \"test_avg_decimal_field (aggregation.tests.AggregateTestCase)\", \"test_avg_duration_field (aggregation.tests.AggregateTestCase)\", \"test_backwards_m2m_annotate (aggregation.tests.AggregateTestCase)\", \"test_basic (db_functions.comparison.test_coalesce.CoalesceTests)\", \"test_basic_alias (annotations.tests.AliasTests)\", \"test_basic_alias_annotation (annotations.tests.AliasTests)\", \"test_basic_alias_f_annotation (annotations.tests.AliasTests)\", \"test_basic_alias_f_transform_annotation (annotations.tests.AliasTests)\", \"test_basic_annotation (annotations.tests.NonAggregateAnnotationTestCase)\", \"test_basic_f_annotation (annotations.tests.NonAggregateAnnotationTestCase)\", \"test_boolean_value_annotation (annotations.tests.NonAggregateAnnotationTestCase)\", \"test_chaining_annotation_filter_with_m2m (annotations.tests.NonAggregateAnnotationTestCase)\", \"test_chaining_transforms (annotations.tests.NonAggregateAnnotationTestCase)\", \"test_coalesced_empty_result_set (aggregation.tests.AggregateTestCase)\", \"test_column_field_ordering_with_deferred (annotations.tests.NonAggregateAnnotationTestCase)\", \"test_combine_different_types (aggregation.tests.AggregateTestCase)\", \"test_combined_annotation_commutative (annotations.tests.NonAggregateAnnotationTestCase)\", \"test_combined_expression_annotation_with_aggregation (annotations.tests.NonAggregateAnnotationTestCase)\", \"test_combined_f_expression_annotation_with_aggregation (annotations.tests.NonAggregateAnnotationTestCase)\", \"test_complex_aggregations_require_kwarg (aggregation.tests.AggregateTestCase)\", \"test_complex_values_aggregation (aggregation.tests.AggregateTestCase)\", \"test_count (aggregation.tests.AggregateTestCase)\", \"test_count_distinct_expression (aggregation.tests.AggregateTestCase)\", \"test_count_star (aggregation.tests.AggregateTestCase)\", \"test_custom_functions (annotations.tests.NonAggregateAnnotationTestCase)\", \"test_custom_functions_can_ref_other_functions (annotations.tests.NonAggregateAnnotationTestCase)\", \"test_custom_transform_annotation (annotations.tests.NonAggregateAnnotationTestCase)\", \"test_dates_alias (annotations.tests.AliasTests)\", \"test_datetimes_alias (annotations.tests.AliasTests)\", \"test_decimal_annotation (annotations.tests.NonAggregateAnnotationTestCase)\", \"test_decimal_max_digits_has_no_effect (aggregation.tests.AggregateTestCase)\", \"test_defer_only_alias (annotations.tests.AliasTests)\", \"test_distinct_on_aggregate (aggregation.tests.AggregateTestCase)\", \"test_empty_aggregate (aggregation.tests.AggregateTestCase)\", \"test_empty_expression_annotation (annotations.tests.NonAggregateAnnotationTestCase)\", \"test_empty_result_optimization (aggregation.tests.AggregateTestCase)\", \"test_even_more_aggregate (aggregation.tests.AggregateTestCase)\", \"test_exists_extra_where_with_aggregate (aggregation.tests.AggregateTestCase)\", \"test_exists_none_with_aggregate (aggregation.tests.AggregateTestCase)\", \"test_expression_on_aggregation (aggregation.tests.AggregateTestCase)\", \"test_filter_agg_with_double_f (annotations.tests.NonAggregateAnnotationTestCase)\", \"test_filter_aggregate (aggregation.tests.AggregateTestCase)\", \"test_filter_alias_agg_with_double_f (annotations.tests.AliasTests)\", \"test_filter_alias_with_double_f (annotations.tests.AliasTests)\", \"test_filter_alias_with_f (annotations.tests.AliasTests)\", \"test_filter_annotation (annotations.tests.NonAggregateAnnotationTestCase)\", \"test_filter_annotation_with_double_f (annotations.tests.NonAggregateAnnotationTestCase)\", \"test_filter_annotation_with_f (annotations.tests.NonAggregateAnnotationTestCase)\", \"test_filter_decimal_annotation (annotations.tests.NonAggregateAnnotationTestCase)\", \"test_filter_wrong_annotation (annotations.tests.NonAggregateAnnotationTestCase)\", \"test_filtering (aggregation.tests.AggregateTestCase)\", \"test_fkey_aggregate (aggregation.tests.AggregateTestCase)\", \"test_grouping_by_q_expression_annotation (annotations.tests.NonAggregateAnnotationTestCase)\", \"test_joined_alias_annotation (annotations.tests.AliasTests)\", \"test_joined_annotation (annotations.tests.NonAggregateAnnotationTestCase)\", \"test_joined_transformed_annotation (annotations.tests.NonAggregateAnnotationTestCase)\", \"test_mixed_type_annotation_date_interval (annotations.tests.NonAggregateAnnotationTestCase)\", \"test_mixed_type_annotation_numbers (annotations.tests.NonAggregateAnnotationTestCase)\", \"test_mixed_values (db_functions.comparison.test_coalesce.CoalesceTests)\", \"test_more_aggregation (aggregation.tests.AggregateTestCase)\", \"test_multi_arg_aggregate (aggregation.tests.AggregateTestCase)\", \"test_multiple_aggregates (aggregation.tests.AggregateTestCase)\", \"test_nonaggregate_aggregation_throws (aggregation.tests.AggregateTestCase)\", \"test_nonfield_annotation (aggregation.tests.AggregateTestCase)\", \"test_order_by_aggregate (annotations.tests.NonAggregateAnnotationTestCase)\", \"test_order_by_alias (annotations.tests.AliasTests)\", \"test_order_by_alias_aggregate (annotations.tests.AliasTests)\", \"test_order_by_annotation (annotations.tests.NonAggregateAnnotationTestCase)\", \"test_order_of_precedence (aggregation.tests.AggregateTestCase)\", \"test_ordering (db_functions.comparison.test_coalesce.CoalesceTests)\", \"test_overwrite_alias_with_annotation (annotations.tests.AliasTests)\", \"test_overwrite_annotation_with_alias (annotations.tests.AliasTests)\", \"test_q_expression_annotation_with_aggregation (annotations.tests.NonAggregateAnnotationTestCase)\", \"test_raw_sql_with_inherited_field (annotations.tests.NonAggregateAnnotationTestCase)\", \"test_related_aggregate (aggregation.tests.AggregateTestCase)\", \"test_reverse_fkey_annotate (aggregation.tests.AggregateTestCase)\", \"test_single_aggregate (aggregation.tests.AggregateTestCase)\", \"test_sum_duration_field (aggregation.tests.AggregateTestCase)\", \"test_update_with_alias (annotations.tests.AliasTests)\", \"test_update_with_annotation (annotations.tests.NonAggregateAnnotationTestCase)\", \"test_values_aggregation (aggregation.tests.AggregateTestCase)\", \"test_values_alias (annotations.tests.AliasTests)\", \"test_values_annotation_with_expression (aggregation.tests.AggregateTestCase)\", \"test_values_with_pk_annotation (annotations.tests.NonAggregateAnnotationTestCase)\"]",
  "environment_setup_commit": "647480166bfe7532e8c471fef0146e3a17e6c0c9",
  "patch_files": [
    "django/contrib/postgres/aggregates/statistics.py",
    "django/db/models/aggregates.py",
    "django/db/models/expressions.py",
    "django/db/models/functions/comparison.py",
    "django/db/models/sql/compiler.py",
    "django/db/models/sql/query.py"
  ],
  "test_patch_files": [
    "tests/aggregation/tests.py",
    "tests/annotations/tests.py",
    "tests/db_functions/comparison/test_coalesce.py"
  ],
  "patch_diff_details": {
    "django/contrib/postgres/aggregates/statistics.py": {
      "diffs": [
        {
          "start_line_old": 39,
          "end_line_old": 39,
          "file_pos": 15,
          "file_context_length": 108083,
          "pos": 58,
          "context_length": 21811
        }
      ]
    },
    "django/db/models/aggregates.py": {
      "diffs": [
        {
          "start_line_old": 24,
          "end_line_old": 29,
          "file_pos": 7,
          "file_context_length": 69832,
          "closest_snippet_id": "/tmp/repos/django/django/db/models/aggregates.py_Aggregate.default_alias_Aggregate._get_repr_options.4.1",
          "closest_snippet_line_distance": 46,
          "pos": 70,
          "context_length": 26663
        },
        {
          "start_line_old": 120,
          "end_line_old": 120,
          "file_pos": 7,
          "file_context_length": 69832,
          "closest_snippet_id": "/tmp/repos/django/django/db/models/aggregates.py_Aggregate_Aggregate.set_source_expressions.2.1",
          "closest_snippet_line_distance": 72
        }
      ]
    },
    "django/db/models/expressions.py": {
      "diffs": [
        {
          "start_line_old": 153,
          "end_line_old": 153,
          "file_pos": 6,
          "file_context_length": 68417,
          "closest_snippet_id": "/tmp/repos/django/django/db/models/expressions.py_Value._resolve_output_field_Value.empty_aggregate_value.1.1",
          "closest_snippet_line_distance": 622
        },
        {
          "start_line_old": 705,
          "end_line_old": 705,
          "file_pos": 6,
          "file_context_length": 68417,
          "closest_snippet_id": "/tmp/repos/django/django/db/models/expressions.py_Value._resolve_output_field_Value.empty_aggregate_value.1.1",
          "closest_snippet_line_distance": 70
        },
        {
          "start_line_old": 800,
          "end_line_old": 800,
          "file_pos": 6,
          "file_context_length": 68417,
          "closest_snippet_id": "/tmp/repos/django/django/db/models/expressions.py_RawSQL_RawSQL.get_group_by_cols.1.1",
          "closest_snippet_line_distance": 4,
          "pos": 125,
          "context_length": 47180
        },
        {
          "start_line_old": 1117,
          "end_line_old": 1117,
          "file_pos": 6,
          "file_context_length": 68417,
          "closest_snippet_id": "/tmp/repos/django/django/db/models/expressions.py_Exists_Exists.select_format.4.2.1",
          "closest_snippet_line_distance": 48,
          "pos": 16,
          "context_length": 6180
        }
      ]
    },
    "django/db/models/functions/comparison.py": {
      "diffs": [
        {
          "start_line_old": 69,
          "end_line_old": 71
        }
      ]
    },
    "django/db/models/sql/compiler.py": {
      "diffs": [
        {
          "start_line_old": 269,
          "end_line_old": 270,
          "file_pos": 3,
          "file_context_length": 54754,
          "closest_snippet_id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler.ordering_parts.as_subquery_condition_SQLCompiler.ordering_parts.explain_query.5.1.2.1",
          "closest_snippet_line_distance": 964,
          "pos": 18,
          "context_length": 6886
        }
      ]
    },
    "django/db/models/sql/query.py": {
      "diffs": [
        {
          "start_line_old": 146,
          "end_line_old": 146,
          "file_pos": 2,
          "file_context_length": 40004,
          "closest_snippet_id": "/tmp/repos/django/django/db/models/sql/query.py_Query.split_exclude_Query.split_exclude.21.1",
          "closest_snippet_line_distance": 1599,
          "pos": 25,
          "context_length": 9774
        },
        {
          "start_line_old": 490,
          "end_line_old": 494,
          "file_pos": 2,
          "file_context_length": 40004,
          "closest_snippet_id": "/tmp/repos/django/django/db/models/sql/query.py_RawQuery_RawQuery.__str__.2.1",
          "closest_snippet_line_distance": 377
        },
        {
          "start_line_old": 502,
          "end_line_old": 502,
          "file_pos": 2,
          "file_context_length": 40004,
          "closest_snippet_id": "/tmp/repos/django/django/db/models/sql/query.py_RawQuery_RawQuery.__str__.2.1",
          "closest_snippet_line_distance": 385
        }
      ]
    }
  },
  "vectors": 3589,
  "snippets": [
    {
      "position": 1,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet._annotate_QuerySet._annotate.10.1",
      "distance": 0.8442181944847107,
      "file_path": "django/db/models/query.py",
      "start_line": 1134,
      "end_line": 1175,
      "tokens": 323,
      "context_length": 323
    },
    {
      "position": 2,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.rewrite_cols_Query.rewrite_cols.orig_exprs.5.1",
      "distance": 0.9228121042251587,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 364,
      "end_line": 414,
      "tokens": 494,
      "context_length": 817,
      "file_pos": 2
    },
    {
      "position": 3,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.resolve_ref_Query.resolve_ref.2.3.12.1",
      "distance": 0.9732052087783813,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1701,
      "end_line": 1743,
      "tokens": 436,
      "context_length": 1253,
      "file_pos": 2
    },
    {
      "position": 4,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet._prefetch_related_objects_QuerySet.values.4.1",
      "distance": 0.9759924411773682,
      "file_path": "django/db/models/query.py",
      "start_line": 842,
      "end_line": 873,
      "tokens": 272,
      "context_length": 1525
    },
    {
      "position": 5,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler.ordering_parts.as_subquery_condition_SQLCompiler.ordering_parts.explain_query.5.1.2.1",
      "distance": 0.9773604869842529,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 1233,
      "end_line": 1255,
      "tokens": 244,
      "context_length": 1769,
      "file_pos": 3
    },
    {
      "position": 6,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.build_filter.18_Query.build_filter.30.1",
      "distance": 0.984182596206665,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1293,
      "end_line": 1357,
      "tokens": 760,
      "context_length": 2529,
      "file_pos": 3
    },
    {
      "position": 7,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet.__class_getitem___QuerySet.__or__.10.1",
      "distance": 0.9979633688926697,
      "file_path": "django/db/models/query.py",
      "start_line": 324,
      "end_line": 352,
      "tokens": 242,
      "context_length": 2771
    },
    {
      "position": 8,
      "id": "/tmp/repos/django/django/db/models/sql/where.py_SubqueryConstraint_",
      "distance": 1.0049421787261963,
      "file_path": "django/db/models/sql/where.py",
      "start_line": 245,
      "end_line": 262,
      "tokens": 141,
      "context_length": 2912
    },
    {
      "position": 9,
      "id": "/tmp/repos/django/django/db/models/__init__.py_1_",
      "distance": 1.0076243877410889,
      "file_path": "django/db/models/__init__.py",
      "start_line": 1,
      "end_line": 53,
      "tokens": 619,
      "context_length": 3531
    },
    {
      "position": 10,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.set_values_Query.set_values.9",
      "distance": 1.0220634937286377,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 2166,
      "end_line": 2213,
      "tokens": 394,
      "context_length": 3925,
      "file_pos": 5
    },
    {
      "position": 11,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.bump_prefix.3_Query.bump_prefix.12",
      "distance": 1.0256471633911133,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 906,
      "end_line": 928,
      "tokens": 248,
      "context_length": 4173,
      "file_pos": 5
    },
    {
      "position": 12,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.add_filtered_relation_Query.add_filtered_relation.6",
      "distance": 1.034235954284668,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1427,
      "end_line": 1454,
      "tokens": 283,
      "context_length": 4456,
      "file_pos": 5
    },
    {
      "position": 13,
      "id": "/tmp/repos/django/django/db/models/expressions.py_Exists_Exists.select_format.4.2.1",
      "distance": 1.0384674072265625,
      "file_path": "django/db/models/expressions.py",
      "start_line": 1165,
      "end_line": 1197,
      "tokens": 254,
      "context_length": 4710,
      "file_pos": 6
    },
    {
      "position": 14,
      "id": "/tmp/repos/django/django/db/models/aggregates.py_Aggregate.resolve_expression_Aggregate.resolve_expression.c.8.1",
      "distance": 1.0405446290969849,
      "file_path": "django/db/models/aggregates.py",
      "start_line": 50,
      "end_line": 68,
      "tokens": 278,
      "context_length": 4988,
      "file_pos": 7
    },
    {
      "position": 15,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.names_to_path.3_Query.names_to_path.4.1",
      "distance": 1.0415658950805664,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1472,
      "end_line": 1557,
      "tokens": 801,
      "context_length": 5789,
      "file_pos": 7
    },
    {
      "position": 16,
      "id": "/tmp/repos/django/django/db/models/expressions.py_Subquery_Subquery.get_group_by_cols.4.1",
      "distance": 1.0453910827636719,
      "file_path": "django/db/models/expressions.py",
      "start_line": 1110,
      "end_line": 1162,
      "tokens": 391,
      "context_length": 6180,
      "file_pos": 7
    },
    {
      "position": 17,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet.intersection_QuerySet.difference.2.2.1",
      "distance": 1.0529807806015015,
      "file_path": "django/db/models/query.py",
      "start_line": 1043,
      "end_line": 1056,
      "tokens": 126,
      "context_length": 6306
    },
    {
      "position": 18,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler.ordering_parts.get_select_SQLCompiler.ordering_parts.get_select.14.1",
      "distance": 1.0540201663970947,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 204,
      "end_line": 274,
      "tokens": 580,
      "context_length": 6886,
      "file_pos": 7
    },
    {
      "position": 19,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler_SQLCompiler.ordering_parts.setup_query.self.col_count.1",
      "distance": 1.0544061660766602,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 23,
      "end_line": 51,
      "tokens": 302,
      "context_length": 7188,
      "file_pos": 7
    },
    {
      "position": 20,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.deferred_to_data.8_Query.deferred_to_data.8.6.6.1",
      "distance": 1.0558595657348633,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 710,
      "end_line": 745,
      "tokens": 389,
      "context_length": 7577,
      "file_pos": 7
    },
    {
      "position": 21,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.setup_joins.16_Query.setup_joins.17.1",
      "distance": 1.0579135417938232,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1633,
      "end_line": 1654,
      "tokens": 200,
      "context_length": 7777,
      "file_pos": 7
    },
    {
      "position": 22,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.split_exclude_Query.split_exclude.21.1",
      "distance": 1.060350775718689,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1745,
      "end_line": 1810,
      "tokens": 662,
      "context_length": 8439,
      "file_pos": 7
    },
    {
      "position": 23,
      "id": "/tmp/repos/django/django/db/models/aggregates.py_Aggregate.default_alias_Aggregate._get_repr_options.4.1",
      "distance": 1.0623502731323242,
      "file_path": "django/db/models/aggregates.py",
      "start_line": 70,
      "end_line": 106,
      "tokens": 349,
      "context_length": 8788,
      "file_pos": 7
    },
    {
      "position": 24,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet.annotate_QuerySet.alias.3.1",
      "distance": 1.0630567073822021,
      "file_path": "django/db/models/query.py",
      "start_line": 1119,
      "end_line": 1132,
      "tokens": 115,
      "context_length": 8903
    },
    {
      "position": 25,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query_Query.output_field.1.3.1.1",
      "distance": 1.0633431673049927,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 142,
      "end_line": 241,
      "tokens": 871,
      "context_length": 9774,
      "file_pos": 7
    },
    {
      "position": 26,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler.ordering_parts.get_group_by_SQLCompiler.ordering_parts.get_group_by.45.1",
      "distance": 1.0634422302246094,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 67,
      "end_line": 152,
      "tokens": 890,
      "context_length": 10664,
      "file_pos": 7
    },
    {
      "position": 27,
      "id": "/tmp/repos/django/django/db/models/fields/related_lookups.py_RelatedIn.as_sql_RelatedIn.as_sql.1.5.2.1",
      "distance": 1.0641887187957764,
      "file_path": "django/db/models/fields/related_lookups.py",
      "start_line": 65,
      "end_line": 104,
      "tokens": 451,
      "context_length": 11115
    },
    {
      "position": 28,
      "id": "/tmp/repos/django/django/db/models/query.py_RawQuerySet.iterator_RawQuerySet.iterator.db.5.8.2.1",
      "distance": 1.065522313117981,
      "file_path": "django/db/models/query.py",
      "start_line": 1525,
      "end_line": 1556,
      "tokens": 295,
      "context_length": 11410
    },
    {
      "position": 29,
      "id": "/tmp/repos/django/django/db/models/fields/related_lookups.py_RelatedLookupMixin.as_sql_",
      "distance": 1.066314935684204,
      "file_path": "django/db/models/fields/related_lookups.py",
      "start_line": 124,
      "end_line": 160,
      "tokens": 244,
      "context_length": 11654
    },
    {
      "position": 30,
      "id": "/tmp/repos/django/django/db/models/fields/related.py_ManyToManyField._check_relationship_model_ManyToManyField._check_relationship_model.3.3.9.3.seen_from.5.1",
      "distance": 1.0665874481201172,
      "file_path": "django/db/models/fields/related.py",
      "start_line": 1262,
      "end_line": 1379,
      "tokens": 963,
      "context_length": 12617
    },
    {
      "position": 31,
      "id": "/tmp/repos/django/django/db/models/query.py_InstanceCheckMeta_RawQuerySet.__init__.self._prefetch_done.1",
      "distance": 1.0666275024414062,
      "file_path": "django/db/models/query.py",
      "start_line": 1442,
      "end_line": 1473,
      "tokens": 245,
      "context_length": 12862
    },
    {
      "position": 32,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet.none_QuerySet._filter_or_exclude_inplace.1.2.1",
      "distance": 1.0686025619506836,
      "file_path": "django/db/models/query.py",
      "start_line": 954,
      "end_line": 1002,
      "tokens": 371,
      "context_length": 13233
    },
    {
      "position": 33,
      "id": "/tmp/repos/django/django/db/models/expressions.py_Col_Col.get_db_converters.2.1",
      "distance": 1.07364821434021,
      "file_path": "django/db/models/expressions.py",
      "start_line": 839,
      "end_line": 873,
      "tokens": 292,
      "context_length": 13525,
      "file_pos": 9
    },
    {
      "position": 34,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.check_related_objects_Query.check_filterable.3.1.1",
      "distance": 1.0746623277664185,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1118,
      "end_line": 1150,
      "tokens": 338,
      "context_length": 13863,
      "file_pos": 9
    },
    {
      "position": 35,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler.ordering_parts.get_related_selections.13_SQLCompiler.ordering_parts.get_related_selections.14.1",
      "distance": 1.075047254562378,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 923,
      "end_line": 1015,
      "tokens": 839,
      "context_length": 14702,
      "file_pos": 9
    },
    {
      "position": 36,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_1_JoinInfo.1",
      "distance": 1.0766520500183105,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1,
      "end_line": 62,
      "tokens": 450,
      "context_length": 15152,
      "file_pos": 9
    },
    {
      "position": 37,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler.ordering_parts.get_select_for_update_of_arguments.result_SQLCompiler.ordering_parts.get_select_for_update_of_arguments.9.1",
      "distance": 1.0780236721038818,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 1076,
      "end_line": 1116,
      "tokens": 337,
      "context_length": 15489,
      "file_pos": 9
    },
    {
      "position": 38,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet._combinator_query_QuerySet.union.2.5.1",
      "distance": 1.0782827138900757,
      "file_path": "django/db/models/query.py",
      "start_line": 1021,
      "end_line": 1041,
      "tokens": 240,
      "context_length": 15729
    },
    {
      "position": 39,
      "id": "/tmp/repos/django/django/contrib/postgres/aggregates/general.py_BitAnd_JSONBAgg.deprecation_msg.1",
      "distance": 1.079263687133789,
      "file_path": "django/contrib/postgres/aggregates/general.py",
      "start_line": 55,
      "end_line": 86,
      "tokens": 217,
      "context_length": 15946
    },
    {
      "position": 40,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler.ordering_parts._order_by_pairs_SQLCompiler.ordering_parts._order_by_pairs.3.8.2.1.4.3",
      "distance": 1.080434799194336,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 276,
      "end_line": 371,
      "tokens": 710,
      "context_length": 16656,
      "file_pos": 10
    },
    {
      "position": 41,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet._merge_known_related_objects_QuerySet._check_operator_queryset.1.1",
      "distance": 1.0868507623672485,
      "file_path": "django/db/models/query.py",
      "start_line": 1387,
      "end_line": 1439,
      "tokens": 448,
      "context_length": 17104
    },
    {
      "position": 42,
      "id": "/tmp/repos/django/django/db/models/query_utils.py_Q.__or___Q.deconstruct.7.1",
      "distance": 1.0873069763183594,
      "file_path": "django/db/models/query_utils.py",
      "start_line": 59,
      "end_line": 91,
      "tokens": 288,
      "context_length": 17392
    },
    {
      "position": 43,
      "id": "/tmp/repos/django/django/db/models/expressions.py_When_When.get_group_by_cols.cols.3.1",
      "distance": 1.08750581741333,
      "file_path": "django/db/models/expressions.py",
      "start_line": 962,
      "end_line": 1026,
      "tokens": 591,
      "context_length": 17983,
      "file_pos": 11
    },
    {
      "position": 44,
      "id": "/tmp/repos/django/django/db/backends/mysql/compiler.py_1_SQLInsertCompiler.1",
      "distance": 1.090055227279663,
      "file_path": "django/db/backends/mysql/compiler.py",
      "start_line": 1,
      "end_line": 15,
      "tokens": 132,
      "context_length": 18115
    },
    {
      "position": 45,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet.values_list_QuerySet.values_list.10.1",
      "distance": 1.0915535688400269,
      "file_path": "django/db/models/query.py",
      "start_line": 875,
      "end_line": 904,
      "tokens": 248,
      "context_length": 18363
    },
    {
      "position": 46,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler.ordering_parts.get_combinator_sql_SQLCompiler.ordering_parts.get_combinator_sql.14.1",
      "distance": 1.0923703908920288,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 462,
      "end_line": 515,
      "tokens": 569,
      "context_length": 18932,
      "file_pos": 12
    },
    {
      "position": 47,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet.__setstate___QuerySet.__len__.2.1",
      "distance": 1.0925157070159912,
      "file_path": "django/db/models/query.py",
      "start_line": 236,
      "end_line": 263,
      "tokens": 221,
      "context_length": 19153
    },
    {
      "position": 48,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.get_external_cols_Query.as_sql.3.4.1",
      "distance": 1.0948965549468994,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1051,
      "end_line": 1069,
      "tokens": 162,
      "context_length": 19315,
      "file_pos": 12
    },
    {
      "position": 49,
      "id": "/tmp/repos/django/django/db/models/sql/subqueries.py_UpdateQuery_UpdateQuery.update_batch.2.3",
      "distance": 1.0966122150421143,
      "file_path": "django/db/models/sql/subqueries.py",
      "start_line": 48,
      "end_line": 76,
      "tokens": 208,
      "context_length": 19523
    },
    {
      "position": 50,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.add_filter_Query.clear_where.self.where.1",
      "distance": 1.0990759134292603,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1359,
      "end_line": 1383,
      "tokens": 260,
      "context_length": 19783,
      "file_pos": 13
    },
    {
      "position": 51,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.annotation_select_Query.extra_select.2.3.1.1",
      "distance": 1.0993880033493042,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 2215,
      "end_line": 2247,
      "tokens": 228,
      "context_length": 20011,
      "file_pos": 13
    },
    {
      "position": 52,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_collections_17",
      "distance": 1.1030312776565552,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 1,
      "end_line": 20,
      "tokens": 171,
      "context_length": 20182,
      "file_pos": 13
    },
    {
      "position": 53,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query._gen_cols_Query._gen_col_aliases.1",
      "distance": 1.1051862239837646,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1684,
      "end_line": 1699,
      "tokens": 132,
      "context_length": 20314,
      "file_pos": 13
    },
    {
      "position": 54,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet._fetch_all_QuerySet._next_is_sticky.3.1",
      "distance": 1.1075825691223145,
      "file_path": "django/db/models/query.py",
      "start_line": 1356,
      "end_line": 1374,
      "tokens": 186,
      "context_length": 20500
    },
    {
      "position": 55,
      "id": "/tmp/repos/django/django/db/models/base.py_Model._perform_unique_checks_Model._perform_unique_checks.3.1",
      "distance": 1.1103492975234985,
      "file_path": "django/db/models/base.py",
      "start_line": 1087,
      "end_line": 1130,
      "tokens": 404,
      "context_length": 20904
    },
    {
      "position": 56,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.clear_limits_Query.add_distinct_fields.self.distinct.1",
      "distance": 1.1105715036392212,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1843,
      "end_line": 1892,
      "tokens": 329,
      "context_length": 21233,
      "file_pos": 14
    },
    {
      "position": 57,
      "id": "/tmp/repos/django/django/db/models/sql/subqueries.py_InsertQuery_",
      "distance": 1.1130900382995605,
      "file_path": "django/db/models/sql/subqueries.py",
      "start_line": 138,
      "end_line": 164,
      "tokens": 161,
      "context_length": 21394
    },
    {
      "position": 58,
      "id": "/tmp/repos/django/django/contrib/postgres/aggregates/statistics.py_1_",
      "distance": 1.114190936088562,
      "file_path": "django/contrib/postgres/aggregates/statistics.py",
      "start_line": 1,
      "end_line": 64,
      "tokens": 417,
      "context_length": 21811,
      "file_pos": 15
    },
    {
      "position": 59,
      "id": "/tmp/repos/django/django/db/models/lookups.py_In_In.process_rhs.3.3.3.1",
      "distance": 1.114203929901123,
      "file_path": "django/db/models/lookups.py",
      "start_line": 387,
      "end_line": 426,
      "tokens": 329,
      "context_length": 22140
    },
    {
      "position": 60,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.add_annotation_Query.resolve_expression.9.1",
      "distance": 1.1142610311508179,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1022,
      "end_line": 1049,
      "tokens": 283,
      "context_length": 22423,
      "file_pos": 16
    },
    {
      "position": 61,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler.ordering_parts.as_sql_SQLCompiler.ordering_parts.as_sql.3.14.2",
      "distance": 1.1166932582855225,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 517,
      "end_line": 683,
      "tokens": 1521,
      "context_length": 23944,
      "file_pos": 16
    },
    {
      "position": 62,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_RawQuery._execute_query_ExplainInfo.1",
      "distance": 1.118163824081421,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 119,
      "end_line": 139,
      "tokens": 173,
      "context_length": 24117,
      "file_pos": 16
    },
    {
      "position": 63,
      "id": "/tmp/repos/django/django/db/models/expressions.py_Value.as_sql_Value.get_group_by_cols.1.1",
      "distance": 1.118199348449707,
      "file_path": "django/db/models/expressions.py",
      "start_line": 749,
      "end_line": 773,
      "tokens": 243,
      "context_length": 24360,
      "file_pos": 16
    },
    {
      "position": 64,
      "id": "/tmp/repos/django/django/db/models/base.py_Model.check_Model.check.3.1",
      "distance": 1.118310809135437,
      "file_path": "django/db/models/base.py",
      "start_line": 1269,
      "end_line": 1300,
      "tokens": 267,
      "context_length": 24627
    },
    {
      "position": 65,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler.ordering_parts.collapse_group_by_SQLCompiler.ordering_parts.collapse_group_by.5.4.1",
      "distance": 1.1196051836013794,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 154,
      "end_line": 202,
      "tokens": 523,
      "context_length": 25150,
      "file_pos": 16
    },
    {
      "position": 66,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLDeleteCompiler_SQLDeleteCompiler._as_sql.4.1",
      "distance": 1.120944619178772,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 1458,
      "end_line": 1490,
      "tokens": 254,
      "context_length": 25404,
      "file_pos": 16
    },
    {
      "position": 67,
      "id": "/tmp/repos/django/django/contrib/admin/options.py_ModelAdmin.get_search_results.may_have_duplicates_ModelAdmin.get_search_results.7.1",
      "distance": 1.1217079162597656,
      "file_path": "django/contrib/admin/options.py",
      "start_line": 1029,
      "end_line": 1046,
      "tokens": 184,
      "context_length": 25588
    },
    {
      "position": 68,
      "id": "/tmp/repos/django/django/db/models/sql/subqueries.py_1_DeleteQuery.delete_batch.6.1",
      "distance": 1.122759461402893,
      "file_path": "django/db/models/sql/subqueries.py",
      "start_line": 1,
      "end_line": 45,
      "tokens": 309,
      "context_length": 25897
    },
    {
      "position": 69,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet_QuerySet.__getstate__.2",
      "distance": 1.1244981288909912,
      "file_path": "django/db/models/query.py",
      "start_line": 175,
      "end_line": 234,
      "tokens": 469,
      "context_length": 26366
    },
    {
      "position": 70,
      "id": "/tmp/repos/django/django/db/models/aggregates.py_Aggregate_Aggregate.set_source_expressions.2.1",
      "distance": 1.1289583444595337,
      "file_path": "django/db/models/aggregates.py",
      "start_line": 17,
      "end_line": 48,
      "tokens": 297,
      "context_length": 26663,
      "file_pos": 17
    },
    {
      "position": 71,
      "id": "/tmp/repos/django/django/db/models/base.py_Model_Model.__init__.cls.20",
      "distance": 1.1290308237075806,
      "file_path": "django/db/models/base.py",
      "start_line": 404,
      "end_line": 509,
      "tokens": 913,
      "context_length": 27576
    },
    {
      "position": 72,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.get_count_Query.explain.4.1",
      "distance": 1.1324857473373413,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 509,
      "end_line": 554,
      "tokens": 392,
      "context_length": 27968,
      "file_pos": 17
    },
    {
      "position": 73,
      "id": "/tmp/repos/django/django/db/models/options.py_bisect_DEFAULT_NAMES.1",
      "distance": 1.1337409019470215,
      "file_path": "django/db/models/options.py",
      "start_line": 1,
      "end_line": 35,
      "tokens": 300,
      "context_length": 28268
    },
    {
      "position": 74,
      "id": "/tmp/repos/django/django/db/models/fields/related_lookups.py_1_MultiColSource.resolve_expression.1.1",
      "distance": 1.1357983350753784,
      "file_path": "django/db/models/fields/related_lookups.py",
      "start_line": 1,
      "end_line": 26,
      "tokens": 185,
      "context_length": 28453
    },
    {
      "position": 75,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet._merge_sanity_check_QuerySet._merge_sanity_check.2.1",
      "distance": 1.1362472772598267,
      "file_path": "django/db/models/query.py",
      "start_line": 1376,
      "end_line": 1385,
      "tokens": 114,
      "context_length": 28567
    },
    {
      "position": 76,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.combine.42_Query.combine.self.extra_order_by.1",
      "distance": 1.1363409757614136,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 634,
      "end_line": 659,
      "tokens": 277,
      "context_length": 28844,
      "file_pos": 18
    },
    {
      "position": 77,
      "id": "/tmp/repos/django/django/contrib/admin/filters.py_EmptyFieldListFilter.queryset_",
      "distance": 1.13787841796875,
      "file_path": "django/contrib/admin/filters.py",
      "start_line": 448,
      "end_line": 478,
      "tokens": 233,
      "context_length": 29077
    },
    {
      "position": 78,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_JoinPromoter.update_join_types_",
      "distance": 1.1384940147399902,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 2402,
      "end_line": 2457,
      "tokens": 827,
      "context_length": 29904,
      "file_pos": 19
    },
    {
      "position": 79,
      "id": "/tmp/repos/django/django/db/models/expressions.py_RawSQL.resolve_expression_Star.as_sql.1.1",
      "distance": 1.140920639038086,
      "file_path": "django/db/models/expressions.py",
      "start_line": 820,
      "end_line": 836,
      "tokens": 153,
      "context_length": 30057,
      "file_pos": 19
    },
    {
      "position": 80,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.join_parent_model_Query.join_parent_model.7.1",
      "distance": 1.1417218446731567,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 989,
      "end_line": 1020,
      "tokens": 307,
      "context_length": 30364,
      "file_pos": 19
    },
    {
      "position": 81,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.resolve_lookup_value_Query.resolve_lookup_value.2.1",
      "distance": 1.1423859596252441,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1071,
      "end_line": 1087,
      "tokens": 152,
      "context_length": 30516,
      "file_pos": 19
    },
    {
      "position": 82,
      "id": "/tmp/repos/django/django/db/models/base.py_Model._check_indexes_Model._check_indexes.10.1",
      "distance": 1.1440430879592896,
      "file_path": "django/db/models/base.py",
      "start_line": 1634,
      "end_line": 1721,
      "tokens": 672,
      "context_length": 31188
    },
    {
      "position": 83,
      "id": "/tmp/repos/django/django/db/models/query.py_prefetch_related_objects.13_prefetch_related_objects.13.7.2.18.8.new_obj_list.obj_list.1",
      "distance": 1.1456769704818726,
      "file_path": "django/db/models/query.py",
      "start_line": 1695,
      "end_line": 1810,
      "tokens": 1098,
      "context_length": 32286
    },
    {
      "position": 84,
      "id": "/tmp/repos/django/django/db/models/base.py_Model._check_index_together_Model._check_index_together.2.3.3.1",
      "distance": 1.1467623710632324,
      "file_path": "django/db/models/base.py",
      "start_line": 1580,
      "end_line": 1605,
      "tokens": 183,
      "context_length": 32469
    },
    {
      "position": 85,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.set_group_by_Query.add_select_related.self.select_related.1",
      "distance": 1.1490994691848755,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1988,
      "end_line": 2033,
      "tokens": 356,
      "context_length": 32825,
      "file_pos": 19
    },
    {
      "position": 86,
      "id": "/tmp/repos/django/django/contrib/gis/db/models/__init__.py_1_",
      "distance": 1.1493189334869385,
      "file_path": "django/contrib/gis/db/models/__init__.py",
      "start_line": 1,
      "end_line": 19,
      "tokens": 204,
      "context_length": 33029
    },
    {
      "position": 87,
      "id": "/tmp/repos/django/django/db/models/base.py_Model._check_ordering_Model._check_ordering.29.1",
      "distance": 1.1494646072387695,
      "file_path": "django/db/models/base.py",
      "start_line": 1773,
      "end_line": 1873,
      "tokens": 729,
      "context_length": 33758
    },
    {
      "position": 88,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet.__iter___QuerySet.__bool__.2.1",
      "distance": 1.1495943069458008,
      "file_path": "django/db/models/query.py",
      "start_line": 265,
      "end_line": 285,
      "tokens": 180,
      "context_length": 33938
    },
    {
      "position": 89,
      "id": "/tmp/repos/django/django/contrib/admin/checks.py_BaseModelAdminChecks._check_prepopulated_fields_value_item_BaseModelAdminChecks._check_ordering.3.4.1.1",
      "distance": 1.1507019996643066,
      "file_path": "django/contrib/admin/checks.py",
      "start_line": 546,
      "end_line": 569,
      "tokens": 230,
      "context_length": 34168
    },
    {
      "position": 90,
      "id": "/tmp/repos/django/django/db/models/manager.py_copy_BaseManager.creation_counter.__hash__.1.1",
      "distance": 1.1508984565734863,
      "file_path": "django/db/models/manager.py",
      "start_line": 1,
      "end_line": 165,
      "tokens": 1242,
      "context_length": 35410
    },
    {
      "position": 91,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler.ordering_parts.get_select_for_update_of_arguments_SQLCompiler.ordering_parts.get_select_for_update_of_arguments._get_parent_klass_info.2.2",
      "distance": 1.1514613628387451,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 1017,
      "end_line": 1039,
      "tokens": 207,
      "context_length": 35617,
      "file_pos": 22
    },
    {
      "position": 92,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLUpdateCompiler.pre_sql_setup_SQLUpdateCompiler.pre_sql_setup.19",
      "distance": 1.151951551437378,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 1601,
      "end_line": 1641,
      "tokens": 406,
      "context_length": 36023,
      "file_pos": 22
    },
    {
      "position": 93,
      "id": "/tmp/repos/django/django/db/models/fields/related_lookups.py_RelatedIn_RelatedIn.get_prep_lookup.2.1",
      "distance": 1.1522645950317383,
      "file_path": "django/db/models/fields/related_lookups.py",
      "start_line": 49,
      "end_line": 63,
      "tokens": 224,
      "context_length": 36247
    },
    {
      "position": 94,
      "id": "/tmp/repos/django/django/db/models/manager.py_Manager_",
      "distance": 1.1524548530578613,
      "file_path": "django/db/models/manager.py",
      "start_line": 168,
      "end_line": 204,
      "tokens": 201,
      "context_length": 36448
    },
    {
      "position": 95,
      "id": "/tmp/repos/django/django/db/models/indexes.py_IndexExpression.resolve_expression_",
      "distance": 1.1532124280929565,
      "file_path": "django/db/models/indexes.py",
      "start_line": 210,
      "end_line": 271,
      "tokens": 480,
      "context_length": 36928
    },
    {
      "position": 96,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLInsertCompiler.as_sql_SQLInsertCompiler.as_sql.qn.16.4.2.1",
      "distance": 1.153367280960083,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 1367,
      "end_line": 1426,
      "tokens": 617,
      "context_length": 37545,
      "file_pos": 23
    },
    {
      "position": 97,
      "id": "/tmp/repos/django/django/db/models/base.py_Model._check_model_name_db_lookup_clashes_Model._check_model_name_db_lookup_clashes.4.1",
      "distance": 1.1564277410507202,
      "file_path": "django/db/models/base.py",
      "start_line": 1522,
      "end_line": 1544,
      "tokens": 171,
      "context_length": 37716
    },
    {
      "position": 98,
      "id": "/tmp/repos/django/django/db/models/deletion.py_1_get_candidate_relations_to_delete.3.1",
      "distance": 1.156504511833191,
      "file_path": "django/db/models/deletion.py",
      "start_line": 1,
      "end_line": 75,
      "tokens": 561,
      "context_length": 38277
    },
    {
      "position": 99,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.add_extra_Query.clear_deferred_loading.self.deferred_loading.1",
      "distance": 1.1569807529449463,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 2035,
      "end_line": 2069,
      "tokens": 295,
      "context_length": 38572,
      "file_pos": 24
    },
    {
      "position": 100,
      "id": "/tmp/repos/django/django/db/models/expressions.py_ResolvedOuterRef_OuterRef.relabeled_clone.1.1",
      "distance": 1.158163070678711,
      "file_path": "django/db/models/expressions.py",
      "start_line": 612,
      "end_line": 651,
      "tokens": 290,
      "context_length": 38862,
      "file_pos": 24
    },
    {
      "position": 101,
      "id": "/tmp/repos/django/django/contrib/admin/views/main.py_ChangeList.get_queryset_ChangeList.get_queryset.2",
      "distance": 1.158341407775879,
      "file_path": "django/contrib/admin/views/main.py",
      "start_line": 452,
      "end_line": 507,
      "tokens": 463,
      "context_length": 39325
    },
    {
      "position": 102,
      "id": "/tmp/repos/django/django/db/migrations/questioner.py_NonInteractiveMigrationQuestioner_",
      "distance": 1.1592063903808594,
      "file_path": "django/db/migrations/questioner.py",
      "start_line": 233,
      "end_line": 246,
      "tokens": 123,
      "context_length": 39448
    },
    {
      "position": 103,
      "id": "/tmp/repos/django/django/db/models/query.py_RawQuerySet.resolve_model_init_order_RawQuerySet.resolve_model_init_order.7.1",
      "distance": 1.1593387126922607,
      "file_path": "django/db/models/query.py",
      "start_line": 1475,
      "end_line": 1483,
      "tokens": 136,
      "context_length": 39584
    },
    {
      "position": 104,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.has_select_fields_Query.get_meta.2.1",
      "distance": 1.1603167057037354,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 243,
      "end_line": 289,
      "tokens": 344,
      "context_length": 39928,
      "file_pos": 26
    },
    {
      "position": 105,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler.ordering_parts._setup_joins_SQLCompiler.ordering_parts._setup_joins.5.1",
      "distance": 1.1604485511779785,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 794,
      "end_line": 805,
      "tokens": 163,
      "context_length": 40091,
      "file_pos": 26
    },
    {
      "position": 106,
      "id": "/tmp/repos/django/django/db/models/fields/related.py_RelatedField._check_related_query_name_is_valid_RelatedField._check_related_query_name_is_valid.6.1",
      "distance": 1.1611958742141724,
      "file_path": "django/db/models/fields/related.py",
      "start_line": 139,
      "end_line": 166,
      "tokens": 201,
      "context_length": 40292
    },
    {
      "position": 107,
      "id": "/tmp/repos/django/django/db/models/expressions.py_Case.as_sql_Case.get_group_by_cols.2.1",
      "distance": 1.162168264389038,
      "file_path": "django/db/models/expressions.py",
      "start_line": 1077,
      "end_line": 1107,
      "tokens": 281,
      "context_length": 40573,
      "file_pos": 26
    },
    {
      "position": 108,
      "id": "/tmp/repos/django/django/db/models/base.py_Model._check_local_fields_Model._check_local_fields.8.1",
      "distance": 1.1628742218017578,
      "file_path": "django/db/models/base.py",
      "start_line": 1723,
      "end_line": 1771,
      "tokens": 348,
      "context_length": 40921
    },
    {
      "position": 109,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler.ordering_parts.get_extra_select_SQLCompiler.ordering_parts.get_extra_select.3.1",
      "distance": 1.1634923219680786,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 427,
      "end_line": 435,
      "tokens": 133,
      "context_length": 41054,
      "file_pos": 26
    },
    {
      "position": 110,
      "id": "/tmp/repos/django/django/db/models/expressions.py_RawSQL_RawSQL.get_group_by_cols.1.1",
      "distance": 1.1635162830352783,
      "file_path": "django/db/models/expressions.py",
      "start_line": 804,
      "end_line": 818,
      "tokens": 120,
      "context_length": 41174,
      "file_pos": 26
    },
    {
      "position": 111,
      "id": "/tmp/repos/django/django/db/backends/base/features.py_1_BaseDatabaseFeatures.82",
      "distance": 1.163541555404663,
      "file_path": "django/db/backends/base/features.py",
      "start_line": 1,
      "end_line": 112,
      "tokens": 895,
      "context_length": 42069
    },
    {
      "position": 112,
      "id": "/tmp/repos/django/django/db/models/sql/compiler.py_SQLCompiler.ordering_parts.get_related_selections_SQLCompiler.ordering_parts.get_related_selections.12.14",
      "distance": 1.1636680364608765,
      "file_path": "django/db/models/sql/compiler.py",
      "start_line": 841,
      "end_line": 921,
      "tokens": 717,
      "context_length": 42786,
      "file_pos": 27
    },
    {
      "position": 113,
      "id": "/tmp/repos/django/django/core/management/commands/inspectdb.py_Command.handle_inspection_Command.handle_inspection.5.15.14",
      "distance": 1.1658780574798584,
      "file_path": "django/core/management/commands/inspectdb.py",
      "start_line": 38,
      "end_line": 173,
      "tokens": 1291,
      "context_length": 44077
    },
    {
      "position": 114,
      "id": "/tmp/repos/django/django/db/models/sql/subqueries.py_UpdateQuery.add_related_update_UpdateQuery.get_related_updates.5.1",
      "distance": 1.1663994789123535,
      "file_path": "django/db/models/sql/subqueries.py",
      "start_line": 112,
      "end_line": 135,
      "tokens": 192,
      "context_length": 44269
    },
    {
      "position": 115,
      "id": "/tmp/repos/django/django/db/models/base.py_Model._perform_date_checks_Model._perform_date_checks.3.1",
      "distance": 1.1669434309005737,
      "file_path": "django/db/models/base.py",
      "start_line": 1132,
      "end_line": 1159,
      "tokens": 286,
      "context_length": 44555
    },
    {
      "position": 116,
      "id": "/tmp/repos/django/django/forms/models.py_BaseModelFormSet.get_queryset_BaseModelFormSet.get_queryset.2.1",
      "distance": 1.1679284572601318,
      "file_path": "django/forms/models.py",
      "start_line": 635,
      "end_line": 652,
      "tokens": 167,
      "context_length": 44722
    },
    {
      "position": 117,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query.set_empty_Query.set_limits.4.1",
      "distance": 1.1684739589691162,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1812,
      "end_line": 1841,
      "tokens": 259,
      "context_length": 44981,
      "file_pos": 29
    },
    {
      "position": 118,
      "id": "/tmp/repos/django/django/db/models/lookups.py_In.split_parameter_list_as_sql_In.split_parameter_list_as_sql.max_in_list_size.8.1",
      "distance": 1.1687736511230469,
      "file_path": "django/db/models/lookups.py",
      "start_line": 446,
      "end_line": 466,
      "tokens": 243,
      "context_length": 45224
    },
    {
      "position": 119,
      "id": "/tmp/repos/django/django/db/models/query.py_Prefetch_Prefetch.__hash__.1.1",
      "distance": 1.169243335723877,
      "file_path": "django/db/models/query.py",
      "start_line": 1607,
      "end_line": 1663,
      "tokens": 487,
      "context_length": 45711
    },
    {
      "position": 120,
      "id": "/tmp/repos/django/django/db/models/query.py_QuerySet.earliest_QuerySet.last.2.1.1",
      "distance": 1.1692566871643066,
      "file_path": "django/db/models/query.py",
      "start_line": 673,
      "end_line": 691,
      "tokens": 178,
      "context_length": 45889
    },
    {
      "position": 121,
      "id": "/tmp/repos/django/django/db/models/fields/related.py_functools_RECURSIVE_RELATIONSHIP_CONSTANT.1",
      "distance": 1.1702666282653809,
      "file_path": "django/db/models/fields/related.py",
      "start_line": 1,
      "end_line": 34,
      "tokens": 246,
      "context_length": 46135
    },
    {
      "position": 122,
      "id": "/tmp/repos/django/django/contrib/contenttypes/fields.py_GenericForeignKey.get_prefetch_queryset_GenericForeignKey.get_prefetch_queryset.14.1",
      "distance": 1.1703145503997803,
      "file_path": "django/contrib/contenttypes/fields.py",
      "start_line": 173,
      "end_line": 217,
      "tokens": 411,
      "context_length": 46546
    },
    {
      "position": 123,
      "id": "/tmp/repos/django/django/db/models/indexes.py_Index.__repr___Index.__eq__.2.1",
      "distance": 1.1707730293273926,
      "file_path": "django/db/models/indexes.py",
      "start_line": 172,
      "end_line": 189,
      "tokens": 205,
      "context_length": 46751
    },
    {
      "position": 124,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_Query._add_q_Query._add_q.9.1",
      "distance": 1.1708874702453613,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 1385,
      "end_line": 1404,
      "tokens": 245,
      "context_length": 46996,
      "file_pos": 30
    },
    {
      "position": 125,
      "id": "/tmp/repos/django/django/db/models/expressions.py_Value._resolve_output_field_Value.empty_aggregate_value.1.1",
      "distance": 1.1709264516830444,
      "file_path": "django/db/models/expressions.py",
      "start_line": 775,
      "end_line": 801,
      "tokens": 184,
      "context_length": 47180,
      "file_pos": 30
    },
    {
      "position": 126,
      "id": "/tmp/repos/django/django/db/models/sql/query.py_RawQuery_RawQuery.__str__.2.1",
      "distance": 1.1724047660827637,
      "file_path": "django/db/models/sql/query.py",
      "start_line": 65,
      "end_line": 117,
      "tokens": 384,
      "context_length": 47564,
      "file_pos": 30
    },
    {
      "position": 127,
      "id": "/tmp/repos/django/django/db/models/base.py_35_",
      "distance": 1.172425627708435,
      "file_path": "django/db/models/base.py",
      "start_line": 2127,
      "end_line": 2178,
      "tokens": 351,
      "context_length": 47915
    },
    {
      "position": 128,
      "id": "/tmp/repos/django/django/db/backends/base/schema.py_BaseDatabaseSchemaEditor._create_unique_sql_BaseDatabaseSchemaEditor._create_unique_sql.9.1",
      "distance": 1.17295241355896,
      "file_path": "django/db/backends/base/schema.py",
      "start_line": 1246,
      "end_line": 1287,
      "tokens": 357,
      "context_length": 48272
    }
  ],
  "files": [
    {
      "file_path": "django/db/models/query.py",
      "position": 1,
      "tokens": 17659,
      "context_length": 17659
    },
    {
      "file_path": "django/db/models/sql/query.py",
      "position": 2,
      "tokens": 22345,
      "context_length": 40004
    },
    {
      "file_path": "django/db/models/sql/compiler.py",
      "position": 3,
      "tokens": 14750,
      "context_length": 54754
    },
    {
      "file_path": "django/db/models/sql/where.py",
      "position": 4,
      "tokens": 1933,
      "context_length": 56687
    },
    {
      "file_path": "django/db/models/__init__.py",
      "position": 5,
      "tokens": 619,
      "context_length": 57306
    },
    {
      "file_path": "django/db/models/expressions.py",
      "position": 6,
      "tokens": 11111,
      "context_length": 68417
    },
    {
      "file_path": "django/db/models/aggregates.py",
      "position": 7,
      "tokens": 1415,
      "context_length": 69832
    },
    {
      "file_path": "django/db/models/fields/related_lookups.py",
      "position": 8,
      "tokens": 1469,
      "context_length": 71301
    },
    {
      "file_path": "django/db/models/fields/related.py",
      "position": 9,
      "tokens": 13970,
      "context_length": 85271
    },
    {
      "file_path": "django/contrib/postgres/aggregates/general.py",
      "position": 10,
      "tokens": 795,
      "context_length": 86066
    },
    {
      "file_path": "django/db/models/query_utils.py",
      "position": 11,
      "tokens": 2488,
      "context_length": 88554
    },
    {
      "file_path": "django/db/backends/mysql/compiler.py",
      "position": 12,
      "tokens": 594,
      "context_length": 89148
    },
    {
      "file_path": "django/db/models/sql/subqueries.py",
      "position": 13,
      "tokens": 1188,
      "context_length": 90336
    },
    {
      "file_path": "django/db/models/base.py",
      "position": 14,
      "tokens": 17330,
      "context_length": 107666
    },
    {
      "file_path": "django/contrib/postgres/aggregates/statistics.py",
      "position": 15,
      "tokens": 417,
      "context_length": 108083
    },
    {
      "file_path": "django/db/models/lookups.py",
      "position": 16,
      "tokens": 5339,
      "context_length": 113422
    },
    {
      "file_path": "django/contrib/admin/options.py",
      "position": 17,
      "tokens": 18692,
      "context_length": 132114
    },
    {
      "file_path": "django/db/models/options.py",
      "position": 18,
      "tokens": 7367,
      "context_length": 139481
    },
    {
      "file_path": "django/contrib/admin/filters.py",
      "position": 19,
      "tokens": 4130,
      "context_length": 143611
    },
    {
      "file_path": "django/contrib/gis/db/models/__init__.py",
      "position": 20,
      "tokens": 204,
      "context_length": 143815
    },
    {
      "file_path": "django/contrib/admin/checks.py",
      "position": 21,
      "tokens": 9182,
      "context_length": 152997
    },
    {
      "file_path": "django/db/models/manager.py",
      "position": 22,
      "tokens": 1443,
      "context_length": 154440
    },
    {
      "file_path": "django/db/models/indexes.py",
      "position": 23,
      "tokens": 2323,
      "context_length": 156763
    },
    {
      "file_path": "django/db/models/deletion.py",
      "position": 24,
      "tokens": 3830,
      "context_length": 160593
    },
    {
      "file_path": "django/contrib/admin/views/main.py",
      "position": 25,
      "tokens": 4467,
      "context_length": 165060
    },
    {
      "file_path": "django/db/migrations/questioner.py",
      "position": 26,
      "tokens": 2050,
      "context_length": 167110
    },
    {
      "file_path": "django/db/backends/base/features.py",
      "position": 27,
      "tokens": 3007,
      "context_length": 170117
    },
    {
      "file_path": "django/core/management/commands/inspectdb.py",
      "position": 28,
      "tokens": 2633,
      "context_length": 172750
    },
    {
      "file_path": "django/forms/models.py",
      "position": 29,
      "tokens": 11905,
      "context_length": 184655
    },
    {
      "file_path": "django/contrib/contenttypes/fields.py",
      "position": 30,
      "tokens": 5458,
      "context_length": 190113
    },
    {
      "file_path": "django/db/backends/base/schema.py",
      "position": 31,
      "tokens": 12882,
      "context_length": 202995
    }
  ]
}