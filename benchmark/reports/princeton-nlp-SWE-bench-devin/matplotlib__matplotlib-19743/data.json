{
  "instance_id": "matplotlib__matplotlib-19743",
  "model_patch": "diff --git a/lib/matplotlib/_constrained_layout.py b/lib/matplotlib/_constrained_layout.py\nindex 9966033006..2225cfd767 100644\n--- a/lib/matplotlib/_constrained_layout.py\n+++ b/lib/matplotlib/_constrained_layout.py\n@@ -344,6 +344,12 @@ def make_layout_margins(layoutgrids, fig, renderer, *, w_pad=0, h_pad=0,\n \n     Then make room for colorbars.\n     \"\"\"\n+    # Set default values for hspace and wspace if None\n+    if hspace is None:\n+        hspace = 0\n+    if wspace is None:\n+        wspace = 0\n+\n     for sfig in fig.subfigs:  # recursively make child panel margins\n         ss = sfig._subplotspec\n         make_layout_margins(layoutgrids, sfig, renderer,\n@@ -457,6 +463,16 @@ def make_margin_suptitles(layoutgrids, fig, renderer, *, w_pad=0, h_pad=0):\n             bbox = inv_trans_fig(fig._supylabel.get_tightbbox(renderer))\n             layoutgrids[fig].edit_margin_min('left', bbox.width + 2 * w_pad)\n \n+    # Handle figure legends:\n+    for legend in fig.legends:\n+        if legend.get_in_layout():\n+            bbox = legend.get_window_extent(renderer)\n+            bbox = bbox.transformed(fig.transFigure.inverted())\n+            layoutgrids[fig].edit_margin_min('right', bbox.width)\n+            layoutgrids[fig].edit_margin_min('top', bbox.height)\n+\n+    reset_margins(layoutgrids, fig)\n+\n \n def match_submerged_margins(layoutgrids, fig):\n     \"\"\"\n@@ -570,8 +586,8 @@ def get_cb_parent_spans(cbax):\n         colstart = min(ss.colspan.start, colstart)\n         colstop = max(ss.colspan.stop, colstop)\n \n-    rowspan = range(rowstart, rowstop)\n-    colspan = range(colstart, colstop)\n+    rowspan = range(int(rowstart), int(rowstop))\n+    colspan = range(int(colstart), int(colstop))\n     return rowspan, colspan\n \n \n@@ -608,6 +624,12 @@ def reposition_axes(layoutgrids, fig, renderer, *,\n     \"\"\"\n     Reposition all the axes based on the new inner bounding box.\n     \"\"\"\n+    # Set default values for hspace and wspace if None\n+    if hspace is None:\n+        hspace = 0\n+    if wspace is None:\n+        wspace = 0\n+\n     trans_fig_to_subfig = fig.transFigure - fig.transSubfigure\n     for sfig in fig.subfigs:\n         bbox = layoutgrids[sfig].get_outer_bbox()\n@@ -665,6 +687,9 @@ def reposition_colorbar(layoutgrids, cbax, renderer, *, offset=None):\n         account for multiple colorbars\n     \"\"\"\n \n+    if offset is None:\n+        offset = {'left': 0, 'right': 0, 'bottom': 0, 'top': 0}\n+\n     parents = cbax._colorbar_info['parents']\n     gs = parents[0].get_gridspec()\n     fig = cbax.figure\n@@ -747,16 +772,16 @@ def reset_margins(layoutgrids, fig):\n     layoutgrids[fig].reset_margins()\n \n \n-def colorbar_get_pad(layoutgrids, cax):\n-    parents = cax._colorbar_info['parents']\n+def colorbar_get_pad(layoutgrids, cbax):\n+    parents = cbax._colorbar_info['parents']\n     gs = parents[0].get_gridspec()\n \n-    cb_rspans, cb_cspans = get_cb_parent_spans(cax)\n+    cb_rspans, cb_cspans = get_cb_parent_spans(cbax)\n     bboxouter = layoutgrids[gs].get_inner_bbox(rows=cb_rspans, cols=cb_cspans)\n \n-    if cax._colorbar_info['location'] in ['right', 'left']:\n+    if cbax._colorbar_info['location'] in ['right', 'left']:\n         size = bboxouter.width\n     else:\n         size = bboxouter.height\n \n-    return cax._colorbar_info['pad'] * size\n+    return cbax._colorbar_info['pad'] * size\n",
  "model_name_or_path": "Devin",
  "pass_or_fail": "fail",
  "model_patch_files": [
    "lib/matplotlib/_constrained_layout.py"
  ],
  "repo": "matplotlib/matplotlib",
  "base_commit": "5793ebb2201bf778f08ac1d4cd0b8dd674c96053",
  "patch": "diff --git a/examples/text_labels_and_annotations/figlegend_demo.py b/examples/text_labels_and_annotations/figlegend_demo.py\n--- a/examples/text_labels_and_annotations/figlegend_demo.py\n+++ b/examples/text_labels_and_annotations/figlegend_demo.py\n@@ -28,3 +28,26 @@\n \n plt.tight_layout()\n plt.show()\n+\n+##############################################################################\n+# Sometimes we do not want the legend to overlap the axes.  If you use\n+# constrained_layout you can specify \"outside right upper\", and\n+# constrained_layout will make room for the legend.\n+\n+fig, axs = plt.subplots(1, 2, layout='constrained')\n+\n+x = np.arange(0.0, 2.0, 0.02)\n+y1 = np.sin(2 * np.pi * x)\n+y2 = np.exp(-x)\n+l1, = axs[0].plot(x, y1)\n+l2, = axs[0].plot(x, y2, marker='o')\n+\n+y3 = np.sin(4 * np.pi * x)\n+y4 = np.exp(-2 * x)\n+l3, = axs[1].plot(x, y3, color='tab:green')\n+l4, = axs[1].plot(x, y4, color='tab:red', marker='^')\n+\n+fig.legend((l1, l2), ('Line 1', 'Line 2'), loc='upper left')\n+fig.legend((l3, l4), ('Line 3', 'Line 4'), loc='outside right upper')\n+\n+plt.show()\ndiff --git a/lib/matplotlib/_constrained_layout.py b/lib/matplotlib/_constrained_layout.py\n--- a/lib/matplotlib/_constrained_layout.py\n+++ b/lib/matplotlib/_constrained_layout.py\n@@ -418,6 +418,25 @@ def make_layout_margins(layoutgrids, fig, renderer, *, w_pad=0, h_pad=0,\n         # pass the new margins down to the layout grid for the solution...\n         layoutgrids[gs].edit_outer_margin_mins(margin, ss)\n \n+    # make margins for figure-level legends:\n+    for leg in fig.legends:\n+        inv_trans_fig = None\n+        if leg._outside_loc and leg._bbox_to_anchor is None:\n+            if inv_trans_fig is None:\n+                inv_trans_fig = fig.transFigure.inverted().transform_bbox\n+            bbox = inv_trans_fig(leg.get_tightbbox(renderer))\n+            w = bbox.width + 2 * w_pad\n+            h = bbox.height + 2 * h_pad\n+            legendloc = leg._outside_loc\n+            if legendloc == 'lower':\n+                layoutgrids[fig].edit_margin_min('bottom', h)\n+            elif legendloc == 'upper':\n+                layoutgrids[fig].edit_margin_min('top', h)\n+            if legendloc == 'right':\n+                layoutgrids[fig].edit_margin_min('right', w)\n+            elif legendloc == 'left':\n+                layoutgrids[fig].edit_margin_min('left', w)\n+\n \n def make_margin_suptitles(layoutgrids, fig, renderer, *, w_pad=0, h_pad=0):\n     # Figure out how large the suptitle is and make the\ndiff --git a/lib/matplotlib/axes/_axes.py b/lib/matplotlib/axes/_axes.py\n--- a/lib/matplotlib/axes/_axes.py\n+++ b/lib/matplotlib/axes/_axes.py\n@@ -294,7 +294,7 @@ def legend(self, *args, **kwargs):\n \n         Other Parameters\n         ----------------\n-        %(_legend_kw_doc)s\n+        %(_legend_kw_axes)s\n \n         See Also\n         --------\ndiff --git a/lib/matplotlib/figure.py b/lib/matplotlib/figure.py\n--- a/lib/matplotlib/figure.py\n+++ b/lib/matplotlib/figure.py\n@@ -1085,7 +1085,8 @@ def legend(self, *args, **kwargs):\n \n         Other Parameters\n         ----------------\n-        %(_legend_kw_doc)s\n+        %(_legend_kw_figure)s\n+\n \n         See Also\n         --------\ndiff --git a/lib/matplotlib/legend.py b/lib/matplotlib/legend.py\n--- a/lib/matplotlib/legend.py\n+++ b/lib/matplotlib/legend.py\n@@ -94,51 +94,7 @@ def _update_bbox_to_anchor(self, loc_in_canvas):\n         self.legend.set_bbox_to_anchor(loc_in_bbox)\n \n \n-_docstring.interpd.update(_legend_kw_doc=\"\"\"\n-loc : str or pair of floats, default: :rc:`legend.loc` ('best' for axes, \\\n-'upper right' for figures)\n-    The location of the legend.\n-\n-    The strings\n-    ``'upper left', 'upper right', 'lower left', 'lower right'``\n-    place the legend at the corresponding corner of the axes/figure.\n-\n-    The strings\n-    ``'upper center', 'lower center', 'center left', 'center right'``\n-    place the legend at the center of the corresponding edge of the\n-    axes/figure.\n-\n-    The string ``'center'`` places the legend at the center of the axes/figure.\n-\n-    The string ``'best'`` places the legend at the location, among the nine\n-    locations defined so far, with the minimum overlap with other drawn\n-    artists.  This option can be quite slow for plots with large amounts of\n-    data; your plotting speed may benefit from providing a specific location.\n-\n-    The location can also be a 2-tuple giving the coordinates of the lower-left\n-    corner of the legend in axes coordinates (in which case *bbox_to_anchor*\n-    will be ignored).\n-\n-    For back-compatibility, ``'center right'`` (but no other location) can also\n-    be spelled ``'right'``, and each \"string\" locations can also be given as a\n-    numeric value:\n-\n-        ===============   =============\n-        Location String   Location Code\n-        ===============   =============\n-        'best'            0\n-        'upper right'     1\n-        'upper left'      2\n-        'lower left'      3\n-        'lower right'     4\n-        'right'           5\n-        'center left'     6\n-        'center right'    7\n-        'lower center'    8\n-        'upper center'    9\n-        'center'          10\n-        ===============   =============\n-\n+_legend_kw_doc_base = \"\"\"\n bbox_to_anchor : `.BboxBase`, 2-tuple, or 4-tuple of floats\n     Box that is used to position the legend in conjunction with *loc*.\n     Defaults to `axes.bbox` (if called as a method to `.Axes.legend`) or\n@@ -295,7 +251,79 @@ def _update_bbox_to_anchor(self, loc_in_canvas):\n \n draggable : bool, default: False\n     Whether the legend can be dragged with the mouse.\n-\"\"\")\n+\"\"\"\n+\n+_loc_doc_base = \"\"\"\n+loc : str or pair of floats, {0}\n+    The location of the legend.\n+\n+    The strings\n+    ``'upper left', 'upper right', 'lower left', 'lower right'``\n+    place the legend at the corresponding corner of the axes/figure.\n+\n+    The strings\n+    ``'upper center', 'lower center', 'center left', 'center right'``\n+    place the legend at the center of the corresponding edge of the\n+    axes/figure.\n+\n+    The string ``'center'`` places the legend at the center of the axes/figure.\n+\n+    The string ``'best'`` places the legend at the location, among the nine\n+    locations defined so far, with the minimum overlap with other drawn\n+    artists.  This option can be quite slow for plots with large amounts of\n+    data; your plotting speed may benefit from providing a specific location.\n+\n+    The location can also be a 2-tuple giving the coordinates of the lower-left\n+    corner of the legend in axes coordinates (in which case *bbox_to_anchor*\n+    will be ignored).\n+\n+    For back-compatibility, ``'center right'`` (but no other location) can also\n+    be spelled ``'right'``, and each \"string\" locations can also be given as a\n+    numeric value:\n+\n+        ===============   =============\n+        Location String   Location Code\n+        ===============   =============\n+        'best'            0\n+        'upper right'     1\n+        'upper left'      2\n+        'lower left'      3\n+        'lower right'     4\n+        'right'           5\n+        'center left'     6\n+        'center right'    7\n+        'lower center'    8\n+        'upper center'    9\n+        'center'          10\n+        ===============   =============\n+    {1}\"\"\"\n+\n+_legend_kw_axes_st = (_loc_doc_base.format(\"default: :rc:`legend.loc`\", '') +\n+                      _legend_kw_doc_base)\n+_docstring.interpd.update(_legend_kw_axes=_legend_kw_axes_st)\n+\n+_outside_doc = \"\"\"\n+    If a figure is using the constrained layout manager, the string codes\n+    of the *loc* keyword argument can get better layout behaviour using the\n+    prefix 'outside'. There is ambiguity at the corners, so 'outside\n+    upper right' will make space for the legend above the rest of the\n+    axes in the layout, and 'outside right upper' will make space on the\n+    right side of the layout.  In addition to the values of *loc*\n+    listed above, we have 'outside right upper', 'outside right lower',\n+    'outside left upper', and 'outside left lower'.  See\n+    :doc:`/tutorials/intermediate/legend_guide` for more details.\n+\"\"\"\n+\n+_legend_kw_figure_st = (_loc_doc_base.format(\"default: 'upper right'\",\n+                                             _outside_doc) +\n+                        _legend_kw_doc_base)\n+_docstring.interpd.update(_legend_kw_figure=_legend_kw_figure_st)\n+\n+_legend_kw_both_st = (\n+    _loc_doc_base.format(\"default: 'best' for axes, 'upper right' for figures\",\n+                         _outside_doc) +\n+    _legend_kw_doc_base)\n+_docstring.interpd.update(_legend_kw_doc=_legend_kw_both_st)\n \n \n class Legend(Artist):\n@@ -482,13 +510,37 @@ def val_or_rc(val, rc_name):\n             )\n         self.parent = parent\n \n+        loc0 = loc\n         self._loc_used_default = loc is None\n         if loc is None:\n             loc = mpl.rcParams[\"legend.loc\"]\n             if not self.isaxes and loc in [0, 'best']:\n                 loc = 'upper right'\n+\n+        # handle outside legends:\n+        self._outside_loc = None\n         if isinstance(loc, str):\n+            if loc.split()[0] == 'outside':\n+                # strip outside:\n+                loc = loc.split('outside ')[1]\n+                # strip \"center\" at the beginning\n+                self._outside_loc = loc.replace('center ', '')\n+                # strip first\n+                self._outside_loc = self._outside_loc.split()[0]\n+                locs = loc.split()\n+                if len(locs) > 1 and locs[0] in ('right', 'left'):\n+                    # locs doesn't accept \"left upper\", etc, so swap\n+                    if locs[0] != 'center':\n+                        locs = locs[::-1]\n+                    loc = locs[0] + ' ' + locs[1]\n+            # check that loc is in acceptable strings\n             loc = _api.check_getitem(self.codes, loc=loc)\n+\n+        if self.isaxes and self._outside_loc:\n+            raise ValueError(\n+                f\"'outside' option for loc='{loc0}' keyword argument only \"\n+                \"works for figure legends\")\n+\n         if not self.isaxes and loc == 0:\n             raise ValueError(\n                 \"Automatic legend placement (loc='best') not implemented for \"\ndiff --git a/tutorials/intermediate/legend_guide.py b/tutorials/intermediate/legend_guide.py\n--- a/tutorials/intermediate/legend_guide.py\n+++ b/tutorials/intermediate/legend_guide.py\n@@ -135,7 +135,54 @@\n ax_dict['bottom'].legend(bbox_to_anchor=(1.05, 1),\n                          loc='upper left', borderaxespad=0.)\n \n-plt.show()\n+##############################################################################\n+# Figure legends\n+# --------------\n+#\n+# Sometimes it makes more sense to place a legend relative to the (sub)figure\n+# rather than individual Axes.  By using ``constrained_layout`` and\n+# specifying \"outside\" at the beginning of the *loc* keyword argument,\n+# the legend is drawn outside the Axes on the (sub)figure.\n+\n+fig, axs = plt.subplot_mosaic([['left', 'right']], layout='constrained')\n+\n+axs['left'].plot([1, 2, 3], label=\"test1\")\n+axs['left'].plot([3, 2, 1], label=\"test2\")\n+\n+axs['right'].plot([1, 2, 3], 'C2', label=\"test3\")\n+axs['right'].plot([3, 2, 1], 'C3', label=\"test4\")\n+# Place a legend to the right of this smaller subplot.\n+fig.legend(loc='outside upper right')\n+\n+##############################################################################\n+# This accepts a slightly different grammar than the normal *loc* keyword,\n+# where \"outside right upper\" is different from \"outside upper right\".\n+#\n+ucl = ['upper', 'center', 'lower']\n+lcr = ['left', 'center', 'right']\n+fig, ax = plt.subplots(figsize=(6, 4), layout='constrained', facecolor='0.7')\n+\n+ax.plot([1, 2], [1, 2], label='TEST')\n+# Place a legend to the right of this smaller subplot.\n+for loc in [\n+        'outside upper left',\n+        'outside upper center',\n+        'outside upper right',\n+        'outside lower left',\n+        'outside lower center',\n+        'outside lower right']:\n+    fig.legend(loc=loc, title=loc)\n+\n+fig, ax = plt.subplots(figsize=(6, 4), layout='constrained', facecolor='0.7')\n+ax.plot([1, 2], [1, 2], label='test')\n+\n+for loc in [\n+        'outside left upper',\n+        'outside right upper',\n+        'outside left lower',\n+        'outside right lower']:\n+    fig.legend(loc=loc, title=loc)\n+\n \n ###############################################################################\n # Multiple legends on the same Axes\n",
  "test_patch": "diff --git a/lib/matplotlib/tests/test_legend.py b/lib/matplotlib/tests/test_legend.py\n--- a/lib/matplotlib/tests/test_legend.py\n+++ b/lib/matplotlib/tests/test_legend.py\n@@ -4,6 +4,7 @@\n import warnings\n \n import numpy as np\n+from numpy.testing import assert_allclose\n import pytest\n \n from matplotlib.testing.decorators import check_figures_equal, image_comparison\n@@ -18,7 +19,6 @@\n import matplotlib.legend as mlegend\n from matplotlib import rc_context\n from matplotlib.font_manager import FontProperties\n-from numpy.testing import assert_allclose\n \n \n def test_legend_ordereddict():\n@@ -486,6 +486,47 @@ def test_warn_args_kwargs(self):\n             \"be discarded.\")\n \n \n+def test_figure_legend_outside():\n+    todos = ['upper ' + pos for pos in ['left', 'center', 'right']]\n+    todos += ['lower ' + pos for pos in ['left', 'center', 'right']]\n+    todos += ['left ' + pos for pos in ['lower', 'center', 'upper']]\n+    todos += ['right ' + pos for pos in ['lower', 'center', 'upper']]\n+\n+    upperext = [20.347556,  27.722556, 790.583, 545.499]\n+    lowerext = [20.347556,  71.056556, 790.583, 588.833]\n+    leftext = [151.681556, 27.722556, 790.583, 588.833]\n+    rightext = [20.347556,  27.722556, 659.249, 588.833]\n+    axbb = [upperext, upperext, upperext,\n+            lowerext, lowerext, lowerext,\n+            leftext, leftext, leftext,\n+            rightext, rightext, rightext]\n+\n+    legbb = [[10., 555., 133., 590.],     # upper left\n+             [338.5, 555., 461.5, 590.],  # upper center\n+             [667, 555., 790.,  590.],    # upper right\n+             [10., 10., 133.,  45.],      # lower left\n+             [338.5, 10., 461.5,  45.],   # lower center\n+             [667., 10., 790.,  45.],     # lower right\n+             [10., 10., 133., 45.],       # left lower\n+             [10., 282.5, 133., 317.5],   # left center\n+             [10., 555., 133., 590.],     # left upper\n+             [667, 10., 790., 45.],       # right lower\n+             [667., 282.5, 790., 317.5],  # right center\n+             [667., 555., 790., 590.]]    # right upper\n+\n+    for nn, todo in enumerate(todos):\n+        print(todo)\n+        fig, axs = plt.subplots(constrained_layout=True, dpi=100)\n+        axs.plot(range(10), label='Boo1')\n+        leg = fig.legend(loc='outside ' + todo)\n+        fig.draw_without_rendering()\n+\n+        assert_allclose(axs.get_window_extent().extents,\n+                        axbb[nn])\n+        assert_allclose(leg.get_window_extent().extents,\n+                        legbb[nn])\n+\n+\n @image_comparison(['legend_stackplot.png'])\n def test_legend_stackplot():\n     \"\"\"Test legend for PolyCollection using stackplot.\"\"\"\n",
  "problem_statement": "constrained_layout support for figure.legend\nJust a feature request to have constrained_layout support `figure.legend`\n",
  "hints_text": "What behaviour would you expect?  \r\n\r\nIf you want the legend to steal space on the figure from the axes, then call `axes.legend` with the correct handles and it will make room.  \nYes. Here's an example from seaborn. I would expect this to be the result of `figure.legend(handles, labels, loc='right')`\r\n\r\n![image](https://user-images.githubusercontent.com/2448579/50259219-07214f00-03b8-11e9-9527-dca898d66c17.png)\r\n\r\n\nHow would constrained layout know which subplots to steal space from for the legend?   A figure legend doesn\u2019t belong to any axes, so there is no natural way to do what you are asking.  \r\n\r\nAgain if you attach the legend to one of the rightmost axes, it will do what you want.  \n> How would constrained layout know which subplots to steal space from for the legend? \r\n\r\nDo what colorbar does? colorbar does have an `ax` argument though... hmmm.\r\n\r\nHere's an example. I'd like the `constrained_layout` version of this:\r\n\r\n``` python\r\nf, ax = plt.subplots(2, 2, sharex=True, sharey=True, constrained_layout=False)\r\nh = list()\r\nfor aa in ax.flat:\r\n    h.append(aa.plot(np.random.randn(5), np.random.randn(5), '*')[0])\r\n    h.append(aa.plot(np.random.randn(5), np.random.randn(5), '*')[0])\r\n\r\nhleg = f.legend(handles=h[-2:], labels=['a', 'b'],\r\n                loc='center right')\r\n```\r\n![mpl-test1](https://user-images.githubusercontent.com/2448579/50300034-05976b80-0438-11e9-8808-074d7669650b.png)\r\n\r\n\r\nHere's my attempt at a constrained_layout version using `ax.legend`. Is there a way to do this without the space between the two rows of subplots?\r\n\r\n``` python\r\nf, ax = plt.subplots(2, 2, sharex=True, sharey=True, constrained_layout=True)\r\nh = list()\r\nfor aa in ax.flat:\r\n    h.append(aa.plot(np.random.randn(5), np.random.randn(5), '*')[0])\r\n    h.append(aa.plot(np.random.randn(5), np.random.randn(5), '*')[0])\r\n\r\nhleg = ax[1, 1].legend(handles=h[-2:], labels=['a', 'b'],\r\n                       loc='center right',\r\n                       bbox_to_anchor=(1.2, 1.2))\r\n```\r\n![mpl-test2](https://user-images.githubusercontent.com/2448579/50300078-2c55a200-0438-11e9-8761-19dd6d97c65a.png)\r\n\nWhat is happening above is ax[1, 1] is saying it is bigger than the other axes, and makes space for itself in the layout.  To avoid this, don't anchor it above the top of the axes.  Yes, your legend will not be vertically centred. \r\n\r\nWe could come up with an API to automatically insert anchored boxes and steal space from the other elements in a gridspec (the container of your four subplots).  We do that now for suptitle (sort of) and, as you say, colorbar.  So the question is how to pass that info down to `fig.legend`.  I suppose we could add an `axs` kwarg.  \nThought about this some more, and its quite a hard problem. \r\n\r\n`figure.legend` allows more than one legend. Conversely, `figure.suptitle` only has one suptitle, so layout is easy.  `figure.colorbar` has a well-understood set of conventions for where colorbars go, but legends have been more free-form, with placement being arbitrary, and anchored using `bbox_to_anchor`.  \r\n\r\n\nIs it feasible to only add support for certain legend configurations in a first step? E.g. don\u2018t handle legends with `bbox_to_anchor` and/or certain `loc` values.\nI was going to say the same. The `loc` values should be well constrained and a good first step. Throw a warning and disable constrained_layout if `bbox_to_anchor` is set?\nHmmmm.  Not a fan of that.  Seems mysterious and a documentation PITA \r\n\r\nI was leaning towards a new method, ideally  attached to gridspec. That\u2019s easier from the point of view of being able to specify a new API.  \r\n\r\nI think conceptually this is easy enough to implement in constrained_layout.  But I\u2019m not sure about implementing without constrained_layout.  Legends are packable boxes and hence hard to predict their size a priori.  For instance they can be arbitrarily wide or high.  \r\n\r\nI\u2019d propose writing a separate method for now and then figure.legend could call that given the right conditions. \n> I\u2019d propose writing a separate method for now and then figure.legend could call that given the right conditions.\r\n\r\nSounds like a reasonable approach. Though, I'm not quite involved in this stuff, and therefore I'm not a good judge. Withdrawing from the discussion for now.\nI have a proof of concept that works great for this.  Up for ideas about how to specify locations and whether the arrangement with the rest of the gridspec is horizontal or vertical.   The typical location \u201cnortheast\u201d or \u201csoutheast\u201d is ambiguous because it doesn\u2019t specify if the gridspec\u2019s Axes give way vertically or horizontally.  We\u2019d could either have another kwarg, or let the `location=\u201cverticalnortheast\u201d` to specify vertical arrangement instead of horizontal (which I think would be the default for all locations except for \u201cnorth\u201d and \u201csouth\u201d)...\r\n\r\nSuggestions welcome.   For now, I think I\u2019ll go w/ implementing horizontal arrangement, and just not support \u201cnorth\u201d or \u201csouth\u201d (I.e. \u201cnortheast\u201d will arrange horizontally, with the legend in the upper right corner). \nUsing an extra kwarg `arrange=vertical` or `arrange=horizontal` seems less clunky than `verticalnortheast`",
  "created_at": "2021-03-19T05:13:17Z",
  "version": "3.3",
  "FAIL_TO_PASS": "[\"lib/matplotlib/tests/test_legend.py::test_figure_legend_outside\"]",
  "PASS_TO_PASS": "[\"lib/matplotlib/tests/test_legend.py::TestLegendFigureFunction::test_legend_handle_label\", \"lib/matplotlib/tests/test_legend.py::TestLegendFigureFunction::test_legend_kw_args\", \"lib/matplotlib/tests/test_legend.py::TestLegendFigureFunction::test_legend_label_arg\", \"lib/matplotlib/tests/test_legend.py::TestLegendFigureFunction::test_legend_label_three_args\", \"lib/matplotlib/tests/test_legend.py::TestLegendFigureFunction::test_legend_label_three_args_pluskw\", \"lib/matplotlib/tests/test_legend.py::TestLegendFigureFunction::test_legend_no_args\", \"lib/matplotlib/tests/test_legend.py::TestLegendFigureFunction::test_warn_args_kwargs\", \"lib/matplotlib/tests/test_legend.py::TestLegendFunction::test_legend_handler_map\", \"lib/matplotlib/tests/test_legend.py::TestLegendFunction::test_legend_kwargs_handles_labels\", \"lib/matplotlib/tests/test_legend.py::TestLegendFunction::test_legend_kwargs_handles_only\", \"lib/matplotlib/tests/test_legend.py::TestLegendFunction::test_legend_kwargs_labels_only\", \"lib/matplotlib/tests/test_legend.py::TestLegendFunction::test_legend_no_args\", \"lib/matplotlib/tests/test_legend.py::TestLegendFunction::test_legend_positional_handles_labels\", \"lib/matplotlib/tests/test_legend.py::TestLegendFunction::test_legend_positional_handles_only\", \"lib/matplotlib/tests/test_legend.py::TestLegendFunction::test_legend_positional_labels_only\", \"lib/matplotlib/tests/test_legend.py::TestLegendFunction::test_legend_three_args\", \"lib/matplotlib/tests/test_legend.py::TestLegendFunction::test_parasite\", \"lib/matplotlib/tests/test_legend.py::TestLegendFunction::test_warn_mixed_args_and_kwargs\", \"lib/matplotlib/tests/test_legend.py::test_alpha_handles\", \"lib/matplotlib/tests/test_legend.py::test_alpha_rcparam[png]\", \"lib/matplotlib/tests/test_legend.py::test_alpha_rgba[png]\", \"lib/matplotlib/tests/test_legend.py::test_cross_figure_patch_legend\", \"lib/matplotlib/tests/test_legend.py::test_empty_bar_chart_with_legend\", \"lib/matplotlib/tests/test_legend.py::test_fancy[pdf]\", \"lib/matplotlib/tests/test_legend.py::test_fancy[png]\", \"lib/matplotlib/tests/test_legend.py::test_framealpha[pdf]\", \"lib/matplotlib/tests/test_legend.py::test_framealpha[png]\", \"lib/matplotlib/tests/test_legend.py::test_get_set_draggable\", \"lib/matplotlib/tests/test_legend.py::test_handler_numpoints\", \"lib/matplotlib/tests/test_legend.py::test_handlerline2d\", \"lib/matplotlib/tests/test_legend.py::test_hatching[pdf]\", \"lib/matplotlib/tests/test_legend.py::test_hatching[png]\", \"lib/matplotlib/tests/test_legend.py::test_labels_first[png]\", \"lib/matplotlib/tests/test_legend.py::test_legend_alignment[center]\", \"lib/matplotlib/tests/test_legend.py::test_legend_alignment[left]\", \"lib/matplotlib/tests/test_legend.py::test_legend_alignment[right]\", \"lib/matplotlib/tests/test_legend.py::test_legend_auto1[pdf]\", \"lib/matplotlib/tests/test_legend.py::test_legend_auto1[png]\", \"lib/matplotlib/tests/test_legend.py::test_legend_auto2[pdf]\", \"lib/matplotlib/tests/test_legend.py::test_legend_auto2[png]\", \"lib/matplotlib/tests/test_legend.py::test_legend_auto3[pdf]\", \"lib/matplotlib/tests/test_legend.py::test_legend_auto3[png]\", \"lib/matplotlib/tests/test_legend.py::test_legend_auto4\", \"lib/matplotlib/tests/test_legend.py::test_legend_auto5\", \"lib/matplotlib/tests/test_legend.py::test_legend_draggable[False]\", \"lib/matplotlib/tests/test_legend.py::test_legend_draggable[True]\", \"lib/matplotlib/tests/test_legend.py::test_legend_expand[pdf]\", \"lib/matplotlib/tests/test_legend.py::test_legend_expand[png]\", \"lib/matplotlib/tests/test_legend.py::test_legend_face_edgecolor\", \"lib/matplotlib/tests/test_legend.py::test_legend_label_with_leading_underscore\", \"lib/matplotlib/tests/test_legend.py::test_legend_labelcolor_linecolor\", \"lib/matplotlib/tests/test_legend.py::test_legend_labelcolor_list\", \"lib/matplotlib/tests/test_legend.py::test_legend_labelcolor_markeredgecolor\", \"lib/matplotlib/tests/test_legend.py::test_legend_labelcolor_markerfacecolor\", \"lib/matplotlib/tests/test_legend.py::test_legend_labelcolor_rcparam_linecolor\", \"lib/matplotlib/tests/test_legend.py::test_legend_labelcolor_rcparam_markeredgecolor\", \"lib/matplotlib/tests/test_legend.py::test_legend_labelcolor_rcparam_markeredgecolor_short\", \"lib/matplotlib/tests/test_legend.py::test_legend_labelcolor_rcparam_markerfacecolor\", \"lib/matplotlib/tests/test_legend.py::test_legend_labelcolor_rcparam_markerfacecolor_short\", \"lib/matplotlib/tests/test_legend.py::test_legend_labelcolor_rcparam_single[color2]\", \"lib/matplotlib/tests/test_legend.py::test_legend_labelcolor_rcparam_single[none]\", \"lib/matplotlib/tests/test_legend.py::test_legend_labelcolor_rcparam_single[red]\", \"lib/matplotlib/tests/test_legend.py::test_legend_labelcolor_single[color2]\", \"lib/matplotlib/tests/test_legend.py::test_legend_labelcolor_single[none]\", \"lib/matplotlib/tests/test_legend.py::test_legend_labelcolor_single[red]\", \"lib/matplotlib/tests/test_legend.py::test_legend_markers_from_line2d\", \"lib/matplotlib/tests/test_legend.py::test_legend_ordereddict\", \"lib/matplotlib/tests/test_legend.py::test_legend_pathcollection_labelcolor_linecolor\", \"lib/matplotlib/tests/test_legend.py::test_legend_pathcollection_labelcolor_linecolor_cmap\", \"lib/matplotlib/tests/test_legend.py::test_legend_pathcollection_labelcolor_linecolor_iterable\", \"lib/matplotlib/tests/test_legend.py::test_legend_pathcollection_labelcolor_markeredgecolor\", \"lib/matplotlib/tests/test_legend.py::test_legend_pathcollection_labelcolor_markeredgecolor_cmap\", \"lib/matplotlib/tests/test_legend.py::test_legend_pathcollection_labelcolor_markeredgecolor_iterable\", \"lib/matplotlib/tests/test_legend.py::test_legend_pathcollection_labelcolor_markerfacecolor\", \"lib/matplotlib/tests/test_legend.py::test_legend_pathcollection_labelcolor_markerfacecolor_iterable\", \"lib/matplotlib/tests/test_legend.py::test_legend_pathcollection_labelcolor_markfacecolor_cmap\", \"lib/matplotlib/tests/test_legend.py::test_legend_proper_window_extent\", \"lib/matplotlib/tests/test_legend.py::test_legend_remove\", \"lib/matplotlib/tests/test_legend.py::test_legend_repeatcheckok\", \"lib/matplotlib/tests/test_legend.py::test_legend_set_alignment[center]\", \"lib/matplotlib/tests/test_legend.py::test_legend_set_alignment[left]\", \"lib/matplotlib/tests/test_legend.py::test_legend_set_alignment[right]\", \"lib/matplotlib/tests/test_legend.py::test_legend_stackplot[png]\", \"lib/matplotlib/tests/test_legend.py::test_legend_text_axes\", \"lib/matplotlib/tests/test_legend.py::test_legend_title_empty\", \"lib/matplotlib/tests/test_legend.py::test_legend_title_fontprop_fontsize\", \"lib/matplotlib/tests/test_legend.py::test_linecollection_scaled_dashes\", \"lib/matplotlib/tests/test_legend.py::test_multiple_keys[png]\", \"lib/matplotlib/tests/test_legend.py::test_nanscatter\", \"lib/matplotlib/tests/test_legend.py::test_ncol_ncols[pdf]\", \"lib/matplotlib/tests/test_legend.py::test_ncol_ncols[png]\", \"lib/matplotlib/tests/test_legend.py::test_no_warn_big_data_when_loc_specified\", \"lib/matplotlib/tests/test_legend.py::test_not_covering_scatter[png]\", \"lib/matplotlib/tests/test_legend.py::test_not_covering_scatter_transform[png]\", \"lib/matplotlib/tests/test_legend.py::test_plot_multiple_input_multiple_label[label_array0]\", \"lib/matplotlib/tests/test_legend.py::test_plot_multiple_input_multiple_label[label_array1]\", \"lib/matplotlib/tests/test_legend.py::test_plot_multiple_input_multiple_label[label_array2]\", \"lib/matplotlib/tests/test_legend.py::test_plot_multiple_input_single_label[1]\", \"lib/matplotlib/tests/test_legend.py::test_plot_multiple_input_single_label[int]\", \"lib/matplotlib/tests/test_legend.py::test_plot_multiple_input_single_label[one]\", \"lib/matplotlib/tests/test_legend.py::test_plot_multiple_label_incorrect_length_exception\", \"lib/matplotlib/tests/test_legend.py::test_plot_single_input_multiple_label[label_array0]\", \"lib/matplotlib/tests/test_legend.py::test_plot_single_input_multiple_label[label_array1]\", \"lib/matplotlib/tests/test_legend.py::test_plot_single_input_multiple_label[label_array2]\", \"lib/matplotlib/tests/test_legend.py::test_rc[pdf]\", \"lib/matplotlib/tests/test_legend.py::test_rc[png]\", \"lib/matplotlib/tests/test_legend.py::test_reverse_legend_display[png]\", \"lib/matplotlib/tests/test_legend.py::test_reverse_legend_handles_and_labels\", \"lib/matplotlib/tests/test_legend.py::test_setting_alpha_keeps_polycollection_color\", \"lib/matplotlib/tests/test_legend.py::test_shadow_framealpha\", \"lib/matplotlib/tests/test_legend.py::test_subfigure_legend\", \"lib/matplotlib/tests/test_legend.py::test_text_nohandler_warning\", \"lib/matplotlib/tests/test_legend.py::test_various_labels[pdf]\", \"lib/matplotlib/tests/test_legend.py::test_various_labels[png]\", \"lib/matplotlib/tests/test_legend.py::test_warn_big_data_best_loc\", \"lib/matplotlib/tests/test_legend.py::test_window_extent_cached_renderer\"]",
  "environment_setup_commit": "28289122be81e0bc0a6ee0c4c5b7343a46ce2e4e",
  "patch_files": [
    "examples/text_labels_and_annotations/figlegend_demo.py",
    "lib/matplotlib/_constrained_layout.py",
    "lib/matplotlib/axes/_axes.py",
    "lib/matplotlib/figure.py",
    "lib/matplotlib/legend.py",
    "tutorials/intermediate/legend_guide.py"
  ],
  "test_patch_files": [
    "lib/matplotlib/tests/test_legend.py"
  ],
  "patch_diff_details": {
    "examples/text_labels_and_annotations/figlegend_demo.py": {
      "diffs": [
        {
          "start_line_old": 31,
          "end_line_old": 31,
          "file_pos": 14,
          "file_context_length": 74687,
          "pos": 44,
          "context_length": 23381
        }
      ]
    },
    "lib/matplotlib/_constrained_layout.py": {
      "diffs": [
        {
          "start_line_old": 421,
          "end_line_old": 421,
          "file_pos": 5,
          "file_context_length": 45945,
          "closest_snippet_id": "/tmp/repos/matplotlib/lib/matplotlib/_constrained_layout.py_get_margin_from_padding_get_margin_from_padding.13.1",
          "closest_snippet_line_distance": 86
        }
      ]
    },
    "lib/matplotlib/axes/_axes.py": {
      "diffs": [
        {
          "start_line_old": 297,
          "end_line_old": 297
        }
      ]
    },
    "lib/matplotlib/figure.py": {
      "diffs": [
        {
          "start_line_old": 1088,
          "end_line_old": 1088,
          "file_pos": 3,
          "file_context_length": 36213,
          "closest_snippet_id": "/tmp/repos/matplotlib/lib/matplotlib/figure.py_Figure.set_tight_layout_Figure.get_constrained_layout.2.1",
          "closest_snippet_line_distance": 1659,
          "pos": 18,
          "context_length": 10614
        }
      ]
    },
    "lib/matplotlib/legend.py": {
      "diffs": [
        {
          "start_line_old": 97,
          "end_line_old": 141,
          "file_pos": 9,
          "file_context_length": 61979,
          "closest_snippet_id": "/tmp/repos/matplotlib/lib/matplotlib/legend.py_Legend.draw_Legend.draw.2.self.stale.1",
          "closest_snippet_line_distance": 551,
          "pos": 70,
          "context_length": 36385
        },
        {
          "start_line_old": 298,
          "end_line_old": 298,
          "file_pos": 9,
          "file_context_length": 61979,
          "closest_snippet_id": "/tmp/repos/matplotlib/lib/matplotlib/legend.py_Legend.draw_Legend.draw.2.self.stale.1",
          "closest_snippet_line_distance": 365,
          "pos": 70,
          "context_length": 36385
        },
        {
          "start_line_old": 485,
          "end_line_old": 485,
          "file_pos": 9,
          "file_context_length": 61979,
          "closest_snippet_id": "/tmp/repos/matplotlib/lib/matplotlib/legend.py_Legend.get_children_Legend.get_alignment.2.1",
          "closest_snippet_line_distance": 413,
          "pos": 70,
          "context_length": 36385
        }
      ]
    },
    "tutorials/intermediate/legend_guide.py": {
      "diffs": [
        {
          "start_line_old": 138,
          "end_line_old": 138,
          "file_pos": 10,
          "file_context_length": 64643,
          "pos": 35,
          "context_length": 20140
        }
      ]
    }
  },
  "vectors": 3969,
  "snippets": [
    {
      "position": 1,
      "id": "/tmp/repos/matplotlib/tutorials/intermediate/constrainedlayout_guide.py_norm_105",
      "distance": 0.7287005186080933,
      "file_path": "tutorials/intermediate/constrainedlayout_guide.py",
      "start_line": 113,
      "end_line": 185,
      "tokens": 781,
      "context_length": 781
    },
    {
      "position": 2,
      "id": "/tmp/repos/matplotlib/tutorials/intermediate/constrainedlayout_guide.py_1_arr.1",
      "distance": 0.7558473348617554,
      "file_path": "tutorials/intermediate/constrainedlayout_guide.py",
      "start_line": 1,
      "end_line": 112,
      "tokens": 829,
      "context_length": 1610
    },
    {
      "position": 3,
      "id": "/tmp/repos/matplotlib/tutorials/intermediate/constrainedlayout_guide.py_ax1_347_440",
      "distance": 0.8127297163009644,
      "file_path": "tutorials/intermediate/constrainedlayout_guide.py",
      "start_line": 532,
      "end_line": 634,
      "tokens": 1013,
      "context_length": 2623
    },
    {
      "position": 4,
      "id": "/tmp/repos/matplotlib/tutorials/intermediate/constrainedlayout_guide.py_106_162",
      "distance": 0.8354777097702026,
      "file_path": "tutorials/intermediate/constrainedlayout_guide.py",
      "start_line": 187,
      "end_line": 269,
      "tokens": 813,
      "context_length": 3436
    },
    {
      "position": 5,
      "id": "/tmp/repos/matplotlib/examples/subplots_axes_and_figures/demo_constrained_layout.py_1_",
      "distance": 0.8390763998031616,
      "file_path": "examples/subplots_axes_and_figures/demo_constrained_layout.py",
      "start_line": 1,
      "end_line": 72,
      "tokens": 430,
      "context_length": 3866
    },
    {
      "position": 6,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/figure.py_Figure.set_constrained_layout_Figure.set_constrained_layout.self.stale.1",
      "distance": 0.8530706167221069,
      "file_path": "lib/matplotlib/figure.py",
      "start_line": 2781,
      "end_line": 2809,
      "tokens": 264,
      "context_length": 4130,
      "file_pos": 3
    },
    {
      "position": 7,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/layout_engine.py_ConstrainedLayoutEngine.execute_ConstrainedLayoutEngine.execute.6.1",
      "distance": 0.8620860576629639,
      "file_path": "lib/matplotlib/layout_engine.py",
      "start_line": 237,
      "end_line": 254,
      "tokens": 149,
      "context_length": 4279
    },
    {
      "position": 8,
      "id": "/tmp/repos/matplotlib/tutorials/intermediate/constrainedlayout_guide.py_fig_223_274.4",
      "distance": 0.865202009677887,
      "file_path": "tutorials/intermediate/constrainedlayout_guide.py",
      "start_line": 354,
      "end_line": 441,
      "tokens": 772,
      "context_length": 5051
    },
    {
      "position": 9,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/figure.py_SubFigure.get_constrained_layout_SubFigure.get_constrained_layout_pads.2.1",
      "distance": 0.8652787208557129,
      "file_path": "lib/matplotlib/figure.py",
      "start_line": 2264,
      "end_line": 2286,
      "tokens": 174,
      "context_length": 5225,
      "file_pos": 4
    },
    {
      "position": 10,
      "id": "/tmp/repos/matplotlib/tutorials/intermediate/constrainedlayout_guide.py_163_222",
      "distance": 0.8702605366706848,
      "file_path": "tutorials/intermediate/constrainedlayout_guide.py",
      "start_line": 270,
      "end_line": 352,
      "tokens": 804,
      "context_length": 6029
    },
    {
      "position": 11,
      "id": "/tmp/repos/matplotlib/tutorials/intermediate/constrainedlayout_guide.py_441_",
      "distance": 0.8705109357833862,
      "file_path": "tutorials/intermediate/constrainedlayout_guide.py",
      "start_line": 636,
      "end_line": 721,
      "tokens": 777,
      "context_length": 6806
    },
    {
      "position": 12,
      "id": "/tmp/repos/matplotlib/tutorials/intermediate/constrainedlayout_guide.py_275_fig_346.1",
      "distance": 0.8824328184127808,
      "file_path": "tutorials/intermediate/constrainedlayout_guide.py",
      "start_line": 442,
      "end_line": 530,
      "tokens": 776,
      "context_length": 7582
    },
    {
      "position": 13,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/_constrained_layout.py_do_constrained_layout.6_do_constrained_layout.7.1",
      "distance": 0.8906118869781494,
      "file_path": "lib/matplotlib/_constrained_layout.py",
      "start_line": 111,
      "end_line": 149,
      "tokens": 471,
      "context_length": 8053,
      "file_pos": 5
    },
    {
      "position": 14,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/_constrained_layout.py_8_do_constrained_layout.5.2",
      "distance": 0.9021432995796204,
      "file_path": "lib/matplotlib/_constrained_layout.py",
      "start_line": 62,
      "end_line": 109,
      "tokens": 386,
      "context_length": 8439,
      "file_pos": 5
    },
    {
      "position": 15,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/figure.py_Figure.set_tight_layout_Figure.get_constrained_layout.2.1",
      "distance": 0.9402361512184143,
      "file_path": "lib/matplotlib/figure.py",
      "start_line": 2747,
      "end_line": 2779,
      "tokens": 286,
      "context_length": 8725,
      "file_pos": 5
    },
    {
      "position": 16,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/_constrained_layout.py_1__log.1",
      "distance": 0.9493046998977661,
      "file_path": "lib/matplotlib/_constrained_layout.py",
      "start_line": 1,
      "end_line": 59,
      "tokens": 602,
      "context_length": 9327,
      "file_pos": 5
    },
    {
      "position": 17,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/_constrained_layout.py_make_margin_suptitles_make_margin_suptitles.inv_trans_fig.10.2.3",
      "distance": 0.9763752222061157,
      "file_path": "lib/matplotlib/_constrained_layout.py",
      "start_line": 422,
      "end_line": 458,
      "tokens": 473,
      "context_length": 9800,
      "file_pos": 5
    },
    {
      "position": 18,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/figure.py_FigureBase.legend_FigureBase.legend.1",
      "distance": 0.9765475988388062,
      "file_path": "lib/matplotlib/figure.py",
      "start_line": 989,
      "end_line": 1098,
      "tokens": 814,
      "context_length": 10614,
      "file_pos": 5
    },
    {
      "position": 19,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/figure.py_FigureBase.legend.2_FigureBase.legend.11.1",
      "distance": 0.9776096940040588,
      "file_path": "lib/matplotlib/figure.py",
      "start_line": 1100,
      "end_line": 1122,
      "tokens": 242,
      "context_length": 10856,
      "file_pos": 5
    },
    {
      "position": 20,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/_constrained_layout.py_make_layout_margins.3_make_layout_margins.3.18",
      "distance": 0.9924617409706116,
      "file_path": "lib/matplotlib/_constrained_layout.py",
      "start_line": 357,
      "end_line": 419,
      "tokens": 766,
      "context_length": 11622,
      "file_pos": 5
    },
    {
      "position": 21,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/figure.py_Figure.set_constrained_layout_pads_Figure.set_constrained_layout_pads.2.1",
      "distance": 0.9929682016372681,
      "file_path": "lib/matplotlib/figure.py",
      "start_line": 2811,
      "end_line": 2843,
      "tokens": 329,
      "context_length": 11951,
      "file_pos": 5
    },
    {
      "position": 22,
      "id": "/tmp/repos/matplotlib/tutorials/intermediate/tight_layout_guide.py_1_57",
      "distance": 0.9933499097824097,
      "file_path": "tutorials/intermediate/tight_layout_guide.py",
      "start_line": 1,
      "end_line": 104,
      "tokens": 778,
      "context_length": 12729
    },
    {
      "position": 23,
      "id": "/tmp/repos/matplotlib/tutorials/intermediate/tight_layout_guide.py_lines_",
      "distance": 1.0083880424499512,
      "file_path": "tutorials/intermediate/tight_layout_guide.py",
      "start_line": 222,
      "end_line": 293,
      "tokens": 495,
      "context_length": 13224
    },
    {
      "position": 24,
      "id": "/tmp/repos/matplotlib/examples/text_labels_and_annotations/legend_demo.py_44_71",
      "distance": 1.0091543197631836,
      "file_path": "examples/text_labels_and_annotations/legend_demo.py",
      "start_line": 76,
      "end_line": 116,
      "tokens": 567,
      "context_length": 13791
    },
    {
      "position": 25,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/_constrained_layout.py_match_submerged_margins.4_match_submerged_margins.4.7.5.1",
      "distance": 1.0115821361541748,
      "file_path": "lib/matplotlib/_constrained_layout.py",
      "start_line": 492,
      "end_line": 555,
      "tokens": 719,
      "context_length": 14510,
      "file_pos": 7
    },
    {
      "position": 26,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/_constrained_layout.py_compress_fixed_aspect_compress_fixed_aspect.10.1",
      "distance": 1.0147747993469238,
      "file_path": "lib/matplotlib/_constrained_layout.py",
      "start_line": 263,
      "end_line": 297,
      "tokens": 327,
      "context_length": 14837,
      "file_pos": 7
    },
    {
      "position": 27,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/_constrained_layout.py_make_layout_margins_make_layout_margins.2.ss.4",
      "distance": 1.0162137746810913,
      "file_path": "lib/matplotlib/_constrained_layout.py",
      "start_line": 338,
      "end_line": 355,
      "tokens": 206,
      "context_length": 15043,
      "file_pos": 7
    },
    {
      "position": 28,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/_constrained_layout.py_match_submerged_margins_match_submerged_margins.axs.1",
      "distance": 1.0189801454544067,
      "file_path": "lib/matplotlib/_constrained_layout.py",
      "start_line": 461,
      "end_line": 490,
      "tokens": 297,
      "context_length": 15340,
      "file_pos": 7
    },
    {
      "position": 29,
      "id": "/tmp/repos/matplotlib/examples/subplots_axes_and_figures/demo_tight_layout.py_1_top.1",
      "distance": 1.0219066143035889,
      "file_path": "examples/subplots_axes_and_figures/demo_tight_layout.py",
      "start_line": 1,
      "end_line": 115,
      "tokens": 756,
      "context_length": 16096
    },
    {
      "position": 30,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/_constrained_layout.py_make_layoutgrids_make_layoutgrids.8.1",
      "distance": 1.0253088474273682,
      "file_path": "lib/matplotlib/_constrained_layout.py",
      "start_line": 152,
      "end_line": 194,
      "tokens": 391,
      "context_length": 16487,
      "file_pos": 8
    },
    {
      "position": 31,
      "id": "/tmp/repos/matplotlib/tutorials/intermediate/tight_layout_guide.py_fig_146",
      "distance": 1.0327481031417847,
      "file_path": "tutorials/intermediate/tight_layout_guide.py",
      "start_line": 105,
      "end_line": 221,
      "tokens": 880,
      "context_length": 17367
    },
    {
      "position": 32,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/legend.py_Legend.__init__.45_Legend.__init__.77.5.1",
      "distance": 1.03627610206604,
      "file_path": "lib/matplotlib/legend.py",
      "start_line": 486,
      "end_line": 612,
      "tokens": 1598,
      "context_length": 18965,
      "file_pos": 9
    },
    {
      "position": 33,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/layout_engine.py_ConstrainedLayoutEngine.set_",
      "distance": 1.036643624305725,
      "file_path": "lib/matplotlib/layout_engine.py",
      "start_line": 256,
      "end_line": 282,
      "tokens": 279,
      "context_length": 19244
    },
    {
      "position": 34,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/_constrained_layout.py_colorbar_get_pad_",
      "distance": 1.0408799648284912,
      "file_path": "lib/matplotlib/_constrained_layout.py",
      "start_line": 750,
      "end_line": 763,
      "tokens": 128,
      "context_length": 19372,
      "file_pos": 9
    },
    {
      "position": 35,
      "id": "/tmp/repos/matplotlib/tutorials/intermediate/legend_guide.py_32_91",
      "distance": 1.0435116291046143,
      "file_path": "tutorials/intermediate/legend_guide.py",
      "start_line": 123,
      "end_line": 195,
      "tokens": 768,
      "context_length": 20140,
      "file_pos": 10
    },
    {
      "position": 36,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/legend.py_Legend._init_legend_box.mode_Legend._init_legend_box.self.legend_handles.1",
      "distance": 1.0438299179077148,
      "file_path": "lib/matplotlib/legend.py",
      "start_line": 846,
      "end_line": 861,
      "tokens": 176,
      "context_length": 20316,
      "file_pos": 10
    },
    {
      "position": 37,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/_layoutgrid.py_LayoutGrid.parent_constraints_LayoutGrid.parent_constraints.parent.3.1",
      "distance": 1.044883131980896,
      "file_path": "lib/matplotlib/_layoutgrid.py",
      "start_line": 180,
      "end_line": 219,
      "tokens": 425,
      "context_length": 20741
    },
    {
      "position": 38,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/layout_engine.py_1_5",
      "distance": 1.0457675457000732,
      "file_path": "lib/matplotlib/layout_engine.py",
      "start_line": 1,
      "end_line": 24,
      "tokens": 229,
      "context_length": 20970
    },
    {
      "position": 39,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/layout_engine.py_ConstrainedLayoutEngine_ConstrainedLayoutEngine.__init__.self._compress.1",
      "distance": 1.0462604761123657,
      "file_path": "lib/matplotlib/layout_engine.py",
      "start_line": 188,
      "end_line": 235,
      "tokens": 506,
      "context_length": 21476
    },
    {
      "position": 40,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/figure.py_FigureBase._norm_per_subplot_kw_FigureBase._normalize_grid_string.1.3.layout.2.1",
      "distance": 1.0506799221038818,
      "file_path": "lib/matplotlib/figure.py",
      "start_line": 1762,
      "end_line": 1789,
      "tokens": 203,
      "context_length": 21679,
      "file_pos": 11
    },
    {
      "position": 41,
      "id": "/tmp/repos/matplotlib/examples/subplots_axes_and_figures/subfigures.py_1_36",
      "distance": 1.051652431488037,
      "file_path": "examples/subplots_axes_and_figures/subfigures.py",
      "start_line": 1,
      "end_line": 83,
      "tokens": 756,
      "context_length": 22435
    },
    {
      "position": 42,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/_tight_layout.py_get_tight_layout_figure.kwargs_",
      "distance": 1.0556584596633911,
      "file_path": "lib/matplotlib/_tight_layout.py",
      "start_line": 266,
      "end_line": 302,
      "tokens": 362,
      "context_length": 22797
    },
    {
      "position": 43,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/figure.py_Figure.get_constrained_layout_pads_Figure.set_canvas.self.canvas.1",
      "distance": 1.0595687627792358,
      "file_path": "lib/matplotlib/figure.py",
      "start_line": 2845,
      "end_line": 2886,
      "tokens": 328,
      "context_length": 23125,
      "file_pos": 13
    },
    {
      "position": 44,
      "id": "/tmp/repos/matplotlib/examples/text_labels_and_annotations/figlegend_demo.py_1_",
      "distance": 1.0625677108764648,
      "file_path": "examples/text_labels_and_annotations/figlegend_demo.py",
      "start_line": 1,
      "end_line": 31,
      "tokens": 256,
      "context_length": 23381,
      "file_pos": 14
    },
    {
      "position": 45,
      "id": "/tmp/repos/matplotlib/examples/text_labels_and_annotations/custom_legends.py_1_",
      "distance": 1.062767505645752,
      "file_path": "examples/text_labels_and_annotations/custom_legends.py",
      "start_line": 1,
      "end_line": 72,
      "tokens": 557,
      "context_length": 23938
    },
    {
      "position": 46,
      "id": "/tmp/repos/matplotlib/examples/text_labels_and_annotations/legend_demo.py_1_43",
      "distance": 1.0666035413742065,
      "file_path": "examples/text_labels_and_annotations/legend_demo.py",
      "start_line": 1,
      "end_line": 75,
      "tokens": 735,
      "context_length": 24673
    },
    {
      "position": 47,
      "id": "/tmp/repos/matplotlib/examples/userdemo/simple_legend01.py_1_",
      "distance": 1.0690326690673828,
      "file_path": "examples/userdemo/simple_legend01.py",
      "start_line": 1,
      "end_line": 27,
      "tokens": 199,
      "context_length": 24872
    },
    {
      "position": 48,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/_constrained_layout.py_reset_margins_reset_margins.4",
      "distance": 1.0716267824172974,
      "file_path": "lib/matplotlib/_constrained_layout.py",
      "start_line": 733,
      "end_line": 747,
      "tokens": 140,
      "context_length": 25012,
      "file_pos": 16
    },
    {
      "position": 49,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/figure.py_Figure.set_layout_engine_Figure.set_layout_engine.4.2.1",
      "distance": 1.0735933780670166,
      "file_path": "lib/matplotlib/figure.py",
      "start_line": 2574,
      "end_line": 2638,
      "tokens": 562,
      "context_length": 25574,
      "file_pos": 16
    },
    {
      "position": 50,
      "id": "/tmp/repos/matplotlib/tutorials/intermediate/legend_guide.py_1_31",
      "distance": 1.076890468597412,
      "file_path": "tutorials/intermediate/legend_guide.py",
      "start_line": 1,
      "end_line": 121,
      "tokens": 890,
      "context_length": 26464,
      "file_pos": 16
    },
    {
      "position": 51,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/legend.py_Legend.legendHandles_Legend._loc.1",
      "distance": 1.0834460258483887,
      "file_path": "lib/matplotlib/legend.py",
      "start_line": 614,
      "end_line": 644,
      "tokens": 229,
      "context_length": 26693,
      "file_pos": 16
    },
    {
      "position": 52,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/figure.py_Figure._check_layout_engines_compat_Figure._check_layout_engines_compat.7.1",
      "distance": 1.0841563940048218,
      "file_path": "lib/matplotlib/figure.py",
      "start_line": 2555,
      "end_line": 2572,
      "tokens": 159,
      "context_length": 26852,
      "file_pos": 16
    },
    {
      "position": 53,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/legend.py_Legend.set_bbox_to_anchor_Legend.set_bbox_to_anchor.self.stale.1",
      "distance": 1.0843627452850342,
      "file_path": "lib/matplotlib/legend.py",
      "start_line": 1007,
      "end_line": 1048,
      "tokens": 337,
      "context_length": 27189,
      "file_pos": 16
    },
    {
      "position": 54,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/figure.py_1__stale_figure_callback.1.self.figure.stale.1",
      "distance": 1.0854843854904175,
      "file_path": "lib/matplotlib/figure.py",
      "start_line": 1,
      "end_line": 53,
      "tokens": 340,
      "context_length": 27529,
      "file_pos": 16
    },
    {
      "position": 55,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/figure.py_Figure.__init__.self.patch_Figure.pick.1.1",
      "distance": 1.0881357192993164,
      "file_path": "lib/matplotlib/figure.py",
      "start_line": 2533,
      "end_line": 2553,
      "tokens": 283,
      "context_length": 27812,
      "file_pos": 16
    },
    {
      "position": 56,
      "id": "/tmp/repos/matplotlib/tutorials/intermediate/legend_guide.py_92_147",
      "distance": 1.0884425640106201,
      "file_path": "tutorials/intermediate/legend_guide.py",
      "start_line": 197,
      "end_line": 283,
      "tokens": 812,
      "context_length": 28624,
      "file_pos": 16
    },
    {
      "position": 57,
      "id": "/tmp/repos/matplotlib/examples/subplots_axes_and_figures/subfigures.py_37_",
      "distance": 1.089133381843567,
      "file_path": "examples/subplots_axes_and_figures/subfigures.py",
      "start_line": 84,
      "end_line": 149,
      "tokens": 667,
      "context_length": 29291
    },
    {
      "position": 58,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/legend.py_Legend.get_children_Legend.get_alignment.2.1",
      "distance": 1.09283447265625,
      "file_path": "lib/matplotlib/legend.py",
      "start_line": 898,
      "end_line": 938,
      "tokens": 307,
      "context_length": 29598,
      "file_pos": 16
    },
    {
      "position": 59,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/figure.py_Figure.__init___Figure.__init__.self.transSubfigure.1",
      "distance": 1.0990173816680908,
      "file_path": "lib/matplotlib/figure.py",
      "start_line": 2362,
      "end_line": 2531,
      "tokens": 1513,
      "context_length": 31111,
      "file_pos": 16
    },
    {
      "position": 60,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/legend.py_Legend.1_Legend.__init__.self._loc_used_default.1",
      "distance": 1.1010974645614624,
      "file_path": "lib/matplotlib/legend.py",
      "start_line": 302,
      "end_line": 485,
      "tokens": 1639,
      "context_length": 32750,
      "file_pos": 16
    },
    {
      "position": 61,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/_layoutgrid.py_LayoutGrid.grid_constraints_LayoutGrid.grid_constraints.w.11.7",
      "distance": 1.101463794708252,
      "file_path": "lib/matplotlib/_layoutgrid.py",
      "start_line": 221,
      "end_line": 258,
      "tokens": 489,
      "context_length": 33239
    },
    {
      "position": 62,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/figure.py_Figure.get_layout_engine_Figure._repr_html_.3.2.1",
      "distance": 1.101649522781372,
      "file_path": "lib/matplotlib/figure.py",
      "start_line": 2640,
      "end_line": 2652,
      "tokens": 141,
      "context_length": 33380,
      "file_pos": 16
    },
    {
      "position": 63,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/figure.py_FigureBase.supylabel_FigureBase.supylabel.info.2.1",
      "distance": 1.1029720306396484,
      "file_path": "lib/matplotlib/figure.py",
      "start_line": 388,
      "end_line": 397,
      "tokens": 158,
      "context_length": 33538,
      "file_pos": 16
    },
    {
      "position": 64,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/legend.py_Legend.draw_Legend.draw.2.self.stale.1",
      "distance": 1.10323965549469,
      "file_path": "lib/matplotlib/legend.py",
      "start_line": 663,
      "end_line": 692,
      "tokens": 238,
      "context_length": 33776,
      "file_pos": 16
    },
    {
      "position": 65,
      "id": "/tmp/repos/matplotlib/examples/text_labels_and_annotations/legend_demo.py_x_76_",
      "distance": 1.105515956878662,
      "file_path": "examples/text_labels_and_annotations/legend_demo.py",
      "start_line": 164,
      "end_line": 182,
      "tokens": 195,
      "context_length": 33971
    },
    {
      "position": 66,
      "id": "/tmp/repos/matplotlib/examples/lines_bars_and_markers/scatter_with_legend.py_1_kw.1",
      "distance": 1.1064372062683105,
      "file_path": "examples/lines_bars_and_markers/scatter_with_legend.py",
      "start_line": 1,
      "end_line": 96,
      "tokens": 827,
      "context_length": 34798
    },
    {
      "position": 67,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/backends/qt_editor/figureoptions.py_figure_edit.17_figure_edit.30.1",
      "distance": 1.1145007610321045,
      "file_path": "lib/matplotlib/backends/qt_editor/figureoptions.py",
      "start_line": 113,
      "end_line": 175,
      "tokens": 618,
      "context_length": 35416
    },
    {
      "position": 68,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/_constrained_layout.py_make_layoutgrids_gs_make_layoutgrids_gs.7.1",
      "distance": 1.1145861148834229,
      "file_path": "lib/matplotlib/_constrained_layout.py",
      "start_line": 197,
      "end_line": 240,
      "tokens": 435,
      "context_length": 35851,
      "file_pos": 18
    },
    {
      "position": 69,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/figure.py_FigureBase.supxlabel_FigureBase.supxlabel.info.2.1",
      "distance": 1.1145991086959839,
      "file_path": "lib/matplotlib/figure.py",
      "start_line": 378,
      "end_line": 386,
      "tokens": 150,
      "context_length": 36001,
      "file_pos": 18
    },
    {
      "position": 70,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/legend.py_DraggableLegend_Legend",
      "distance": 1.1150798797607422,
      "file_path": "lib/matplotlib/legend.py",
      "start_line": 53,
      "end_line": 1157,
      "tokens": 384,
      "context_length": 36385,
      "file_pos": 18
    },
    {
      "position": 71,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/legend_handler.py_HandlerErrorbar.create_artists_HandlerErrorbar.create_artists.2",
      "distance": 1.1161539554595947,
      "file_path": "lib/matplotlib/legend_handler.py",
      "start_line": 569,
      "end_line": 651,
      "tokens": 762,
      "context_length": 37147
    },
    {
      "position": 72,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/_constrained_layout.py_reposition_axes_reposition_axes.4.15.1.1",
      "distance": 1.1180288791656494,
      "file_path": "lib/matplotlib/_constrained_layout.py",
      "start_line": 606,
      "end_line": 645,
      "tokens": 391,
      "context_length": 37538,
      "file_pos": 19
    },
    {
      "position": 73,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/figure.py_Figure.tight_layout_Figure.tight_layout.6.5.1",
      "distance": 1.120598316192627,
      "file_path": "lib/matplotlib/figure.py",
      "start_line": 3464,
      "end_line": 3502,
      "tokens": 369,
      "context_length": 37907,
      "file_pos": 19
    },
    {
      "position": 74,
      "id": "/tmp/repos/matplotlib/tutorials/intermediate/arranging_axes.py_np_65",
      "distance": 1.1212157011032104,
      "file_path": "tutorials/intermediate/arranging_axes.py",
      "start_line": 100,
      "end_line": 178,
      "tokens": 776,
      "context_length": 38683
    },
    {
      "position": 75,
      "id": "/tmp/repos/matplotlib/examples/text_labels_and_annotations/legend_demo.py_72_HandlerDashedLines.create_artists.numlines.10.1",
      "distance": 1.123794436454773,
      "file_path": "examples/text_labels_and_annotations/legend_demo.py",
      "start_line": 118,
      "end_line": 162,
      "tokens": 403,
      "context_length": 39086
    },
    {
      "position": 76,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/_constrained_layout.py_check_no_collapsed_axes_check_no_collapsed_axes.4.1",
      "distance": 1.1268386840820312,
      "file_path": "lib/matplotlib/_constrained_layout.py",
      "start_line": 243,
      "end_line": 260,
      "tokens": 153,
      "context_length": 39239,
      "file_pos": 20
    },
    {
      "position": 77,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/legend.py_1_legend_handler",
      "distance": 1.1278388500213623,
      "file_path": "lib/matplotlib/legend.py",
      "start_line": 1,
      "end_line": 50,
      "tokens": 393,
      "context_length": 39632,
      "file_pos": 20
    },
    {
      "position": 78,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/pyplot.py_224_loglog.1.1",
      "distance": 1.1285414695739746,
      "file_path": "lib/matplotlib/pyplot.py",
      "start_line": 2696,
      "end_line": 2711,
      "tokens": 169,
      "context_length": 39801
    },
    {
      "position": 79,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/legend_handler.py_HandlerLineCollection.create_artists_HandlerLineCollection.create_artists.2",
      "distance": 1.129124402999878,
      "file_path": "lib/matplotlib/legend_handler.py",
      "start_line": 439,
      "end_line": 450,
      "tokens": 135,
      "context_length": 39936
    },
    {
      "position": 80,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/figure.py_FigureBase.subplot_mosaic._do_layout.18_FigureBase.subplot_mosaic._do_layout.19.1",
      "distance": 1.1309274435043335,
      "file_path": "lib/matplotlib/figure.py",
      "start_line": 2047,
      "end_line": 2086,
      "tokens": 401,
      "context_length": 40337,
      "file_pos": 21
    },
    {
      "position": 81,
      "id": "/tmp/repos/matplotlib/examples/text_labels_and_annotations/legend.py_1_",
      "distance": 1.131011724472046,
      "file_path": "examples/text_labels_and_annotations/legend.py",
      "start_line": 1,
      "end_line": 40,
      "tokens": 233,
      "context_length": 40570
    },
    {
      "position": 82,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/backends/qt_editor/figureoptions.py_figure_edit.prepare_data_figure_edit.prepare_data.11.1",
      "distance": 1.1312620639801025,
      "file_path": "lib/matplotlib/backends/qt_editor/figureoptions.py",
      "start_line": 86,
      "end_line": 111,
      "tokens": 293,
      "context_length": 40863
    },
    {
      "position": 83,
      "id": "/tmp/repos/matplotlib/examples/userdemo/simple_legend02.py_1_",
      "distance": 1.1323933601379395,
      "file_path": "examples/userdemo/simple_legend02.py",
      "start_line": 1,
      "end_line": 24,
      "tokens": 136,
      "context_length": 40999
    },
    {
      "position": 84,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/backends/_backend_gtk.py__FigureManagerGTK.resize__FigureManagerGTK.resize.5.6.1",
      "distance": 1.1373270750045776,
      "file_path": "lib/matplotlib/backends/_backend_gtk.py",
      "start_line": 251,
      "end_line": 265,
      "tokens": 182,
      "context_length": 41181
    },
    {
      "position": 85,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/artist.py__get_tightbbox_for_layout_only__get_tightbbox_for_layout_only.2.2.1.1",
      "distance": 1.137678861618042,
      "file_path": "lib/matplotlib/artist.py",
      "start_line": 1408,
      "end_line": 1417,
      "tokens": 118,
      "context_length": 41299
    },
    {
      "position": 86,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/legend.py_Legend._get_anchored_bbox_Legend._get_anchored_bbox.2.1",
      "distance": 1.137850284576416,
      "file_path": "lib/matplotlib/legend.py",
      "start_line": 1050,
      "end_line": 1067,
      "tokens": 179,
      "context_length": 41478,
      "file_pos": 25
    },
    {
      "position": 87,
      "id": "/tmp/repos/matplotlib/examples/subplots_axes_and_figures/demo_tight_layout.py_bottom_",
      "distance": 1.1382055282592773,
      "file_path": "examples/subplots_axes_and_figures/demo_tight_layout.py",
      "start_line": 116,
      "end_line": 135,
      "tokens": 123,
      "context_length": 41601
    },
    {
      "position": 88,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/legend_handler.py__Line2DHandleList__Line2DHandleList.__getitem__.2.1",
      "distance": 1.1407296657562256,
      "file_path": "lib/matplotlib/legend_handler.py",
      "start_line": 280,
      "end_line": 295,
      "tokens": 144,
      "context_length": 41745
    },
    {
      "position": 89,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/figure.py_FigureBase.add_axes.3_FigureBase.add_axes.4.1",
      "distance": 1.1408076286315918,
      "file_path": "lib/matplotlib/figure.py",
      "start_line": 596,
      "end_line": 613,
      "tokens": 190,
      "context_length": 41935,
      "file_pos": 25
    },
    {
      "position": 90,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/_layoutgrid.py_1__log.1",
      "distance": 1.141618013381958,
      "file_path": "lib/matplotlib/_layoutgrid.py",
      "start_line": 1,
      "end_line": 28,
      "tokens": 238,
      "context_length": 42173
    },
    {
      "position": 91,
      "id": "/tmp/repos/matplotlib/tutorials/intermediate/arranging_axes.py_spec_gs01.1",
      "distance": 1.1416290998458862,
      "file_path": "tutorials/intermediate/arranging_axes.py",
      "start_line": 264,
      "end_line": 343,
      "tokens": 760,
      "context_length": 42933
    },
    {
      "position": 92,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/figure.py_FigureBase.suptitle_FigureBase.suptitle.info.2.1",
      "distance": 1.145054578781128,
      "file_path": "lib/matplotlib/figure.py",
      "start_line": 368,
      "end_line": 376,
      "tokens": 154,
      "context_length": 43087,
      "file_pos": 25
    },
    {
      "position": 93,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/_tight_layout.py_get_tight_layout_figure_get_tight_layout_figure.13.7",
      "distance": 1.1462570428848267,
      "file_path": "lib/matplotlib/_tight_layout.py",
      "start_line": 194,
      "end_line": 264,
      "tokens": 733,
      "context_length": 43820
    },
    {
      "position": 94,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/legend.py_Legend._init_legend_box_Legend._init_legend_box.32.itemboxes.4",
      "distance": 1.1472597122192383,
      "file_path": "lib/matplotlib/legend.py",
      "start_line": 763,
      "end_line": 844,
      "tokens": 810,
      "context_length": 44630,
      "file_pos": 25
    },
    {
      "position": 95,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/figure.py_FigureBase.subplots.gridspec_kw_FigureBase.subplots.7.1",
      "distance": 1.1509697437286377,
      "file_path": "lib/matplotlib/figure.py",
      "start_line": 877,
      "end_line": 892,
      "tokens": 245,
      "context_length": 44875,
      "file_pos": 25
    },
    {
      "position": 96,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/pyplot.py_savefig_97.figlegend.__doc__.1",
      "distance": 1.1522362232208252,
      "file_path": "lib/matplotlib/pyplot.py",
      "start_line": 993,
      "end_line": 1010,
      "tokens": 148,
      "context_length": 45023
    },
    {
      "position": 97,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/figure.py_FigureBase.colorbar.5_FigureBase.colorbar.12.1",
      "distance": 1.153873085975647,
      "file_path": "lib/matplotlib/figure.py",
      "start_line": 1251,
      "end_line": 1282,
      "tokens": 367,
      "context_length": 45390,
      "file_pos": 25
    },
    {
      "position": 98,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/figure.py_FigureBase.add_subfigure_FigureBase.add_subfigure.4.1",
      "distance": 1.154266595840454,
      "file_path": "lib/matplotlib/figure.py",
      "start_line": 1568,
      "end_line": 1593,
      "tokens": 148,
      "context_length": 45538,
      "file_pos": 25
    },
    {
      "position": 99,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/layout_engine.py_TightLayoutEngine.execute_TightLayoutEngine.set.1.1.1",
      "distance": 1.1543657779693604,
      "file_path": "lib/matplotlib/layout_engine.py",
      "start_line": 158,
      "end_line": 185,
      "tokens": 233,
      "context_length": 45771
    },
    {
      "position": 100,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/_layoutgrid.py_LayoutGrid.hard_constraints_LayoutGrid.add_child.2",
      "distance": 1.1551811695098877,
      "file_path": "lib/matplotlib/_layoutgrid.py",
      "start_line": 151,
      "end_line": 178,
      "tokens": 285,
      "context_length": 46056
    },
    {
      "position": 101,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/figure.py_FigureBase.subplots_adjust_FigureBase.subplots_adjust.self.stale.1",
      "distance": 1.1553575992584229,
      "file_path": "lib/matplotlib/figure.py",
      "start_line": 1284,
      "end_line": 1324,
      "tokens": 369,
      "context_length": 46425,
      "file_pos": 25
    },
    {
      "position": 102,
      "id": "/tmp/repos/matplotlib/examples/text_labels_and_annotations/label_subplots.py_1_",
      "distance": 1.1559720039367676,
      "file_path": "examples/text_labels_and_annotations/label_subplots.py",
      "start_line": 1,
      "end_line": 71,
      "tokens": 603,
      "context_length": 47028
    },
    {
      "position": 103,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/backends/backend_gtk4.py_FigureCanvasGTK4_FigureCanvasGTK4.set_cursor.2",
      "distance": 1.1574549674987793,
      "file_path": "lib/matplotlib/backends/backend_gtk4.py",
      "start_line": 33,
      "end_line": 87,
      "tokens": 427,
      "context_length": 47455
    },
    {
      "position": 104,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/artist.py_Artist.set_in_layout_Artist.set_zorder.self.stale.1",
      "distance": 1.1590062379837036,
      "file_path": "lib/matplotlib/artist.py",
      "start_line": 1080,
      "end_line": 1130,
      "tokens": 301,
      "context_length": 47756
    },
    {
      "position": 105,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/_constrained_layout.py_get_cb_parent_spans_get_cb_parent_spans.9.1",
      "distance": 1.159529447555542,
      "file_path": "lib/matplotlib/_constrained_layout.py",
      "start_line": 558,
      "end_line": 575,
      "tokens": 156,
      "context_length": 47912,
      "file_pos": 27
    },
    {
      "position": 106,
      "id": "/tmp/repos/matplotlib/examples/pie_and_polar_charts/polar_legend.py_1_",
      "distance": 1.16148042678833,
      "file_path": "examples/pie_and_polar_charts/polar_legend.py",
      "start_line": 1,
      "end_line": 41,
      "tokens": 337,
      "context_length": 48249
    },
    {
      "position": 107,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/_tight_layout.py__auto_adjust_subplotpars.16__auto_adjust_subplotpars.25.1",
      "distance": 1.1616153717041016,
      "file_path": "lib/matplotlib/_tight_layout.py",
      "start_line": 96,
      "end_line": 157,
      "tokens": 738,
      "context_length": 48987
    },
    {
      "position": 108,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/backends/_backend_tk.py_FigureManagerTk.resize_FigureManagerTk.show.1.self._shown.1",
      "distance": 1.1621419191360474,
      "file_path": "lib/matplotlib/backends/_backend_tk.py",
      "start_line": 514,
      "end_line": 541,
      "tokens": 297,
      "context_length": 49284
    },
    {
      "position": 109,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/backends/_backend_tk.py_FigureManagerTk.create_with_canvas_FigureManagerTk.create_with_canvas.2.18.1",
      "distance": 1.1629328727722168,
      "file_path": "lib/matplotlib/backends/_backend_tk.py",
      "start_line": 456,
      "end_line": 491,
      "tokens": 359,
      "context_length": 49643
    },
    {
      "position": 110,
      "id": "/tmp/repos/matplotlib/tutorials/intermediate/arranging_axes.py_196_",
      "distance": 1.1630406379699707,
      "file_path": "tutorials/intermediate/arranging_axes.py",
      "start_line": 345,
      "end_line": 413,
      "tokens": 671,
      "context_length": 50314
    },
    {
      "position": 111,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/legend_handler.py_HandlerStepPatch.create_artists_HandlerStepPatch.create_artists.2.5.1",
      "distance": 1.1635055541992188,
      "file_path": "lib/matplotlib/legend_handler.py",
      "start_line": 408,
      "end_line": 418,
      "tokens": 124,
      "context_length": 50438
    },
    {
      "position": 112,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/figure.py_FigureBase.add_subplot.2_FigureBase._add_axes_internal.10.1",
      "distance": 1.1645978689193726,
      "file_path": "lib/matplotlib/figure.py",
      "start_line": 716,
      "end_line": 756,
      "tokens": 454,
      "context_length": 50892,
      "file_pos": 29
    },
    {
      "position": 113,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/figure.py_FigureBase._suplabels_FigureBase._suplabels.17.1",
      "distance": 1.1647398471832275,
      "file_path": "lib/matplotlib/figure.py",
      "start_line": 288,
      "end_line": 366,
      "tokens": 707,
      "context_length": 51599,
      "file_pos": 29
    },
    {
      "position": 114,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/figure.py_SubFigure_SubFigure.dpi.1.1",
      "distance": 1.1660962104797363,
      "file_path": "lib/matplotlib/figure.py",
      "start_line": 2114,
      "end_line": 2210,
      "tokens": 788,
      "context_length": 52387,
      "file_pos": 29
    },
    {
      "position": 115,
      "id": "/tmp/repos/matplotlib/examples/subplots_axes_and_figures/colorbar_placement.py_1_cmaps_40.1",
      "distance": 1.1662266254425049,
      "file_path": "examples/subplots_axes_and_figures/colorbar_placement.py",
      "start_line": 1,
      "end_line": 82,
      "tokens": 738,
      "context_length": 53125
    },
    {
      "position": 116,
      "id": "/tmp/repos/matplotlib/tutorials/intermediate/legend_guide.py_HandlerEllipse_",
      "distance": 1.1665105819702148,
      "file_path": "tutorials/intermediate/legend_guide.py",
      "start_line": 286,
      "end_line": 305,
      "tokens": 193,
      "context_length": 53318,
      "file_pos": 30
    },
    {
      "position": 117,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/pyplot.py_figure.2_figure.10.1",
      "distance": 1.1667165756225586,
      "file_path": "lib/matplotlib/pyplot.py",
      "start_line": 776,
      "end_line": 842,
      "tokens": 679,
      "context_length": 53997
    },
    {
      "position": 118,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/legend_handler.py_HandlerPatch._create_patch_HandlerPatch.create_artists.p.4.1",
      "distance": 1.16757333278656,
      "file_path": "lib/matplotlib/legend_handler.py",
      "start_line": 363,
      "end_line": 381,
      "tokens": 205,
      "context_length": 54202
    },
    {
      "position": 119,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/figure.py_SubFigure._redo_transform_rel_fig_SubFigure._redo_transform_rel_fig.11.2.self.bbox_relative.p1.1",
      "distance": 1.1687524318695068,
      "file_path": "lib/matplotlib/figure.py",
      "start_line": 2236,
      "end_line": 2262,
      "tokens": 312,
      "context_length": 54514,
      "file_pos": 30
    },
    {
      "position": 120,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/backends/qt_editor/figureoptions.py_figure_edit.apply_callback_",
      "distance": 1.1690971851348877,
      "file_path": "lib/matplotlib/backends/qt_editor/figureoptions.py",
      "start_line": 177,
      "end_line": 264,
      "tokens": 735,
      "context_length": 55249
    },
    {
      "position": 121,
      "id": "/tmp/repos/matplotlib/examples/event_handling/legend_picking.py_1_",
      "distance": 1.1691803932189941,
      "file_path": "examples/event_handling/legend_picking.py",
      "start_line": 1,
      "end_line": 52,
      "tokens": 401,
      "context_length": 55650
    },
    {
      "position": 122,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/backends/backend_gtk4.py_FigureCanvasGTK4._update_device_pixel_ratio_FigureCanvasGTK4._draw_func.2",
      "distance": 1.17213773727417,
      "file_path": "lib/matplotlib/backends/backend_gtk4.py",
      "start_line": 206,
      "end_line": 219,
      "tokens": 139,
      "context_length": 55789
    },
    {
      "position": 123,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/backends/backend_gtk3.py_FigureCanvasGTK3._get_key_FigureCanvasGTK3._draw_rubberband.3",
      "distance": 1.1722421646118164,
      "file_path": "lib/matplotlib/backends/backend_gtk3.py",
      "start_line": 207,
      "end_line": 241,
      "tokens": 351,
      "context_length": 56140
    },
    {
      "position": 124,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/figure.py_SubFigure.get_axes_SubFigure.draw.3.3.6.self.stale.1",
      "distance": 1.1723663806915283,
      "file_path": "lib/matplotlib/figure.py",
      "start_line": 2306,
      "end_line": 2327,
      "tokens": 149,
      "context_length": 56289,
      "file_pos": 32
    },
    {
      "position": 125,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/legend.py_Legend._findoffset_Legend._findoffset.3.1",
      "distance": 1.1731657981872559,
      "file_path": "lib/matplotlib/legend.py",
      "start_line": 646,
      "end_line": 661,
      "tokens": 189,
      "context_length": 56478,
      "file_pos": 32
    },
    {
      "position": 126,
      "id": "/tmp/repos/matplotlib/tutorials/provisional/mosaic.py_6_axd_72.1",
      "distance": 1.1760205030441284,
      "file_path": "tutorials/provisional/mosaic.py",
      "start_line": 59,
      "end_line": 170,
      "tokens": 789,
      "context_length": 57267
    },
    {
      "position": 127,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/legend.py_23__get_legend_handles_labels.5.1",
      "distance": 1.1764178276062012,
      "file_path": "lib/matplotlib/legend.py",
      "start_line": 1160,
      "end_line": 1205,
      "tokens": 390,
      "context_length": 57657,
      "file_pos": 33
    },
    {
      "position": 128,
      "id": "/tmp/repos/matplotlib/tutorials/colors/colorbar_only.py_cmap_48_",
      "distance": 1.1765270233154297,
      "file_path": "tutorials/colors/colorbar_only.py",
      "start_line": 88,
      "end_line": 131,
      "tokens": 357,
      "context_length": 58014
    },
    {
      "position": 129,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/figure.py_SubFigure.get_layout_engine_SubFigure.axes.2.1",
      "distance": 1.179202914237976,
      "file_path": "lib/matplotlib/figure.py",
      "start_line": 2288,
      "end_line": 2304,
      "tokens": 149,
      "context_length": 58163,
      "file_pos": 34
    },
    {
      "position": 130,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/legend_handler.py_HandlerTuple.create_artists_HandlerTuple.create_artists.handler_map.8.1",
      "distance": 1.1794627904891968,
      "file_path": "lib/matplotlib/legend_handler.py",
      "start_line": 766,
      "end_line": 797,
      "tokens": 264,
      "context_length": 58427
    },
    {
      "position": 131,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/pyplot.py_140_160",
      "distance": 1.179821252822876,
      "file_path": "lib/matplotlib/pyplot.py",
      "start_line": 2289,
      "end_line": 2364,
      "tokens": 763,
      "context_length": 59190
    },
    {
      "position": 132,
      "id": "/tmp/repos/matplotlib/examples/subplots_axes_and_figures/custom_figure_class.py_x_",
      "distance": 1.180731177330017,
      "file_path": "examples/subplots_axes_and_figures/custom_figure_class.py",
      "start_line": 35,
      "end_line": 52,
      "tokens": 115,
      "context_length": 59305
    },
    {
      "position": 133,
      "id": "/tmp/repos/matplotlib/examples/misc/anchored_artists.py_AnchoredSizeBar_AnchoredSizeBar.__init__.6",
      "distance": 1.1812207698822021,
      "file_path": "examples/misc/anchored_artists.py",
      "start_line": 51,
      "end_line": 68,
      "tokens": 211,
      "context_length": 59516
    },
    {
      "position": 134,
      "id": "/tmp/repos/matplotlib/tutorials/colors/colorbar_only.py_1_47",
      "distance": 1.1816284656524658,
      "file_path": "tutorials/colors/colorbar_only.py",
      "start_line": 1,
      "end_line": 86,
      "tokens": 734,
      "context_length": 60250
    },
    {
      "position": 135,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/backends/backend_gtk4.py_FigureCanvasGTK4._mpl_modifiers_FigureCanvasGTK4._mpl_modifiers.3.1",
      "distance": 1.181971549987793,
      "file_path": "lib/matplotlib/backends/backend_gtk4.py",
      "start_line": 174,
      "end_line": 187,
      "tokens": 154,
      "context_length": 60404
    },
    {
      "position": 136,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/legend.py_Legend._auto_legend_data_Legend._auto_legend_data.8.1",
      "distance": 1.1824219226837158,
      "file_path": "lib/matplotlib/legend.py",
      "start_line": 863,
      "end_line": 896,
      "tokens": 242,
      "context_length": 60646,
      "file_pos": 36
    },
    {
      "position": 137,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/backends/backend_gtk3.py_FigureCanvasGTK3_FigureCanvasGTK3.set_cursor.window.2.3",
      "distance": 1.1826238632202148,
      "file_path": "lib/matplotlib/backends/backend_gtk3.py",
      "start_line": 55,
      "end_line": 110,
      "tokens": 524,
      "context_length": 61170
    },
    {
      "position": 138,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/collections.py_PathCollection.legend_elements.5_PathCollection.legend_elements.15.1",
      "distance": 1.182771921157837,
      "file_path": "lib/matplotlib/collections.py",
      "start_line": 1072,
      "end_line": 1144,
      "tokens": 676,
      "context_length": 61846
    },
    {
      "position": 139,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/backends/backend_gtk3.py_FigureCanvasGTK3._mpl_modifiers_FigureCanvasGTK3._mpl_modifiers.2.1",
      "distance": 1.1830613613128662,
      "file_path": "lib/matplotlib/backends/backend_gtk3.py",
      "start_line": 196,
      "end_line": 205,
      "tokens": 121,
      "context_length": 61967
    },
    {
      "position": 140,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/_constrained_layout.py_get_margin_from_padding_get_margin_from_padding.13.1",
      "distance": 1.1830941438674927,
      "file_path": "lib/matplotlib/_constrained_layout.py",
      "start_line": 300,
      "end_line": 335,
      "tokens": 391,
      "context_length": 62358,
      "file_pos": 37
    },
    {
      "position": 141,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/offsetbox.py_AnchoredOffsetbox.update_frame_AnchoredOffsetbox.draw.2.self.stale.1",
      "distance": 1.1833546161651611,
      "file_path": "lib/matplotlib/offsetbox.py",
      "start_line": 1067,
      "end_line": 1086,
      "tokens": 154,
      "context_length": 62512
    },
    {
      "position": 142,
      "id": "/tmp/repos/matplotlib/examples/misc/anchored_artists.py_1_draw_ellipse.5",
      "distance": 1.1843293905258179,
      "file_path": "examples/misc/anchored_artists.py",
      "start_line": 1,
      "end_line": 48,
      "tokens": 450,
      "context_length": 62962
    },
    {
      "position": 143,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/figure.py_Figure.draw_Figure.draw.3.4",
      "distance": 1.1857070922851562,
      "file_path": "lib/matplotlib/figure.py",
      "start_line": 3108,
      "end_line": 3138,
      "tokens": 209,
      "context_length": 63171,
      "file_pos": 38
    },
    {
      "position": 144,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/figure.py_Figure.waitforbuttonpress_Figure.execute_constrained_layout.3.1",
      "distance": 1.186769962310791,
      "file_path": "lib/matplotlib/figure.py",
      "start_line": 3429,
      "end_line": 3462,
      "tokens": 252,
      "context_length": 63423,
      "file_pos": 38
    },
    {
      "position": 145,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/backends/backend_wx.py__FigureCanvasWxBase._mpl_modifiers__FigureCanvasWxBase._mpl_modifiers.2.3.1.1",
      "distance": 1.1874446868896484,
      "file_path": "lib/matplotlib/backends/backend_wx.py",
      "start_line": 699,
      "end_line": 712,
      "tokens": 143,
      "context_length": 63566
    }
  ],
  "files": [
    {
      "file_path": "tutorials/intermediate/constrainedlayout_guide.py",
      "position": 1,
      "tokens": 6566,
      "context_length": 6566
    },
    {
      "file_path": "examples/subplots_axes_and_figures/demo_constrained_layout.py",
      "position": 2,
      "tokens": 430,
      "context_length": 6996
    },
    {
      "file_path": "lib/matplotlib/figure.py",
      "position": 3,
      "tokens": 29217,
      "context_length": 36213
    },
    {
      "file_path": "lib/matplotlib/layout_engine.py",
      "position": 4,
      "tokens": 2366,
      "context_length": 38579
    },
    {
      "file_path": "lib/matplotlib/_constrained_layout.py",
      "position": 5,
      "tokens": 7366,
      "context_length": 45945
    },
    {
      "file_path": "tutorials/intermediate/tight_layout_guide.py",
      "position": 6,
      "tokens": 2153,
      "context_length": 48098
    },
    {
      "file_path": "examples/text_labels_and_annotations/legend_demo.py",
      "position": 7,
      "tokens": 1901,
      "context_length": 49999
    },
    {
      "file_path": "examples/subplots_axes_and_figures/demo_tight_layout.py",
      "position": 8,
      "tokens": 879,
      "context_length": 50878
    },
    {
      "file_path": "lib/matplotlib/legend.py",
      "position": 9,
      "tokens": 11101,
      "context_length": 61979
    },
    {
      "file_path": "tutorials/intermediate/legend_guide.py",
      "position": 10,
      "tokens": 2664,
      "context_length": 64643
    },
    {
      "file_path": "lib/matplotlib/_layoutgrid.py",
      "position": 11,
      "tokens": 5436,
      "context_length": 70079
    },
    {
      "file_path": "examples/subplots_axes_and_figures/subfigures.py",
      "position": 12,
      "tokens": 1423,
      "context_length": 71502
    },
    {
      "file_path": "lib/matplotlib/_tight_layout.py",
      "position": 13,
      "tokens": 2929,
      "context_length": 74431
    },
    {
      "file_path": "examples/text_labels_and_annotations/figlegend_demo.py",
      "position": 14,
      "tokens": 256,
      "context_length": 74687
    },
    {
      "file_path": "examples/text_labels_and_annotations/custom_legends.py",
      "position": 15,
      "tokens": 557,
      "context_length": 75244
    },
    {
      "file_path": "examples/userdemo/simple_legend01.py",
      "position": 16,
      "tokens": 199,
      "context_length": 75443
    },
    {
      "file_path": "examples/lines_bars_and_markers/scatter_with_legend.py",
      "position": 17,
      "tokens": 930,
      "context_length": 76373
    },
    {
      "file_path": "lib/matplotlib/backends/qt_editor/figureoptions.py",
      "position": 18,
      "tokens": 2176,
      "context_length": 78549
    },
    {
      "file_path": "lib/matplotlib/legend_handler.py",
      "position": 19,
      "tokens": 6871,
      "context_length": 85420
    },
    {
      "file_path": "tutorials/intermediate/arranging_axes.py",
      "position": 20,
      "tokens": 3950,
      "context_length": 89370
    },
    {
      "file_path": "lib/matplotlib/pyplot.py",
      "position": 21,
      "tokens": 28617,
      "context_length": 117987
    },
    {
      "file_path": "examples/text_labels_and_annotations/legend.py",
      "position": 22,
      "tokens": 233,
      "context_length": 118220
    },
    {
      "file_path": "examples/userdemo/simple_legend02.py",
      "position": 23,
      "tokens": 136,
      "context_length": 118356
    },
    {
      "file_path": "lib/matplotlib/backends/_backend_gtk.py",
      "position": 24,
      "tokens": 2524,
      "context_length": 120880
    },
    {
      "file_path": "lib/matplotlib/artist.py",
      "position": 25,
      "tokens": 13720,
      "context_length": 134600
    },
    {
      "file_path": "examples/text_labels_and_annotations/label_subplots.py",
      "position": 26,
      "tokens": 603,
      "context_length": 135203
    },
    {
      "file_path": "lib/matplotlib/backends/backend_gtk4.py",
      "position": 27,
      "tokens": 4722,
      "context_length": 139925
    },
    {
      "file_path": "examples/pie_and_polar_charts/polar_legend.py",
      "position": 28,
      "tokens": 337,
      "context_length": 140262
    },
    {
      "file_path": "lib/matplotlib/backends/_backend_tk.py",
      "position": 29,
      "tokens": 9506,
      "context_length": 149768
    },
    {
      "file_path": "examples/subplots_axes_and_figures/colorbar_placement.py",
      "position": 30,
      "tokens": 869,
      "context_length": 150637
    },
    {
      "file_path": "examples/event_handling/legend_picking.py",
      "position": 31,
      "tokens": 401,
      "context_length": 151038
    },
    {
      "file_path": "lib/matplotlib/backends/backend_gtk3.py",
      "position": 32,
      "tokens": 4996,
      "context_length": 156034
    },
    {
      "file_path": "tutorials/provisional/mosaic.py",
      "position": 33,
      "tokens": 2696,
      "context_length": 158730
    },
    {
      "file_path": "tutorials/colors/colorbar_only.py",
      "position": 34,
      "tokens": 1091,
      "context_length": 159821
    },
    {
      "file_path": "examples/subplots_axes_and_figures/custom_figure_class.py",
      "position": 35,
      "tokens": 371,
      "context_length": 160192
    },
    {
      "file_path": "examples/misc/anchored_artists.py",
      "position": 36,
      "tokens": 793,
      "context_length": 160985
    },
    {
      "file_path": "lib/matplotlib/collections.py",
      "position": 37,
      "tokens": 17807,
      "context_length": 178792
    },
    {
      "file_path": "lib/matplotlib/offsetbox.py",
      "position": 38,
      "tokens": 12411,
      "context_length": 191203
    },
    {
      "file_path": "lib/matplotlib/backends/backend_wx.py",
      "position": 39,
      "tokens": 12188,
      "context_length": 203391
    }
  ]
}