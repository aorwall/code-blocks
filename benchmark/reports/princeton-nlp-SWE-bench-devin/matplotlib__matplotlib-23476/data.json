{
  "instance_id": "matplotlib__matplotlib-23476",
  "model_patch": "diff --git a/lib/matplotlib/figure.py b/lib/matplotlib/figure.py\nindex c55864243a..011dba2e31 100644\n--- a/lib/matplotlib/figure.py\n+++ b/lib/matplotlib/figure.py\n@@ -3044,17 +3044,18 @@ class Figure(FigureBase):\n         self.__dict__ = state\n \n         # re-initialise some of the unstored state information\n+        print(\"DEBUG: DPI before re-initialization:\", self.dpi)\n         FigureCanvasBase(self)  # Set self.canvas.\n-\n+        # lazy import to avoid circularity\n+        import matplotlib.pyplot as plt\n+        import matplotlib._pylab_helpers as pylab_helpers\n         if restore_to_pylab:\n-            # lazy import to avoid circularity\n-            import matplotlib.pyplot as plt\n-            import matplotlib._pylab_helpers as pylab_helpers\n             allnums = plt.get_fignums()\n             num = max(allnums) + 1 if allnums else 1\n             mgr = plt._backend_mod.new_figure_manager_given_figure(num, self)\n             pylab_helpers.Gcf._set_new_active_manager(mgr)\n-            plt.draw_if_interactive()\n+        plt.draw_if_interactive()\n+        print(\"DEBUG: DPI after re-initialization:\", self.dpi)\n \n         self.stale = True\n \n",
  "model_name_or_path": "Devin",
  "pass_or_fail": "fail",
  "model_patch_files": [
    "lib/matplotlib/figure.py"
  ],
  "repo": "matplotlib/matplotlib",
  "base_commit": "33a0599711d26dc2b79f851c6daed4947df7c167",
  "patch": "diff --git a/lib/matplotlib/figure.py b/lib/matplotlib/figure.py\n--- a/lib/matplotlib/figure.py\n+++ b/lib/matplotlib/figure.py\n@@ -3023,6 +3023,9 @@ def __getstate__(self):\n         # Set cached renderer to None -- it can't be pickled.\n         state[\"_cachedRenderer\"] = None\n \n+        # discard any changes to the dpi due to pixel ratio changes\n+        state[\"_dpi\"] = state.get('_original_dpi', state['_dpi'])\n+\n         # add version information to the state\n         state['__mpl_version__'] = mpl.__version__\n \n",
  "test_patch": "diff --git a/lib/matplotlib/tests/test_figure.py b/lib/matplotlib/tests/test_figure.py\n--- a/lib/matplotlib/tests/test_figure.py\n+++ b/lib/matplotlib/tests/test_figure.py\n@@ -2,6 +2,7 @@\n from datetime import datetime\n import io\n from pathlib import Path\n+import pickle\n import platform\n from threading import Timer\n from types import SimpleNamespace\n@@ -1380,3 +1381,11 @@ def test_deepcopy():\n \n     assert ax.get_xlim() == (1e-1, 1e2)\n     assert fig2.axes[0].get_xlim() == (0, 1)\n+\n+\n+def test_unpickle_with_device_pixel_ratio():\n+    fig = Figure(dpi=42)\n+    fig.canvas._set_device_pixel_ratio(7)\n+    assert fig.dpi == 42*7\n+    fig2 = pickle.loads(pickle.dumps(fig))\n+    assert fig2.dpi == 42\n",
  "problem_statement": "[Bug]: DPI of a figure is doubled after unpickling on M1 Mac\n### Bug summary\r\n\r\nWhen a figure is unpickled, it's dpi is doubled. This behaviour happens every time and if done in a loop it can cause an `OverflowError`.\r\n\r\n### Code for reproduction\r\n\r\n```python\r\nimport numpy as np\r\nimport matplotlib\r\nimport matplotlib.pyplot as plt\r\nimport pickle\r\nimport platform\r\n\r\nprint(matplotlib.get_backend())\r\nprint('Matplotlib ver:', matplotlib.__version__)\r\nprint('Platform:', platform.platform())\r\nprint('System:', platform.system())\r\nprint('Release:', platform.release())\r\nprint('Python ver:', platform.python_version())\r\n\r\n\r\ndef dump_load_get_dpi(fig):\r\n    with open('sinus.pickle','wb') as file:\r\n        pickle.dump(fig, file)\r\n\r\n    with open('sinus.pickle', 'rb') as blob:\r\n        fig2 = pickle.load(blob)\r\n    return fig2, fig2.dpi\r\n\r\n\r\ndef run():\r\n    fig = plt.figure()\r\n    x = np.linspace(0,2*np.pi)\r\n    y = np.sin(x)\r\n\r\n    for i in range(32):\r\n        print(f'{i}: {fig.dpi}')\r\n        fig, dpi = dump_load_get_dpi(fig)\r\n\r\n\r\nif __name__ == '__main__':\r\n    run()\r\n```\r\n\r\n\r\n### Actual outcome\r\n\r\n```\r\nMacOSX\r\nMatplotlib ver: 3.5.2\r\nPlatform: macOS-12.4-arm64-arm-64bit\r\nSystem: Darwin\r\nRelease: 21.5.0\r\nPython ver: 3.9.12\r\n0: 200.0\r\n1: 400.0\r\n2: 800.0\r\n3: 1600.0\r\n4: 3200.0\r\n5: 6400.0\r\n6: 12800.0\r\n7: 25600.0\r\n8: 51200.0\r\n9: 102400.0\r\n10: 204800.0\r\n11: 409600.0\r\n12: 819200.0\r\n13: 1638400.0\r\n14: 3276800.0\r\n15: 6553600.0\r\n16: 13107200.0\r\n17: 26214400.0\r\n18: 52428800.0\r\n19: 104857600.0\r\n20: 209715200.0\r\n21: 419430400.0\r\nTraceback (most recent call last):\r\n  File \"/Users/wsykala/projects/matplotlib/example.py\", line 34, in <module>\r\n    run()\r\n  File \"/Users/wsykala/projects/matplotlib/example.py\", line 30, in run\r\n    fig, dpi = dump_load_get_dpi(fig)\r\n  File \"/Users/wsykala/projects/matplotlib/example.py\", line 20, in dump_load_get_dpi\r\n    fig2 = pickle.load(blob)\r\n  File \"/Users/wsykala/miniconda3/envs/playground/lib/python3.9/site-packages/matplotlib/figure.py\", line 2911, in __setstate__\r\n    mgr = plt._backend_mod.new_figure_manager_given_figure(num, self)\r\n  File \"/Users/wsykala/miniconda3/envs/playground/lib/python3.9/site-packages/matplotlib/backend_bases.py\", line 3499, in new_figure_manager_given_figure\r\n    canvas = cls.FigureCanvas(figure)\r\n  File \"/Users/wsykala/miniconda3/envs/playground/lib/python3.9/site-packages/matplotlib/backends/backend_macosx.py\", line 32, in __init__\r\n    _macosx.FigureCanvas.__init__(self, width, height)\r\nOverflowError: signed integer is greater than maximum\r\n```\r\n\r\n### Expected outcome\r\n\r\n```\r\nMacOSX\r\nMatplotlib ver: 3.5.2\r\nPlatform: macOS-12.4-arm64-arm-64bit\r\nSystem: Darwin\r\nRelease: 21.5.0\r\nPython ver: 3.9.12\r\n0: 200.0\r\n1: 200.0\r\n2: 200.0\r\n3: 200.0\r\n4: 200.0\r\n5: 200.0\r\n6: 200.0\r\n7: 200.0\r\n8: 200.0\r\n9: 200.0\r\n10: 200.0\r\n11: 200.0\r\n12: 200.0\r\n13: 200.0\r\n14: 200.0\r\n15: 200.0\r\n16: 200.0\r\n17: 200.0\r\n18: 200.0\r\n19: 200.0\r\n20: 200.0\r\n21: 200.0\r\n22: 200.0\r\n```\r\n\r\n### Additional information\r\n\r\nThis seems to happen only on M1 MacBooks and the version of python doesn't matter.\r\n\r\n### Operating system\r\n\r\nOS/X\r\n\r\n### Matplotlib Version\r\n\r\n3.5.2\r\n\r\n### Matplotlib Backend\r\n\r\nMacOSX\r\n\r\n### Python version\r\n\r\n3.9.12\r\n\r\n### Jupyter version\r\n\r\n_No response_\r\n\r\n### Installation\r\n\r\npip\n",
  "hints_text": "I suspect this will also affect anything that know how to deal with high-dpi screens.\r\n\r\nFor, .... reasons..., when we handle high-dpi cases by doubling the dpi on the figure (we have ideas how to fix this, but it is a fair amount of work) when we show it.  We are saving the doubled dpi which when re-loaded in doubled again.\r\n\r\nI think there is an easy fix.....",
  "created_at": "2022-07-22T18:58:22Z",
  "version": "3.5",
  "FAIL_TO_PASS": "[\"lib/matplotlib/tests/test_figure.py::test_unpickle_with_device_pixel_ratio\"]",
  "PASS_TO_PASS": "[\"lib/matplotlib/tests/test_figure.py::TestSubplotMosaic::test_all_nested[png]\", \"lib/matplotlib/tests/test_figure.py::TestSubplotMosaic::test_basic[x0-png]\", \"lib/matplotlib/tests/test_figure.py::TestSubplotMosaic::test_basic[x1-png]\", \"lib/matplotlib/tests/test_figure.py::TestSubplotMosaic::test_empty[x0-None-png]\", \"lib/matplotlib/tests/test_figure.py::TestSubplotMosaic::test_empty[x1-SKIP-png]\", \"lib/matplotlib/tests/test_figure.py::TestSubplotMosaic::test_empty[x2-0-png]\", \"lib/matplotlib/tests/test_figure.py::TestSubplotMosaic::test_empty[x3-None-png]\", \"lib/matplotlib/tests/test_figure.py::TestSubplotMosaic::test_empty[x4-SKIP-png]\", \"lib/matplotlib/tests/test_figure.py::TestSubplotMosaic::test_empty[x5-0-png]\", \"lib/matplotlib/tests/test_figure.py::TestSubplotMosaic::test_fail[AAA\\\\nc\\\\nBBB-All\", \"lib/matplotlib/tests/test_figure.py::TestSubplotMosaic::test_fail[x0-(?m)we\", \"lib/matplotlib/tests/test_figure.py::TestSubplotMosaic::test_fail[x1-There\", \"lib/matplotlib/tests/test_figure.py::TestSubplotMosaic::test_fail[x3-All\", \"lib/matplotlib/tests/test_figure.py::TestSubplotMosaic::test_fail_list_of_str\", \"lib/matplotlib/tests/test_figure.py::TestSubplotMosaic::test_hashable_keys[png]\", \"lib/matplotlib/tests/test_figure.py::TestSubplotMosaic::test_nested[png]\", \"lib/matplotlib/tests/test_figure.py::TestSubplotMosaic::test_nested_tuple[png]\", \"lib/matplotlib/tests/test_figure.py::TestSubplotMosaic::test_nested_user_order\", \"lib/matplotlib/tests/test_figure.py::TestSubplotMosaic::test_share_all\", \"lib/matplotlib/tests/test_figure.py::TestSubplotMosaic::test_single_str_input[AAA\\\\nBBB-png]\", \"lib/matplotlib/tests/test_figure.py::TestSubplotMosaic::test_single_str_input[ABC\\\\nDEF-png]\", \"lib/matplotlib/tests/test_figure.py::TestSubplotMosaic::test_single_str_input[\\\\nAAA\\\\nBBB\\\\n-png]\", \"lib/matplotlib/tests/test_figure.py::TestSubplotMosaic::test_string_parser\", \"lib/matplotlib/tests/test_figure.py::TestSubplotMosaic::test_subplot_kw[None-png]\", \"lib/matplotlib/tests/test_figure.py::TestSubplotMosaic::test_subplot_kw[subplot_kw0-png]\", \"lib/matplotlib/tests/test_figure.py::TestSubplotMosaic::test_subplot_kw[subplot_kw1-png]\", \"lib/matplotlib/tests/test_figure.py::TestSubplotMosaic::test_user_order[abc]\", \"lib/matplotlib/tests/test_figure.py::TestSubplotMosaic::test_user_order[acb]\", \"lib/matplotlib/tests/test_figure.py::TestSubplotMosaic::test_user_order[bac]\", \"lib/matplotlib/tests/test_figure.py::TestSubplotMosaic::test_user_order[bca]\", \"lib/matplotlib/tests/test_figure.py::TestSubplotMosaic::test_user_order[cab]\", \"lib/matplotlib/tests/test_figure.py::TestSubplotMosaic::test_user_order[cba]\", \"lib/matplotlib/tests/test_figure.py::test_add_artist[pdf]\", \"lib/matplotlib/tests/test_figure.py::test_add_artist[png]\", \"lib/matplotlib/tests/test_figure.py::test_add_axes_kwargs\", \"lib/matplotlib/tests/test_figure.py::test_add_subplot_invalid\", \"lib/matplotlib/tests/test_figure.py::test_add_subplot_kwargs\", \"lib/matplotlib/tests/test_figure.py::test_add_subplot_subclass\", \"lib/matplotlib/tests/test_figure.py::test_add_subplot_twotuple\", \"lib/matplotlib/tests/test_figure.py::test_align_labels[png]\", \"lib/matplotlib/tests/test_figure.py::test_align_labels_stray_axes\", \"lib/matplotlib/tests/test_figure.py::test_alpha[png]\", \"lib/matplotlib/tests/test_figure.py::test_animated_with_canvas_change[eps]\", \"lib/matplotlib/tests/test_figure.py::test_animated_with_canvas_change[pdf]\", \"lib/matplotlib/tests/test_figure.py::test_animated_with_canvas_change[png]\", \"lib/matplotlib/tests/test_figure.py::test_autofmt_xdate[both]\", \"lib/matplotlib/tests/test_figure.py::test_autofmt_xdate[major]\", \"lib/matplotlib/tests/test_figure.py::test_autofmt_xdate[minor]\", \"lib/matplotlib/tests/test_figure.py::test_axes_removal\", \"lib/matplotlib/tests/test_figure.py::test_axes_remove\", \"lib/matplotlib/tests/test_figure.py::test_change_dpi\", \"lib/matplotlib/tests/test_figure.py::test_clf_keyword\", \"lib/matplotlib/tests/test_figure.py::test_clf_not_redefined\", \"lib/matplotlib/tests/test_figure.py::test_deepcopy\", \"lib/matplotlib/tests/test_figure.py::test_figaspect\", \"lib/matplotlib/tests/test_figure.py::test_fignum_exists\", \"lib/matplotlib/tests/test_figure.py::test_figure[pdf]\", \"lib/matplotlib/tests/test_figure.py::test_figure[png]\", \"lib/matplotlib/tests/test_figure.py::test_figure_clear[clear]\", \"lib/matplotlib/tests/test_figure.py::test_figure_clear[clf]\", \"lib/matplotlib/tests/test_figure.py::test_figure_label\", \"lib/matplotlib/tests/test_figure.py::test_figure_legend[pdf]\", \"lib/matplotlib/tests/test_figure.py::test_figure_legend[png]\", \"lib/matplotlib/tests/test_figure.py::test_figure_repr\", \"lib/matplotlib/tests/test_figure.py::test_fspath[eps]\", \"lib/matplotlib/tests/test_figure.py::test_fspath[pdf]\", \"lib/matplotlib/tests/test_figure.py::test_fspath[png]\", \"lib/matplotlib/tests/test_figure.py::test_fspath[ps]\", \"lib/matplotlib/tests/test_figure.py::test_fspath[svg]\", \"lib/matplotlib/tests/test_figure.py::test_gca\", \"lib/matplotlib/tests/test_figure.py::test_ginput\", \"lib/matplotlib/tests/test_figure.py::test_invalid_figure_add_axes\", \"lib/matplotlib/tests/test_figure.py::test_invalid_figure_size[-1-1]\", \"lib/matplotlib/tests/test_figure.py::test_invalid_figure_size[1-nan]\", \"lib/matplotlib/tests/test_figure.py::test_invalid_figure_size[inf-1]\", \"lib/matplotlib/tests/test_figure.py::test_invalid_layouts\", \"lib/matplotlib/tests/test_figure.py::test_iterability_axes_argument\", \"lib/matplotlib/tests/test_figure.py::test_kwargs_pass\", \"lib/matplotlib/tests/test_figure.py::test_picking_does_not_stale\", \"lib/matplotlib/tests/test_figure.py::test_removed_axis\", \"lib/matplotlib/tests/test_figure.py::test_reused_gridspec\", \"lib/matplotlib/tests/test_figure.py::test_savefig\", \"lib/matplotlib/tests/test_figure.py::test_savefig_backend\", \"lib/matplotlib/tests/test_figure.py::test_savefig_pixel_ratio[Agg]\", \"lib/matplotlib/tests/test_figure.py::test_savefig_pixel_ratio[Cairo]\", \"lib/matplotlib/tests/test_figure.py::test_savefig_warns\", \"lib/matplotlib/tests/test_figure.py::test_set_fig_size\", \"lib/matplotlib/tests/test_figure.py::test_subfigure[png]\", \"lib/matplotlib/tests/test_figure.py::test_subfigure_double[png]\", \"lib/matplotlib/tests/test_figure.py::test_subfigure_dpi\", \"lib/matplotlib/tests/test_figure.py::test_subfigure_pdf\", \"lib/matplotlib/tests/test_figure.py::test_subfigure_scatter_size[png]\", \"lib/matplotlib/tests/test_figure.py::test_subfigure_spanning\", \"lib/matplotlib/tests/test_figure.py::test_subfigure_ss[png]\", \"lib/matplotlib/tests/test_figure.py::test_subfigure_ticks\", \"lib/matplotlib/tests/test_figure.py::test_subfigure_tightbbox\", \"lib/matplotlib/tests/test_figure.py::test_subplots_shareax_loglabels\", \"lib/matplotlib/tests/test_figure.py::test_suptitle[pdf]\", \"lib/matplotlib/tests/test_figure.py::test_suptitle[png]\", \"lib/matplotlib/tests/test_figure.py::test_suptitle_fontproperties\", \"lib/matplotlib/tests/test_figure.py::test_tightbbox\", \"lib/matplotlib/tests/test_figure.py::test_too_many_figures\", \"lib/matplotlib/tests/test_figure.py::test_valid_layouts\", \"lib/matplotlib/tests/test_figure.py::test_waitforbuttonpress\"]",
  "environment_setup_commit": "de98877e3dc45de8dd441d008f23d88738dc015d",
  "patch_files": [
    "lib/matplotlib/figure.py"
  ],
  "test_patch_files": [
    "lib/matplotlib/tests/test_figure.py"
  ],
  "patch_diff_details": {
    "lib/matplotlib/figure.py": {
      "diffs": [
        {
          "start_line_old": 3026,
          "end_line_old": 3026,
          "file_pos": 19,
          "file_context_length": 172027,
          "closest_snippet_id": "/tmp/repos/matplotlib/lib/matplotlib/figure.py_Figure.ginput.handler_Figure.ginput.9.1",
          "closest_snippet_line_distance": 218,
          "pos": 32,
          "context_length": 24712
        }
      ]
    }
  },
  "vectors": 3910,
  "snippets": [
    {
      "position": 1,
      "id": "/tmp/repos/matplotlib/examples/ticks/date_precision_and_epochs.py_date1_45_",
      "distance": 0.9414946436882019,
      "file_path": "examples/ticks/date_precision_and_epochs.py",
      "start_line": 85,
      "end_line": 158,
      "tokens": 651,
      "context_length": 651
    },
    {
      "position": 2,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/backends/backend_ps.py_FigureCanvasPS._print_figure.print_figure_impl_FigureCanvasPS._print_figure.print_figure_impl.2.24",
      "distance": 0.9467824697494507,
      "file_path": "lib/matplotlib/backends/backend_ps.py",
      "start_line": 916,
      "end_line": 973,
      "tokens": 593,
      "context_length": 1244
    },
    {
      "position": 3,
      "id": "/tmp/repos/matplotlib/examples/lines_bars_and_markers/psd_demo.py_62_yrange_116.1",
      "distance": 0.9518701434135437,
      "file_path": "examples/lines_bars_and_markers/psd_demo.py",
      "start_line": 82,
      "end_line": 153,
      "tokens": 751,
      "context_length": 1995
    },
    {
      "position": 4,
      "id": "/tmp/repos/matplotlib/examples/subplots_axes_and_figures/figure_size_units.py_1_",
      "distance": 0.9540998339653015,
      "file_path": "examples/subplots_axes_and_figures/figure_size_units.py",
      "start_line": 1,
      "end_line": 82,
      "tokens": 629,
      "context_length": 2624
    },
    {
      "position": 5,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/backends/_backend_tk.py_FigureManagerTk._update_window_dpi_FigureManagerTk.show.1.self._shown.1",
      "distance": 0.9585716724395752,
      "file_path": "lib/matplotlib/backends/_backend_tk.py",
      "start_line": 489,
      "end_line": 523,
      "tokens": 365,
      "context_length": 2989
    },
    {
      "position": 6,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/backends/backend_macosx.py_FigureCanvasMac_FigureCanvasMac.required_interactive_framework.resize.scale.6",
      "distance": 0.9658094644546509,
      "file_path": "lib/matplotlib/backends/backend_macosx.py",
      "start_line": 20,
      "end_line": 102,
      "tokens": 749,
      "context_length": 3738
    },
    {
      "position": 7,
      "id": "/tmp/repos/matplotlib/examples/event_handling/pick_event_demo.py_onpick2_",
      "distance": 0.9671616554260254,
      "file_path": "examples/event_handling/pick_event_demo.py",
      "start_line": 153,
      "end_line": 206,
      "tokens": 391,
      "context_length": 4129
    },
    {
      "position": 8,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/pyplot.py_figure.2_figure.10.1",
      "distance": 0.967416524887085,
      "file_path": "lib/matplotlib/pyplot.py",
      "start_line": 785,
      "end_line": 843,
      "tokens": 613,
      "context_length": 4742
    },
    {
      "position": 9,
      "id": "/tmp/repos/matplotlib/examples/ticks/date_precision_and_epochs.py_1_44",
      "distance": 0.9721556305885315,
      "file_path": "examples/ticks/date_precision_and_epochs.py",
      "start_line": 1,
      "end_line": 83,
      "tokens": 739,
      "context_length": 5481
    },
    {
      "position": 10,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/backends/backend_macosx.py_FigureManagerMac_",
      "distance": 0.9752346277236938,
      "file_path": "lib/matplotlib/backends/backend_macosx.py",
      "start_line": 144,
      "end_line": 183,
      "tokens": 258,
      "context_length": 5739
    },
    {
      "position": 11,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/backends/backend_ps.py_FigureCanvasPS_FigureCanvasPS._print_ps.16",
      "distance": 0.9788180589675903,
      "file_path": "lib/matplotlib/backends/backend_ps.py",
      "start_line": 810,
      "end_line": 857,
      "tokens": 440,
      "context_length": 6179
    },
    {
      "position": 12,
      "id": "/tmp/repos/matplotlib/examples/showcase/mandelbrot.py_4_",
      "distance": 0.9799051284790039,
      "file_path": "examples/showcase/mandelbrot.py",
      "start_line": 30,
      "end_line": 74,
      "tokens": 508,
      "context_length": 6687
    },
    {
      "position": 13,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/backends/backend_ps.py_FigureCanvasPS._print_figure.25_FigureCanvasPS._print_figure.25.4.2.2",
      "distance": 0.9852036833763123,
      "file_path": "lib/matplotlib/backends/backend_ps.py",
      "start_line": 975,
      "end_line": 994,
      "tokens": 281,
      "context_length": 6968
    },
    {
      "position": 14,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/backends/backend_agg.py_FigureCanvasAgg_",
      "distance": 0.9876006841659546,
      "file_path": "lib/matplotlib/backends/backend_agg.py",
      "start_line": 387,
      "end_line": 568,
      "tokens": 1467,
      "context_length": 8435
    },
    {
      "position": 15,
      "id": "/tmp/repos/matplotlib/examples/images_contours_and_fields/pcolor_demo.py_1_Z1.1",
      "distance": 0.9879412055015564,
      "file_path": "examples/images_contours_and_fields/pcolor_demo.py",
      "start_line": 1,
      "end_line": 97,
      "tokens": 788,
      "context_length": 9223
    },
    {
      "position": 16,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/backends/backend_gtk3.py_FigureCanvasGTK3.scroll_event_FigureCanvasGTK3.size_allocate.6",
      "distance": 0.9888525009155273,
      "file_path": "lib/matplotlib/backends/backend_gtk3.py",
      "start_line": 153,
      "end_line": 202,
      "tokens": 461,
      "context_length": 9684
    },
    {
      "position": 17,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/_cm.py__PuRd_data__Purples_data.1",
      "distance": 0.9888932704925537,
      "file_path": "lib/matplotlib/_cm.py",
      "start_line": 689,
      "end_line": 711,
      "tokens": 600,
      "context_length": 10284
    },
    {
      "position": 18,
      "id": "/tmp/repos/matplotlib/tutorials/introductory/quick_start.py_x_273_362",
      "distance": 0.9896711111068726,
      "file_path": "tutorials/introductory/quick_start.py",
      "start_line": 291,
      "end_line": 388,
      "tokens": 986,
      "context_length": 11270
    },
    {
      "position": 19,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/_cm.py__Pastel1_data__Pastel2_data.1",
      "distance": 0.9918317794799805,
      "file_path": "lib/matplotlib/_cm.py",
      "start_line": 896,
      "end_line": 917,
      "tokens": 509,
      "context_length": 11779
    },
    {
      "position": 20,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/_cm.py__OrRd_data__PiYG_data.1",
      "distance": 0.9920591115951538,
      "file_path": "lib/matplotlib/_cm.py",
      "start_line": 611,
      "end_line": 635,
      "tokens": 657,
      "context_length": 12436
    },
    {
      "position": 21,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/_cm.py__cubehelix_data__g36.1.1",
      "distance": 0.9952706098556519,
      "file_path": "lib/matplotlib/_cm.py",
      "start_line": 106,
      "end_line": 156,
      "tokens": 787,
      "context_length": 13223
    },
    {
      "position": 22,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/backends/_backend_tk.py_FigureCanvasTk._update_device_pixel_ratio_FigureCanvasTk._update_device_pixel_ratio.ratio.2.4",
      "distance": 0.9953771233558655,
      "file_path": "lib/matplotlib/backends/_backend_tk.py",
      "start_line": 217,
      "end_line": 227,
      "tokens": 167,
      "context_length": 13390
    },
    {
      "position": 23,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/backend_bases.py_GraphicsContextBase.get_dashes_FigureCanvasBase.scroll_pick_id.1",
      "distance": 0.9995368719100952,
      "file_path": "lib/matplotlib/backend_bases.py",
      "start_line": 811,
      "end_line": 1662,
      "tokens": 6393,
      "context_length": 19783
    },
    {
      "position": 24,
      "id": "/tmp/repos/matplotlib/examples/ticks/ticks_too_many.py_1_",
      "distance": 1.004197597503662,
      "file_path": "examples/ticks/ticks_too_many.py",
      "start_line": 1,
      "end_line": 77,
      "tokens": 742,
      "context_length": 20525
    },
    {
      "position": 25,
      "id": "/tmp/repos/matplotlib/examples/event_handling/data_browser.py_4_",
      "distance": 1.0048253536224365,
      "file_path": "examples/event_handling/data_browser.py",
      "start_line": 91,
      "end_line": 110,
      "tokens": 160,
      "context_length": 20685
    },
    {
      "position": 26,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/backends/backend_wx.py_functools_PIXELS_PER_INCH.1",
      "distance": 1.0078225135803223,
      "file_path": "lib/matplotlib/backends/backend_wx.py",
      "start_line": 10,
      "end_line": 39,
      "tokens": 196,
      "context_length": 20881
    },
    {
      "position": 27,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/_cm.py__RdBu_data__RdGy_data.1",
      "distance": 1.0081861019134521,
      "file_path": "lib/matplotlib/_cm.py",
      "start_line": 713,
      "end_line": 739,
      "tokens": 719,
      "context_length": 21600
    },
    {
      "position": 28,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/figure.py_Figure.__init___Figure.__init__.self.transSubfigure.1",
      "distance": 1.0082790851593018,
      "file_path": "lib/matplotlib/figure.py",
      "start_line": 2244,
      "end_line": 2412,
      "tokens": 1518,
      "context_length": 23118,
      "file_pos": 19
    },
    {
      "position": 29,
      "id": "/tmp/repos/matplotlib/examples/event_handling/pick_event_demo.py_1_19",
      "distance": 1.016063928604126,
      "file_path": "examples/event_handling/pick_event_demo.py",
      "start_line": 1,
      "end_line": 94,
      "tokens": 758,
      "context_length": 23876
    },
    {
      "position": 30,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/figure.py_Figure.ginput.handler_Figure.ginput.9.1",
      "distance": 1.0202311277389526,
      "file_path": "lib/matplotlib/figure.py",
      "start_line": 3244,
      "end_line": 3286,
      "tokens": 432,
      "context_length": 24308,
      "file_pos": 19
    },
    {
      "position": 31,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/backends/backend_webagg_core.py_FigureCanvasWebAggCore.handle_send_image_mode__ALLOWED_TOOL_ITEMS.1",
      "distance": 1.0210020542144775,
      "file_path": "lib/matplotlib/backends/backend_webagg_core.py",
      "start_line": 348,
      "end_line": 377,
      "tokens": 228,
      "context_length": 24536
    },
    {
      "position": 32,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/figure.py_Figure.__getstate___Figure.__getstate__.13.1",
      "distance": 1.0213567018508911,
      "file_path": "lib/matplotlib/figure.py",
      "start_line": 3015,
      "end_line": 3033,
      "tokens": 176,
      "context_length": 24712,
      "file_pos": 20
    },
    {
      "position": 33,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/backends/backend_cairo.py_FigureCanvasCairo._save_",
      "distance": 1.0214074850082397,
      "file_path": "lib/matplotlib/backends/backend_cairo.py",
      "start_line": 493,
      "end_line": 554,
      "tokens": 525,
      "context_length": 25237
    },
    {
      "position": 34,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/figure.py_Figure.get_figwidth_Figure.clear.2",
      "distance": 1.0220983028411865,
      "file_path": "lib/matplotlib/figure.py",
      "start_line": 2895,
      "end_line": 2959,
      "tokens": 381,
      "context_length": 25618,
      "file_pos": 21
    },
    {
      "position": 35,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/pyplot.py_1__log.1",
      "distance": 1.0223815441131592,
      "file_path": "lib/matplotlib/pyplot.py",
      "start_line": 1,
      "end_line": 88,
      "tokens": 666,
      "context_length": 26284
    },
    {
      "position": 36,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/figure.py_SubFigure.dpi_5_SubFigure._get_renderer.1.1",
      "distance": 1.0224242210388184,
      "file_path": "lib/matplotlib/figure.py",
      "start_line": 2093,
      "end_line": 2115,
      "tokens": 137,
      "context_length": 26421,
      "file_pos": 21
    },
    {
      "position": 37,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/_cm.py__Set3_data_122",
      "distance": 1.024071455001831,
      "file_path": "lib/matplotlib/_cm.py",
      "start_line": 942,
      "end_line": 959,
      "tokens": 398,
      "context_length": 26819
    },
    {
      "position": 38,
      "id": "/tmp/repos/matplotlib/examples/scales/asinh_demo.py_1_ax.1",
      "distance": 1.024420142173767,
      "file_path": "examples/scales/asinh_demo.py",
      "start_line": 1,
      "end_line": 86,
      "tokens": 729,
      "context_length": 27548
    },
    {
      "position": 39,
      "id": "/tmp/repos/matplotlib/examples/event_handling/pick_event_demo2.py_onpick_",
      "distance": 1.0246293544769287,
      "file_path": "examples/event_handling/pick_event_demo2.py",
      "start_line": 34,
      "end_line": 55,
      "tokens": 149,
      "context_length": 27697
    },
    {
      "position": 40,
      "id": "/tmp/repos/matplotlib/examples/lines_bars_and_markers/psd_demo.py_1_61",
      "distance": 1.0271406173706055,
      "file_path": "examples/lines_bars_and_markers/psd_demo.py",
      "start_line": 1,
      "end_line": 81,
      "tokens": 762,
      "context_length": 28459
    },
    {
      "position": 41,
      "id": "/tmp/repos/matplotlib/examples/event_handling/resample.py_6_",
      "distance": 1.0272748470306396,
      "file_path": "examples/event_handling/resample.py",
      "start_line": 62,
      "end_line": 78,
      "tokens": 136,
      "context_length": 28595
    },
    {
      "position": 42,
      "id": "/tmp/repos/matplotlib/examples/misc/rasterization_demo.py_1_32",
      "distance": 1.0278044939041138,
      "file_path": "examples/misc/rasterization_demo.py",
      "start_line": 1,
      "end_line": 73,
      "tokens": 753,
      "context_length": 29348
    },
    {
      "position": 43,
      "id": "/tmp/repos/matplotlib/tutorials/introductory/quick_start.py_xdata_442",
      "distance": 1.029354453086853,
      "file_path": "tutorials/introductory/quick_start.py",
      "start_line": 389,
      "end_line": 474,
      "tokens": 931,
      "context_length": 30279
    },
    {
      "position": 44,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/_cm.py__PuBuGn_data__PuOr_data.1",
      "distance": 1.03053617477417,
      "file_path": "lib/matplotlib/_cm.py",
      "start_line": 663,
      "end_line": 687,
      "tokens": 670,
      "context_length": 30949
    },
    {
      "position": 45,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/_cm.py__RdYlGn_data__Reds_data.1",
      "distance": 1.0317176580429077,
      "file_path": "lib/matplotlib/_cm.py",
      "start_line": 767,
      "end_line": 791,
      "tokens": 613,
      "context_length": 31562
    },
    {
      "position": 46,
      "id": "/tmp/repos/matplotlib/tutorials/provisional/mosaic.py_6_axd_72.1",
      "distance": 1.0322624444961548,
      "file_path": "tutorials/provisional/mosaic.py",
      "start_line": 59,
      "end_line": 170,
      "tokens": 789,
      "context_length": 32351
    },
    {
      "position": 47,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/backends/backend_gtk4.py_FigureCanvasGTK4.scroll_event_FigureCanvasGTK4.resize_event.7",
      "distance": 1.0324230194091797,
      "file_path": "lib/matplotlib/backends/backend_gtk4.py",
      "start_line": 113,
      "end_line": 160,
      "tokens": 440,
      "context_length": 32791
    },
    {
      "position": 48,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/backends/backend_cairo.py_FigureCanvasCairo.print_png_FigureCanvasCairo._get_printed_image_surface.6.1",
      "distance": 1.0345737934112549,
      "file_path": "lib/matplotlib/backends/backend_cairo.py",
      "start_line": 474,
      "end_line": 491,
      "tokens": 181,
      "context_length": 32972
    },
    {
      "position": 49,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/backends/backend_pdf.py_FigureCanvasPdf_",
      "distance": 1.035448670387268,
      "file_path": "lib/matplotlib/backends/backend_pdf.py",
      "start_line": 2774,
      "end_line": 2820,
      "tokens": 296,
      "context_length": 33268
    }
  ],
  "files": [
    {
      "file_path": "examples/ticks/date_precision_and_epochs.py",
      "position": 1,
      "tokens": 1390,
      "context_length": 1390
    },
    {
      "file_path": "lib/matplotlib/backends/backend_ps.py",
      "position": 2,
      "tokens": 12184,
      "context_length": 13574
    },
    {
      "file_path": "examples/lines_bars_and_markers/psd_demo.py",
      "position": 3,
      "tokens": 1695,
      "context_length": 15269
    },
    {
      "file_path": "examples/subplots_axes_and_figures/figure_size_units.py",
      "position": 4,
      "tokens": 629,
      "context_length": 15898
    },
    {
      "file_path": "lib/matplotlib/backends/_backend_tk.py",
      "position": 5,
      "tokens": 9294,
      "context_length": 25192
    },
    {
      "file_path": "lib/matplotlib/backends/backend_macosx.py",
      "position": 6,
      "tokens": 1501,
      "context_length": 26693
    },
    {
      "file_path": "examples/event_handling/pick_event_demo.py",
      "position": 7,
      "tokens": 1596,
      "context_length": 28289
    },
    {
      "file_path": "lib/matplotlib/pyplot.py",
      "position": 8,
      "tokens": 28071,
      "context_length": 56360
    },
    {
      "file_path": "examples/showcase/mandelbrot.py",
      "position": 9,
      "tokens": 747,
      "context_length": 57107
    },
    {
      "file_path": "lib/matplotlib/backends/backend_agg.py",
      "position": 10,
      "tokens": 4869,
      "context_length": 61976
    },
    {
      "file_path": "examples/images_contours_and_fields/pcolor_demo.py",
      "position": 11,
      "tokens": 1045,
      "context_length": 63021
    },
    {
      "file_path": "lib/matplotlib/backends/backend_gtk3.py",
      "position": 12,
      "tokens": 5041,
      "context_length": 68062
    },
    {
      "file_path": "lib/matplotlib/_cm.py",
      "position": 13,
      "tokens": 28443,
      "context_length": 96505
    },
    {
      "file_path": "tutorials/introductory/quick_start.py",
      "position": 14,
      "tokens": 5941,
      "context_length": 102446
    },
    {
      "file_path": "lib/matplotlib/backend_bases.py",
      "position": 15,
      "tokens": 28007,
      "context_length": 130453
    },
    {
      "file_path": "examples/ticks/ticks_too_many.py",
      "position": 16,
      "tokens": 742,
      "context_length": 131195
    },
    {
      "file_path": "examples/event_handling/data_browser.py",
      "position": 17,
      "tokens": 765,
      "context_length": 131960
    },
    {
      "file_path": "lib/matplotlib/backends/backend_wx.py",
      "position": 18,
      "tokens": 12182,
      "context_length": 144142
    },
    {
      "file_path": "lib/matplotlib/figure.py",
      "position": 19,
      "tokens": 27885,
      "context_length": 172027
    },
    {
      "file_path": "lib/matplotlib/backends/backend_webagg_core.py",
      "position": 20,
      "tokens": 4008,
      "context_length": 176035
    },
    {
      "file_path": "lib/matplotlib/backends/backend_cairo.py",
      "position": 21,
      "tokens": 4537,
      "context_length": 180572
    },
    {
      "file_path": "examples/scales/asinh_demo.py",
      "position": 22,
      "tokens": 917,
      "context_length": 181489
    },
    {
      "file_path": "examples/event_handling/pick_event_demo2.py",
      "position": 23,
      "tokens": 380,
      "context_length": 181869
    },
    {
      "file_path": "examples/event_handling/resample.py",
      "position": 24,
      "tokens": 615,
      "context_length": 182484
    },
    {
      "file_path": "examples/misc/rasterization_demo.py",
      "position": 25,
      "tokens": 930,
      "context_length": 183414
    },
    {
      "file_path": "tutorials/provisional/mosaic.py",
      "position": 26,
      "tokens": 2273,
      "context_length": 185687
    },
    {
      "file_path": "lib/matplotlib/backends/backend_gtk4.py",
      "position": 27,
      "tokens": 4508,
      "context_length": 190195
    },
    {
      "file_path": "lib/matplotlib/backends/backend_pdf.py",
      "position": 28,
      "tokens": 24622,
      "context_length": 214817
    }
  ]
}