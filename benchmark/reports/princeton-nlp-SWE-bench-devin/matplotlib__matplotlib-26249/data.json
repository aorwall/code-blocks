{
  "instance_id": "matplotlib__matplotlib-26249",
  "model_patch": "",
  "model_name_or_path": "Devin",
  "pass_or_fail": "fail",
  "model_patch_files": [],
  "repo": "matplotlib/matplotlib",
  "base_commit": "f017315dd5e56c367e43fc7458fd0ed5fd9482a2",
  "patch": "diff --git a/lib/mpl_toolkits/mplot3d/axes3d.py b/lib/mpl_toolkits/mplot3d/axes3d.py\n--- a/lib/mpl_toolkits/mplot3d/axes3d.py\n+++ b/lib/mpl_toolkits/mplot3d/axes3d.py\n@@ -2249,7 +2249,11 @@ def scatter(self, xs, ys, zs=0, zdir='z', s=20, c=None, depthshade=True,\n             *[np.ravel(np.ma.filled(t, np.nan)) for t in [xs, ys, zs]])\n         s = np.ma.ravel(s)  # This doesn't have to match x, y in size.\n \n-        xs, ys, zs, s, c = cbook.delete_masked_points(xs, ys, zs, s, c)\n+        xs, ys, zs, s, c, color = cbook.delete_masked_points(\n+            xs, ys, zs, s, c, kwargs.get('color', None)\n+            )\n+        if kwargs.get('color', None):\n+            kwargs['color'] = color\n \n         # For xs and ys, 2D scatter() will do the copying.\n         if np.may_share_memory(zs_orig, zs):  # Avoid unnecessary copies.\n",
  "test_patch": "diff --git a/lib/mpl_toolkits/mplot3d/tests/test_axes3d.py b/lib/mpl_toolkits/mplot3d/tests/test_axes3d.py\n--- a/lib/mpl_toolkits/mplot3d/tests/test_axes3d.py\n+++ b/lib/mpl_toolkits/mplot3d/tests/test_axes3d.py\n@@ -2226,3 +2226,29 @@ def test_mutating_input_arrays_y_and_z(fig_test, fig_ref):\n     y = [0.0, 0.0, 0.0]\n     z = [0.0, 0.0, 0.0]\n     ax2.plot(x, y, z, 'o-')\n+\n+\n+def test_scatter_masked_color():\n+    \"\"\"\n+    Test color parameter usage with non-finite coordinate arrays.\n+\n+    GH#26236\n+    \"\"\"\n+\n+    x = [np.nan, 1, 2,  1]\n+    y = [0, np.inf, 2,  1]\n+    z = [0, 1, -np.inf, 1]\n+    colors = [\n+        [0.0, 0.0, 0.0, 1],\n+        [0.0, 0.0, 0.0, 1],\n+        [0.0, 0.0, 0.0, 1],\n+        [0.0, 0.0, 0.0, 1]\n+    ]\n+\n+    fig = plt.figure()\n+    ax = fig.add_subplot(projection='3d')\n+    path3d = ax.scatter(x, y, z, color=colors)\n+\n+    # Assert sizes' equality\n+    assert len(path3d.get_offsets()) ==\\\n+           len(super(type(path3d), path3d).get_facecolors())\n",
  "problem_statement": "[Bug]: ax.scatter (projection='3d') - incorrect handling of NaN \n### Bug summary\n\nIn axis 3D projection NaN values are not handled correctly, apparently the values are masked out (as it should be) but the mask is not applied to a color array that may not have NaN in the same position.\n\n### Code for reproduction\n\n```python\nimport numpy as np\r\nfrom matplotlib import pylab as plt\r\nfig = plt.figure()\r\nax = fig.add_subplot(projection='3d')\r\nax.scatter([1,np.nan,3], [2,np.nan,4], [3, np.nan,5], color=[[.5,.5,.5,.5]]*3, s=11.5)\n```\n\n\n### Actual outcome\n\n```python\r\nValueError                                Traceback (most recent call last)\r\nCell In[24], line 1\r\n----> 1 ax.scatter([1,np.nan,3], [2,np.nan,4], [3, np.nan,5], color=[[.5,.5,.5,.5]]*3, s=11.5)\r\n\r\nFile ~/Python/lib/python3.11/site-packages/matplotlib/__init__.py:1442, in _preprocess_data.<locals>.inner(ax, data, *args, **kwargs)\r\n   1439 @functools.wraps(func)\r\n   1440 def inner(ax, *args, data=None, **kwargs):\r\n   1441     if data is None:\r\n-> 1442         return func(ax, *map(sanitize_sequence, args), **kwargs)\r\n   1444     bound = new_sig.bind(ax, *args, **kwargs)\r\n   1445     auto_label = (bound.arguments.get(label_namer)\r\n   1446                   or bound.kwargs.get(label_namer))\r\n\r\nFile ~/Python/lib/python3.11/site-packages/mpl_toolkits/mplot3d/axes3d.py:2275, in Axes3D.scatter(self, xs, ys, zs, zdir, s, c, depthshade, *args, **kwargs)\r\n   2272 if np.may_share_memory(zs_orig, zs):  # Avoid unnecessary copies.\r\n   2273     zs = zs.copy()\r\n-> 2275 patches = super().scatter(xs, ys, s=s, c=c, *args, **kwargs)\r\n   2276 art3d.patch_collection_2d_to_3d(patches, zs=zs, zdir=zdir,\r\n   2277                                 depthshade=depthshade)\r\n   2279 if self._zmargin < 0.05 and xs.size > 0:\r\n\r\nFile ~/Python/lib/python3.11/site-packages/matplotlib/__init__.py:1442, in _preprocess_data.<locals>.inner(ax, data, *args, **kwargs)\r\n   1439 @functools.wraps(func)\r\n   1440 def inner(ax, *args, data=None, **kwargs):\r\n   1441     if data is None:\r\n-> 1442         return func(ax, *map(sanitize_sequence, args), **kwargs)\r\n   1444     bound = new_sig.bind(ax, *args, **kwargs)\r\n   1445     auto_label = (bound.arguments.get(label_namer)\r\n   1446                   or bound.kwargs.get(label_namer))\r\n\r\nFile ~/Python/lib/python3.11/site-packages/matplotlib/axes/_axes.py:4602, in Axes.scatter(self, x, y, s, c, marker, cmap, norm, vmin, vmax, alpha, linewidths, edgecolors, plotnonfinite, **kwargs)\r\n   4599 if edgecolors is None:\r\n   4600     orig_edgecolor = kwargs.get('edgecolor', None)\r\n   4601 c, colors, edgecolors = \\\r\n-> 4602     self._parse_scatter_color_args(\r\n   4603         c, edgecolors, kwargs, x.size,\r\n   4604         get_next_color_func=self._get_patches_for_fill.get_next_color)\r\n   4606 if plotnonfinite and colors is None:\r\n   4607     c = np.ma.masked_invalid(c)\r\n\r\nFile ~/Python/lib/python3.11/site-packages/matplotlib/axes/_axes.py:4455, in Axes._parse_scatter_color_args(c, edgecolors, kwargs, xsize, get_next_color_func)\r\n   4451     else:\r\n   4452         if len(colors) not in (0, 1, xsize):\r\n   4453             # NB: remember that a single color is also acceptable.\r\n   4454             # Besides *colors* will be an empty array if c == 'none'.\r\n-> 4455             raise invalid_shape_exception(len(colors), xsize)\r\n   4456 else:\r\n   4457     colors = None  # use cmap, norm after collection is created\r\n\r\nValueError: 'c' argument has 3 elements, which is inconsistent with 'x' and 'y' with size 2.\r\n\r\n```\n\n### Expected outcome\n\nA plot with the first and 3rd data point.\n\n### Additional information\n\nUnconditionally reproducible.  \r\n\r\nI have not seen this before, but I may never have called it this way before.\n\n### Operating system\n\nFedora 38\n\n### Matplotlib Version\n\n3.7.1\n\n### Matplotlib Backend\n\nTkAgg\n\n### Python version\n\n3.11.4\n\n### Jupyter version\n\nIPython 8.14.0\n\n### Installation\n\npip\n",
  "hints_text": "Thank you for your clear report and diagnosis @2sn.  I have reproduced this with our `main` development branch.\nChange this: \r\nhttps://github.com/matplotlib/matplotlib/blob/f017315dd5e56c367e43fc7458fd0ed5fd9482a2/lib/mpl_toolkits/mplot3d/axes3d.py#L2252\r\n\r\nto \r\n\r\n```  \r\nif kwargs.get('color', None):\r\n    xs, ys, zs, s, c, kwargs['color'] = cbook.delete_masked_points(xs, ys, zs, s, c, kwargs['color'])\r\nelse:\r\n    xs, ys, zs, s, c = cbook.delete_masked_points(xs, ys, zs, s, c)\r\n```\r\n\r\non first sight solve the problem. \r\nI am willing to take this issue if no one alredy did it.\n@artemshekh go for it",
  "created_at": "2023-07-04T07:17:41Z",
  "version": "3.7",
  "FAIL_TO_PASS": "[\"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_scatter_masked_color\"]",
  "PASS_TO_PASS": "[\"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::TestVoxels::test_alpha[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::TestVoxels::test_calling_conventions\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::TestVoxels::test_edge_style[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::TestVoxels::test_named_colors[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::TestVoxels::test_rgb_data[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::TestVoxels::test_simple[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::TestVoxels::test_xyz[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_Poly3DCollection_get_edgecolor\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_Poly3DCollection_get_facecolor\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_add_collection3d_zs_array[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_add_collection3d_zs_scalar[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_arc_pathpatch[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_aspects[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_aspects_adjust_box[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_autoscale\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_ax3d_tickcolour\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_axes3d_cla[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_axes3d_focal_length[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_axes3d_focal_length_checks\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_axes3d_isometric[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_axes3d_labelpad[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_axes3d_ortho[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_axes3d_primary_views[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_axes3d_repr\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_axes3d_rotated[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_bar3d[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_bar3d_colors\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_bar3d_lightsource\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_bar3d_notshaded[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_bar3d_shaded[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_colorbar_pos\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_computed_zorder[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_contour3d[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_contour3d_1d_input\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_contour3d_extend3d[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_contourf3d[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_contourf3d_extend[png-both-levels0]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_contourf3d_extend[png-max-levels2]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_contourf3d_extend[png-min-levels1]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_contourf3d_fill[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_draw_single_lines_from_Nx1\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_equal_box_aspect[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_errorbar3d[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_errorbar3d_errorevery[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_format_coord\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_get_axis_position\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_grid_off[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_invalid_axes_limits[set_xlim3d-left-inf]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_invalid_axes_limits[set_xlim3d-left-nan]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_invalid_axes_limits[set_xlim3d-right-inf]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_invalid_axes_limits[set_xlim3d-right-nan]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_invalid_axes_limits[set_ylim3d-bottom-inf]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_invalid_axes_limits[set_ylim3d-bottom-nan]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_invalid_axes_limits[set_ylim3d-top-inf]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_invalid_axes_limits[set_ylim3d-top-nan]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_invalid_axes_limits[set_zlim3d-bottom-inf]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_invalid_axes_limits[set_zlim3d-bottom-nan]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_invalid_axes_limits[set_zlim3d-top-inf]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_invalid_axes_limits[set_zlim3d-top-nan]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_invalid_line_data\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_inverted[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_inverted_cla\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_inverted_zaxis\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_invisible_axes[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_invisible_ticks_axis[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_line3d_set_get_data_3d\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_lines3d[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_lines_dists[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_lines_dists_nowarning\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_margins\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_margins_errors[TypeError-args6-kwargs6-Cannot\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_margins_errors[TypeError-args7-kwargs7-Cannot\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_margins_errors[TypeError-args8-kwargs8-Cannot\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_margins_errors[TypeError-args9-kwargs9-Must\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_margins_errors[ValueError-args0-kwargs0-margin\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_margins_errors[ValueError-args1-kwargs1-margin\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_margins_errors[ValueError-args2-kwargs2-margin\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_margins_errors[ValueError-args3-kwargs3-margin\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_margins_errors[ValueError-args4-kwargs4-margin\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_margins_errors[ValueError-args5-kwargs5-margin\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_marker_draw_order_data_reversed[png--50]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_marker_draw_order_data_reversed[png-130]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_marker_draw_order_view_rotated[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_minor_ticks[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_mixedsamplesraises\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_mixedsubplots[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_mutating_input_arrays_y_and_z[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_pan\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_panecolor_rcparams[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_patch_collection_modification[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_patch_modification\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_pathpatch_3d[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_plot_3d_from_2d[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_plot_scalar[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_plot_surface_None_arg[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_plotsurface_1d_raises\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_poly3dcollection_alpha[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_poly3dcollection_closed[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_poly3dcollection_verts_validation\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_poly_collection_2d_to_3d_empty\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_proj_axes_cube[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_proj_axes_cube_ortho[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_proj_transform\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_quiver3D_smoke[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_quiver3d[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_quiver3d_empty[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_quiver3d_masked[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_scalarmap_update[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_scatter3d[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_scatter3d_color[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_scatter3d_linewidth[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_scatter3d_linewidth_modification[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_scatter3d_modification[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_scatter3d_sorting[png-False]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_scatter3d_sorting[png-True]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_scatter_spiral[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_set_zlim\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_shared_axes_retick\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_shared_view[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_stem3d[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_subfigure_simple\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_surface3d[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_surface3d_label_offset_tick_position[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_surface3d_masked[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_surface3d_masked_strides[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_surface3d_shaded[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_text3d[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_text3d_modification[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_text_3d[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_ticklabel_format[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_tight_layout_text[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_toolbar_zoom_pan[pan-1-None-expected4]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_toolbar_zoom_pan[pan-1-x-expected5]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_toolbar_zoom_pan[pan-1-y-expected6]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_toolbar_zoom_pan[zoom-1-None-expected0]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_toolbar_zoom_pan[zoom-1-x-expected1]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_toolbar_zoom_pan[zoom-1-y-expected2]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_toolbar_zoom_pan[zoom-3-None-expected3]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_tricontour[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_trisurf3d[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_trisurf3d_shaded[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_unautoscale[False-x]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_unautoscale[False-y]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_unautoscale[False-z]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_unautoscale[None-x]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_unautoscale[None-y]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_unautoscale[None-z]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_unautoscale[True-x]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_unautoscale[True-y]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_unautoscale[True-z]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_view_init_vertical_axis[x-proj_expected2-axis_lines_expected2-tickdirs_expected2]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_view_init_vertical_axis[y-proj_expected1-axis_lines_expected1-tickdirs_expected1]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_view_init_vertical_axis[z-proj_expected0-axis_lines_expected0-tickdirs_expected0]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_wireframe3d[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_wireframe3dzerocstride[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_wireframe3dzerorstride[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_wireframe3dzerostrideraises\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_world\"]",
  "environment_setup_commit": "0849036fd992a2dd133a0cffc3f84f58ccf1840f",
  "patch_files": [
    "lib/mpl_toolkits/mplot3d/axes3d.py"
  ],
  "test_patch_files": [
    "lib/mpl_toolkits/mplot3d/tests/test_axes3d.py"
  ],
  "patch_diff_details": {
    "lib/mpl_toolkits/mplot3d/axes3d.py": {
      "diffs": [
        {
          "start_line_old": 2252,
          "end_line_old": 2252,
          "file_pos": 8,
          "file_context_length": 115846,
          "closest_snippet_id": "/tmp/repos/matplotlib/lib/mpl_toolkits/mplot3d/axes3d.py_Axes3D.errorbar.75_Axes3D.errorbar.75.22",
          "closest_snippet_line_distance": 840,
          "pos": 29,
          "context_length": 28685
        }
      ]
    }
  },
  "vectors": 3867,
  "snippets": [
    {
      "position": 1,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/axes/_axes.py_Axes.bxp_Axes.scatter.path.1",
      "distance": 0.7127214670181274,
      "file_path": "lib/matplotlib/axes/_axes.py",
      "start_line": 4052,
      "end_line": 4686,
      "tokens": 6250,
      "context_length": 6250
    },
    {
      "position": 2,
      "id": "/tmp/repos/matplotlib/galleries/examples/images_contours_and_fields/pcolor_demo.py_1_Z1.1",
      "distance": 0.7818942070007324,
      "file_path": "galleries/examples/images_contours_and_fields/pcolor_demo.py",
      "start_line": 1,
      "end_line": 97,
      "tokens": 793,
      "context_length": 7043
    },
    {
      "position": 3,
      "id": "/tmp/repos/matplotlib/galleries/examples/mplot3d/scatter3d.py_1_",
      "distance": 0.7853179574012756,
      "file_path": "galleries/examples/mplot3d/scatter3d.py",
      "start_line": 1,
      "end_line": 41,
      "tokens": 278,
      "context_length": 7321
    },
    {
      "position": 4,
      "id": "/tmp/repos/matplotlib/galleries/users_explain/quick_start.py_438_513",
      "distance": 0.7929046154022217,
      "file_path": "galleries/users_explain/quick_start.py",
      "start_line": 489,
      "end_line": 575,
      "tokens": 1016,
      "context_length": 8337
    },
    {
      "position": 5,
      "id": "/tmp/repos/matplotlib/galleries/plot_types/3D/scatter3d_simple.py_1_",
      "distance": 0.8008099794387817,
      "file_path": "galleries/plot_types/3D/scatter3d_simple.py",
      "start_line": 1,
      "end_line": 30,
      "tokens": 156,
      "context_length": 8493
    },
    {
      "position": 6,
      "id": "/tmp/repos/matplotlib/galleries/examples/lines_bars_and_markers/masked_demo.py_1_",
      "distance": 0.8031982183456421,
      "file_path": "galleries/examples/lines_bars_and_markers/masked_demo.py",
      "start_line": 1,
      "end_line": 51,
      "tokens": 410,
      "context_length": 8903
    },
    {
      "position": 7,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/axes/_axes.py_Axes.scatter.34_Axes.hexbin",
      "distance": 0.8059248328208923,
      "file_path": "lib/matplotlib/axes/_axes.py",
      "start_line": 4687,
      "end_line": 5159,
      "tokens": 978,
      "context_length": 9881
    },
    {
      "position": 8,
      "id": "/tmp/repos/matplotlib/galleries/examples/mplot3d/2dcollections3d.py_1_",
      "distance": 0.807848334312439,
      "file_path": "galleries/examples/mplot3d/2dcollections3d.py",
      "start_line": 1,
      "end_line": 49,
      "tokens": 413,
      "context_length": 10294
    },
    {
      "position": 9,
      "id": "/tmp/repos/matplotlib/galleries/users_explain/quick_start.py_204_274",
      "distance": 0.8167562484741211,
      "file_path": "galleries/users_explain/quick_start.py",
      "start_line": 227,
      "end_line": 304,
      "tokens": 835,
      "context_length": 11129
    },
    {
      "position": 10,
      "id": "/tmp/repos/matplotlib/lib/mpl_toolkits/mplot3d/axes3d.py_Axes3D.plot_surface.ccount_Axes3D.plot_surface.28",
      "distance": 0.820011556148529,
      "file_path": "lib/mpl_toolkits/mplot3d/axes3d.py",
      "start_line": 1593,
      "end_line": 1666,
      "tokens": 790,
      "context_length": 11919,
      "file_pos": 8
    },
    {
      "position": 11,
      "id": "/tmp/repos/matplotlib/galleries/users_explain/quick_start.py_x_275_361",
      "distance": 0.8219813704490662,
      "file_path": "galleries/users_explain/quick_start.py",
      "start_line": 305,
      "end_line": 402,
      "tokens": 968,
      "context_length": 12887
    },
    {
      "position": 12,
      "id": "/tmp/repos/matplotlib/galleries/examples/pie_and_polar_charts/polar_scatter.py_1_",
      "distance": 0.8236820697784424,
      "file_path": "galleries/examples/pie_and_polar_charts/polar_scatter.py",
      "start_line": 1,
      "end_line": 70,
      "tokens": 513,
      "context_length": 13400
    },
    {
      "position": 13,
      "id": "/tmp/repos/matplotlib/galleries/examples/lines_bars_and_markers/filled_step.py_10_",
      "distance": 0.8269264698028564,
      "file_path": "galleries/examples/lines_bars_and_markers/filled_step.py",
      "start_line": 180,
      "end_line": 238,
      "tokens": 493,
      "context_length": 13893
    },
    {
      "position": 14,
      "id": "/tmp/repos/matplotlib/galleries/examples/specialty_plots/leftventricle_bullseye.py_6_",
      "distance": 0.8295575380325317,
      "file_path": "galleries/examples/specialty_plots/leftventricle_bullseye.py",
      "start_line": 94,
      "end_line": 155,
      "tokens": 697,
      "context_length": 14590
    },
    {
      "position": 15,
      "id": "/tmp/repos/matplotlib/galleries/users_explain/quick_start.py_xdata_437",
      "distance": 0.8332927823066711,
      "file_path": "galleries/users_explain/quick_start.py",
      "start_line": 403,
      "end_line": 488,
      "tokens": 925,
      "context_length": 15515
    },
    {
      "position": 16,
      "id": "/tmp/repos/matplotlib/galleries/examples/shapes_and_collections/scatter.py_1_",
      "distance": 0.8381554484367371,
      "file_path": "galleries/examples/shapes_and_collections/scatter.py",
      "start_line": 1,
      "end_line": 32,
      "tokens": 169,
      "context_length": 15684
    },
    {
      "position": 17,
      "id": "/tmp/repos/matplotlib/galleries/examples/images_contours_and_fields/pcolormesh_grids.py_1_48",
      "distance": 0.8468562960624695,
      "file_path": "galleries/examples/images_contours_and_fields/pcolormesh_grids.py",
      "start_line": 1,
      "end_line": 80,
      "tokens": 802,
      "context_length": 16486
    },
    {
      "position": 18,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/axes/_axes.py_Axes._fill_between_x_or_y.1_Axes._pcolorargs._valid_shading.13.1",
      "distance": 0.8485132455825806,
      "file_path": "lib/matplotlib/axes/_axes.py",
      "start_line": 5295,
      "end_line": 5857,
      "tokens": 5675,
      "context_length": 22161
    },
    {
      "position": 19,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/axes/_base.py__process_plot_var_args.__call____process_plot_var_args.__call__.9.3",
      "distance": 0.853596031665802,
      "file_path": "lib/matplotlib/axes/_base.py",
      "start_line": 241,
      "end_line": 312,
      "tokens": 744,
      "context_length": 22905
    },
    {
      "position": 20,
      "id": "/tmp/repos/matplotlib/galleries/examples/images_contours_and_fields/pcolormesh_grids.py_49_",
      "distance": 0.8557548522949219,
      "file_path": "galleries/examples/images_contours_and_fields/pcolormesh_grids.py",
      "start_line": 81,
      "end_line": 128,
      "tokens": 487,
      "context_length": 23392
    },
    {
      "position": 21,
      "id": "/tmp/repos/matplotlib/galleries/examples/lines_bars_and_markers/scatter_hist.py_10_",
      "distance": 0.8559062480926514,
      "file_path": "galleries/examples/lines_bars_and_markers/scatter_hist.py",
      "start_line": 57,
      "end_line": 123,
      "tokens": 695,
      "context_length": 24087
    },
    {
      "position": 22,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/axes/_base.py__process_plot_var_args._plot_args.7__AxesBase",
      "distance": 0.8567676544189453,
      "file_path": "lib/matplotlib/axes/_base.py",
      "start_line": 468,
      "end_line": 4536,
      "tokens": 813,
      "context_length": 24900
    },
    {
      "position": 23,
      "id": "/tmp/repos/matplotlib/galleries/examples/subplots_axes_and_figures/broken_axis.py_1_",
      "distance": 0.8570680618286133,
      "file_path": "galleries/examples/subplots_axes_and_figures/broken_axis.py",
      "start_line": 1,
      "end_line": 55,
      "tokens": 525,
      "context_length": 25425
    },
    {
      "position": 24,
      "id": "/tmp/repos/matplotlib/galleries/examples/subplots_axes_and_figures/secondary_axis.py_xnew_",
      "distance": 0.8594169616699219,
      "file_path": "galleries/examples/subplots_axes_and_figures/secondary_axis.py",
      "start_line": 104,
      "end_line": 195,
      "tokens": 656,
      "context_length": 26081
    },
    {
      "position": 25,
      "id": "/tmp/repos/matplotlib/galleries/examples/lines_bars_and_markers/scatter_masked.py_1_",
      "distance": 0.859609842300415,
      "file_path": "galleries/examples/lines_bars_and_markers/scatter_masked.py",
      "start_line": 1,
      "end_line": 33,
      "tokens": 244,
      "context_length": 26325
    },
    {
      "position": 26,
      "id": "/tmp/repos/matplotlib/galleries/examples/images_contours_and_fields/pcolor_demo.py_Z2_",
      "distance": 0.8642172813415527,
      "file_path": "galleries/examples/images_contours_and_fields/pcolor_demo.py",
      "start_line": 98,
      "end_line": 125,
      "tokens": 257,
      "context_length": 26582
    },
    {
      "position": 27,
      "id": "/tmp/repos/matplotlib/galleries/examples/images_contours_and_fields/quadmesh_demo.py_1_",
      "distance": 0.8669750094413757,
      "file_path": "galleries/examples/images_contours_and_fields/quadmesh_demo.py",
      "start_line": 1,
      "end_line": 52,
      "tokens": 450,
      "context_length": 27032
    },
    {
      "position": 28,
      "id": "/tmp/repos/matplotlib/lib/mpl_toolkits/mplot3d/axes3d.py_Axes3D.errorbar.75_Axes3D.errorbar.75.22",
      "distance": 0.8677505254745483,
      "file_path": "lib/mpl_toolkits/mplot3d/axes3d.py",
      "start_line": 3092,
      "end_line": 3149,
      "tokens": 862,
      "context_length": 27894,
      "file_pos": 19
    },
    {
      "position": 29,
      "id": "/tmp/repos/matplotlib/lib/mpl_toolkits/mplot3d/axes3d.py_Axes3D.scatter_Axes3D.scatter.14.1",
      "distance": 0.8682036399841309,
      "file_path": "lib/mpl_toolkits/mplot3d/axes3d.py",
      "start_line": 2195,
      "end_line": 2267,
      "tokens": 791,
      "context_length": 28685,
      "file_pos": 19
    },
    {
      "position": 30,
      "id": "/tmp/repos/matplotlib/lib/matplotlib/_cm.py__gist_rainbow_data__coolwarm_data",
      "distance": 0.8693532943725586,
      "file_path": "lib/matplotlib/_cm.py",
      "start_line": 1080,
      "end_line": 1211,
      "tokens": 458,
      "context_length": 29143
    },
    {
      "position": 31,
      "id": "/tmp/repos/matplotlib/galleries/users_explain/axes/colorbar_placement.py_1_cmaps_40.1",
      "distance": 0.8711293339729309,
      "file_path": "galleries/users_explain/axes/colorbar_placement.py",
      "start_line": 1,
      "end_line": 85,
      "tokens": 764,
      "context_length": 29907
    },
    {
      "position": 32,
      "id": "/tmp/repos/matplotlib/lib/mpl_toolkits/mplot3d/axes3d.py_Axes3D.errorbar.had_data_Axes3D.errorbar.eb_lines_style.1",
      "distance": 0.8714775443077087,
      "file_path": "lib/mpl_toolkits/mplot3d/axes3d.py",
      "start_line": 2955,
      "end_line": 3015,
      "tokens": 806,
      "context_length": 30713,
      "file_pos": 21
    },
    {
      "position": 33,
      "id": "/tmp/repos/matplotlib/galleries/users_explain/axes/arranging_axes.py_np_64",
      "distance": 0.8756258487701416,
      "file_path": "galleries/users_explain/axes/arranging_axes.py",
      "start_line": 101,
      "end_line": 185,
      "tokens": 854,
      "context_length": 31567
    },
    {
      "position": 34,
      "id": "/tmp/repos/matplotlib/lib/mpl_toolkits/mplot3d/axes3d.py_Axes3D.plot_wireframe.18_Axes3D.plot_wireframe.35.1",
      "distance": 0.8791332244873047,
      "file_path": "lib/mpl_toolkits/mplot3d/axes3d.py",
      "start_line": 1772,
      "end_line": 1815,
      "tokens": 484,
      "context_length": 32051,
      "file_pos": 22
    },
    {
      "position": 35,
      "id": "/tmp/repos/matplotlib/galleries/tutorials/pyplot.py_t_f.1.1",
      "distance": 0.8815702199935913,
      "file_path": "galleries/tutorials/pyplot.py",
      "start_line": 96,
      "end_line": 255,
      "tokens": 1523,
      "context_length": 33574
    }
  ],
  "files": [
    {
      "file_path": "lib/matplotlib/axes/_axes.py",
      "position": 1,
      "tokens": 76546,
      "context_length": 76546
    },
    {
      "file_path": "galleries/examples/images_contours_and_fields/pcolor_demo.py",
      "position": 2,
      "tokens": 1050,
      "context_length": 77596
    },
    {
      "file_path": "galleries/examples/mplot3d/scatter3d.py",
      "position": 3,
      "tokens": 278,
      "context_length": 77874
    },
    {
      "file_path": "galleries/users_explain/quick_start.py",
      "position": 4,
      "tokens": 6007,
      "context_length": 83881
    },
    {
      "file_path": "galleries/plot_types/3D/scatter3d_simple.py",
      "position": 5,
      "tokens": 156,
      "context_length": 84037
    },
    {
      "file_path": "galleries/examples/lines_bars_and_markers/masked_demo.py",
      "position": 6,
      "tokens": 410,
      "context_length": 84447
    },
    {
      "file_path": "galleries/examples/mplot3d/2dcollections3d.py",
      "position": 7,
      "tokens": 413,
      "context_length": 84860
    },
    {
      "file_path": "lib/mpl_toolkits/mplot3d/axes3d.py",
      "position": 8,
      "tokens": 30986,
      "context_length": 115846
    },
    {
      "file_path": "galleries/examples/pie_and_polar_charts/polar_scatter.py",
      "position": 9,
      "tokens": 513,
      "context_length": 116359
    },
    {
      "file_path": "galleries/examples/lines_bars_and_markers/filled_step.py",
      "position": 10,
      "tokens": 1626,
      "context_length": 117985
    },
    {
      "file_path": "galleries/examples/specialty_plots/leftventricle_bullseye.py",
      "position": 11,
      "tokens": 1605,
      "context_length": 119590
    },
    {
      "file_path": "galleries/examples/shapes_and_collections/scatter.py",
      "position": 12,
      "tokens": 169,
      "context_length": 119759
    },
    {
      "file_path": "galleries/examples/images_contours_and_fields/pcolormesh_grids.py",
      "position": 13,
      "tokens": 1289,
      "context_length": 121048
    },
    {
      "file_path": "lib/matplotlib/axes/_base.py",
      "position": 14,
      "tokens": 38845,
      "context_length": 159893
    },
    {
      "file_path": "galleries/examples/lines_bars_and_markers/scatter_hist.py",
      "position": 15,
      "tokens": 1104,
      "context_length": 160997
    },
    {
      "file_path": "galleries/examples/subplots_axes_and_figures/broken_axis.py",
      "position": 16,
      "tokens": 525,
      "context_length": 161522
    },
    {
      "file_path": "galleries/examples/subplots_axes_and_figures/secondary_axis.py",
      "position": 17,
      "tokens": 1433,
      "context_length": 162955
    },
    {
      "file_path": "galleries/examples/lines_bars_and_markers/scatter_masked.py",
      "position": 18,
      "tokens": 244,
      "context_length": 163199
    },
    {
      "file_path": "galleries/examples/images_contours_and_fields/quadmesh_demo.py",
      "position": 19,
      "tokens": 450,
      "context_length": 163649
    },
    {
      "file_path": "lib/matplotlib/_cm.py",
      "position": 20,
      "tokens": 28443,
      "context_length": 192092
    },
    {
      "file_path": "galleries/users_explain/axes/colorbar_placement.py",
      "position": 21,
      "tokens": 895,
      "context_length": 192987
    },
    {
      "file_path": "galleries/users_explain/axes/arranging_axes.py",
      "position": 22,
      "tokens": 4126,
      "context_length": 197113
    },
    {
      "file_path": "galleries/tutorials/pyplot.py",
      "position": 23,
      "tokens": 4488,
      "context_length": 201601
    }
  ]
}