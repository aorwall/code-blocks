{
  "instance_id": "sphinx-doc__sphinx-7923",
  "model_patch": "diff --git a/doc/conf.py b/doc/conf.py\nindex f62e02a34..7b905ad5f 100644\n--- a/doc/conf.py\n+++ b/doc/conf.py\n@@ -4,6 +4,7 @@ import re\n \n import sphinx\n \n+autosummary_mock_imports = ['noodle', 'foo', 'foobar']\n \n extensions = ['sphinx.ext.autodoc', 'sphinx.ext.doctest', 'sphinx.ext.todo',\n               'sphinx.ext.autosummary', 'sphinx.ext.extlinks',\ndiff --git a/setup.py b/setup.py\nindex a404f1fa5..250ef5b61 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -21,7 +21,7 @@ install_requires = [\n     'sphinxcontrib-htmlhelp',\n     'sphinxcontrib-serializinghtml',\n     'sphinxcontrib-qthelp',\n-    'Jinja2>=2.3',\n+    'Jinja2<3.1',\n     'Pygments>=2.0',\n     'docutils>=0.12',\n     'snowballstemmer>=1.1',\ndiff --git a/sphinx/ext/autosummary/__init__.py b/sphinx/ext/autosummary/__init__.py\nindex 0984377c5..ffe3c57f5 100644\n--- a/sphinx/ext/autosummary/__init__.py\n+++ b/sphinx/ext/autosummary/__init__.py\n@@ -60,8 +60,7 @@ import sys\n import warnings\n from os import path\n from types import ModuleType\n-from typing import Any, Dict, List, Tuple\n-from typing import cast\n+from typing import Any, Dict, List, Tuple, Type, cast\n \n from docutils import nodes\n from docutils.nodes import Element, Node, system_message\n@@ -88,10 +87,6 @@ from sphinx.util.docutils import (\n from sphinx.util.matching import Matcher\n from sphinx.writers.html import HTMLTranslator\n \n-if False:\n-    # For type annotation\n-    from typing import Type  # for python3.5.1\n-\n \n logger = logging.getLogger(__name__)\n \n@@ -729,15 +724,21 @@ def get_rst_suffix(app: Sphinx) -> str:\n \n \n def process_generate_options(app: Sphinx) -> None:\n+    print(\"Starting process_generate_options\")\n     genfiles = app.config.autosummary_generate\n+    print(\"genfiles value:\", genfiles)\n \n     if genfiles is True:\n+        print(\"genfiles is True\")\n         env = app.builder.env\n         genfiles = [env.doc2path(x, base=None) for x in env.found_docs\n                     if os.path.isfile(env.doc2path(x))]\n+        print(\"genfiles after processing:\", genfiles)\n     elif genfiles is False:\n+        print(\"genfiles is False\")\n         pass\n     else:\n+        print(\"genfiles is a list\")\n         ext = list(app.config.source_suffix)\n         genfiles = [genfile + (ext[0] if not genfile.endswith(tuple(ext)) else '')\n                     for genfile in genfiles]\n@@ -746,11 +747,14 @@ def process_generate_options(app: Sphinx) -> None:\n             if not path.isfile(path.join(app.srcdir, entry)):\n                 logger.warning(__('autosummary_generate: file not found: %s'), entry)\n                 genfiles.remove(entry)\n+        print(\"genfiles after processing:\", genfiles)\n \n     if not genfiles:\n+        print(\"No genfiles to process\")\n         return\n \n     suffix = get_rst_suffix(app)\n+    print(\"suffix:\", suffix)\n     if suffix is None:\n         logger.warning(__('autosummary generats .rst files internally. '\n                           'But your source_suffix does not contain .rst. Skipped.'))\n@@ -760,10 +764,15 @@ def process_generate_options(app: Sphinx) -> None:\n \n     imported_members = app.config.autosummary_imported_members\n     with mock(app.config.autosummary_mock_imports):\n-        generate_autosummary_docs(genfiles, suffix=suffix, base_path=app.srcdir,\n-                                  app=app, imported_members=imported_members,\n-                                  overwrite=app.config.autosummary_generate_overwrite,\n-                                  encoding=app.config.source_encoding)\n+        print(\"Calling generate_autosummary_docs\")\n+        try:\n+            generate_autosummary_docs(genfiles, suffix=suffix, base_path=app.srcdir,\n+                                      app=app, imported_members=imported_members,\n+                                      overwrite=app.config.autosummary_generate_overwrite,\n+                                      encoding=app.config.source_encoding)\n+        except Exception as e:\n+            print(\"Exception occurred during generate_autosummary_docs:\", e)\n+            raise\n \n \n def setup(app: Sphinx) -> Dict[str, Any]:\ndiff --git a/sphinx/io.py b/sphinx/io.py\nindex f45d5bf5d..b8a987d33 100644\n--- a/sphinx/io.py\n+++ b/sphinx/io.py\n@@ -40,7 +40,6 @@ from sphinx.versioning import UIDTransform\n if False:\n     # For type annotation\n     from typing import Type  # for python3.5.1\n-    from sphinx.application import Sphinx\n \n \n logger = logging.getLogger(__name__)\n@@ -56,8 +55,7 @@ class SphinxBaseReader(standalone.Reader):\n     transforms = []  # type: List[Type[Transform]]\n \n     def __init__(self, *args: Any, **kwargs: Any) -> None:\n-        from sphinx.application import Sphinx\n-        if len(args) > 0 and isinstance(args[0], Sphinx):\n+        if len(args) > 0 and isinstance(args[0], \"Sphinx\"):\n             self._app = args[0]\n             self._env = self._app.env\n             args = args[1:]\n@@ -114,6 +112,7 @@ class SphinxStandaloneReader(SphinxBaseReader):\n     \"\"\"\n \n     def setup(self, app: \"Sphinx\") -> None:\n+        app.connect('source-read', append_rst_epilog)\n         self.transforms = self.transforms + app.registry.get_transforms()\n         super().setup(app)\n \n@@ -157,6 +156,12 @@ class SphinxI18nReader(SphinxBaseReader):\n                 self.transforms.remove(transform)\n \n \n+def append_rst_epilog(app: \"Sphinx\", docname: str, source: List[str]) -> None:\n+    \"\"\"Append rst_epilog content to the source text.\"\"\"\n+    if app.config.rst_epilog:\n+        source[0] += '\\n' + app.config.rst_epilog\n+\n+\n class SphinxDummyWriter(UnfilteredWriter):\n     \"\"\"Dummy writer module used for generating doctree.\"\"\"\n \ndiff --git a/tox.ini b/tox.ini\nindex ccfd60f84..c5ac3713f 100644\n--- a/tox.ini\n+++ b/tox.ini\n@@ -28,7 +28,7 @@ extras =\n setenv =\n     PYTHONWARNINGS = all,ignore::ImportWarning:importlib._bootstrap_external,ignore::DeprecationWarning:site,ignore::DeprecationWarning:distutils\n commands=\n-    pytest --durations 25 {posargs}\n+    pytest -rA --durations 25 {posargs}\n \n [testenv:flake8]\n basepython = python3\n",
  "model_name_or_path": "Devin",
  "pass_or_fail": "fail",
  "model_patch_files": [
    "doc/conf.py",
    "setup.py",
    "sphinx/ext/autosummary/__init__.py",
    "sphinx/io.py",
    "tox.ini"
  ],
  "repo": "sphinx-doc/sphinx",
  "base_commit": "533b4ac7d6f2a1a20f08c3a595a2580a9742d944",
  "patch": "diff --git a/sphinx/util/rst.py b/sphinx/util/rst.py\n--- a/sphinx/util/rst.py\n+++ b/sphinx/util/rst.py\n@@ -103,6 +103,11 @@ def prepend_prolog(content: StringList, prolog: str) -> None:\n def append_epilog(content: StringList, epilog: str) -> None:\n     \"\"\"Append a string to content body as epilog.\"\"\"\n     if epilog:\n-        content.append('', '<generated>', 0)\n+        if 0 < len(content):\n+            source, lineno = content.info(-1)\n+        else:\n+            source = '<generated>'\n+            lineno = 0\n+        content.append('', source, lineno + 1)\n         for lineno, line in enumerate(epilog.splitlines()):\n             content.append(line, '<rst_epilog>', lineno)\n",
  "test_patch": "diff --git a/tests/test_parser.py b/tests/test_parser.py\n--- a/tests/test_parser.py\n+++ b/tests/test_parser.py\n@@ -50,7 +50,7 @@ def test_RSTParser_prolog_epilog(RSTStateMachine, app):\n     (content, _), _ = RSTStateMachine().run.call_args\n     assert list(content.xitems()) == [('dummy.rst', 0, 'hello Sphinx world'),\n                                       ('dummy.rst', 1, 'Sphinx is a document generator'),\n-                                      ('<generated>', 0, ''),\n+                                      ('dummy.rst', 2, ''),\n                                       ('<rst_epilog>', 0, 'this is rst_epilog'),\n                                       ('<rst_epilog>', 1, 'good-bye reST!')]\n \ndiff --git a/tests/test_util_rst.py b/tests/test_util_rst.py\n--- a/tests/test_util_rst.py\n+++ b/tests/test_util_rst.py\n@@ -32,7 +32,7 @@ def test_append_epilog(app):\n \n     assert list(content.xitems()) == [('dummy.rst', 0, 'hello Sphinx world'),\n                                       ('dummy.rst', 1, 'Sphinx is a document generator'),\n-                                      ('<generated>', 0, ''),\n+                                      ('dummy.rst', 2, ''),\n                                       ('<rst_epilog>', 0, 'this is rst_epilog'),\n                                       ('<rst_epilog>', 1, 'good-bye reST!')]\n \n",
  "problem_statement": "Bad refs in pot files, when using rst_epilog\n**To Reproduce**\r\nconf.py\r\n```python\r\nrst_epilog = \"\"\"\r\n.. |var1| replace:: VAR1\r\n\"\"\"\r\n```\r\nindex.rst\r\n```\r\nA\r\n======\r\n\r\na\r\n   b\r\n```\r\n\r\n`make gettext` produces index.pot with bad string numbers and \"\\<generated\\>\" refs:\r\n```\r\n#: ../../index.rst:2\r\nmsgid \"A\"\r\nmsgstr \"\"\r\n\r\n#: ../../<generated>:1\r\nmsgid \"a\"\r\nmsgstr \"\"\r\n\r\n#: ../../index.rst:5\r\nmsgid \"b\"\r\nmsgstr \"\"\r\n```\r\n\r\n\n",
  "hints_text": "",
  "created_at": "2020-07-06T16:23:19Z",
  "version": "3.2",
  "FAIL_TO_PASS": "[\"tests/test_parser.py::test_RSTParser_prolog_epilog\", \"tests/test_util_rst.py::test_append_epilog\"]",
  "PASS_TO_PASS": "[\"tests/test_util_rst.py::test_escape\", \"tests/test_util_rst.py::test_heading\", \"tests/test_util_rst.py::test_prepend_prolog\", \"tests/test_util_rst.py::test_prepend_prolog_with_CR\", \"tests/test_util_rst.py::test_prepend_prolog_without_CR\", \"tests/test_util_rst.py::test_textwidth\"]",
  "environment_setup_commit": "f92fa6443fe6f457ab0c26d41eb229e825fda5e1",
  "patch_files": [
    "sphinx/util/rst.py"
  ],
  "test_patch_files": [
    "tests/test_parser.py",
    "tests/test_util_rst.py"
  ],
  "patch_diff_details": {
    "sphinx/util/rst.py": {
      "diffs": [
        {
          "start_line_old": 106,
          "end_line_old": 106
        }
      ]
    }
  },
  "vectors": 1489,
  "snippets": [
    {
      "position": 1,
      "id": "/tmp/repos/sphinx/doc/conf.py_latex_elements_event_sig_re.1",
      "distance": 1.0787488222122192,
      "file_path": "doc/conf.py",
      "start_line": 59,
      "end_line": 126,
      "tokens": 693,
      "context_length": 693
    },
    {
      "position": 2,
      "id": "/tmp/repos/sphinx/sphinx/transforms/i18n.py_Locale.apply.14_Locale.apply.14.67",
      "distance": 1.0984258651733398,
      "file_path": "sphinx/transforms/i18n.py",
      "start_line": 222,
      "end_line": 377,
      "tokens": 1673,
      "context_length": 2366
    },
    {
      "position": 3,
      "id": "/tmp/repos/sphinx/utils/doclinter.py_os_",
      "distance": 1.0992393493652344,
      "file_path": "utils/doclinter.py",
      "start_line": 11,
      "end_line": 81,
      "tokens": 467,
      "context_length": 2833
    },
    {
      "position": 4,
      "id": "/tmp/repos/sphinx/doc/conf.py_parse_event_",
      "distance": 1.100083351135254,
      "file_path": "doc/conf.py",
      "start_line": 129,
      "end_line": 165,
      "tokens": 359,
      "context_length": 3192
    },
    {
      "position": 5,
      "id": "/tmp/repos/sphinx/utils/checks.py_sphinx_has_header_",
      "distance": 1.125579833984375,
      "file_path": "utils/checks.py",
      "start_line": 33,
      "end_line": 109,
      "tokens": 545,
      "context_length": 3737
    },
    {
      "position": 6,
      "id": "/tmp/repos/sphinx/sphinx/util/cfamily.py_re_char_literal_re.1",
      "distance": 1.1266530752182007,
      "file_path": "sphinx/util/cfamily.py",
      "start_line": 11,
      "end_line": 80,
      "tokens": 766,
      "context_length": 4503
    },
    {
      "position": 7,
      "id": "/tmp/repos/sphinx/sphinx/transforms/post_transforms/__init__.py_ReferencesResolver.warn_missing_reference_ReferencesResolver.warn_missing_reference.5",
      "distance": 1.1478168964385986,
      "file_path": "sphinx/transforms/post_transforms/__init__.py",
      "start_line": 154,
      "end_line": 177,
      "tokens": 279,
      "context_length": 4782
    },
    {
      "position": 8,
      "id": "/tmp/repos/sphinx/sphinx/builders/_epub_base.py_html_ssp.1",
      "distance": 1.1535735130310059,
      "file_path": "sphinx/builders/_epub_base.py",
      "start_line": 11,
      "end_line": 102,
      "tokens": 662,
      "context_length": 5444
    },
    {
      "position": 9,
      "id": "/tmp/repos/sphinx/sphinx/ext/autosummary/generate.py_get_parser_get_parser.8.1",
      "distance": 1.1564662456512451,
      "file_path": "sphinx/ext/autosummary/generate.py",
      "start_line": 580,
      "end_line": 619,
      "tokens": 360,
      "context_length": 5804
    },
    {
      "position": 10,
      "id": "/tmp/repos/sphinx/doc/conf.py_1_latex_logo.1",
      "distance": 1.1564695835113525,
      "file_path": "doc/conf.py",
      "start_line": 1,
      "end_line": 58,
      "tokens": 502,
      "context_length": 6306
    },
    {
      "position": 11,
      "id": "/tmp/repos/sphinx/sphinx/domains/rst.py_re_dir_sig_re.1",
      "distance": 1.1611974239349365,
      "file_path": "sphinx/domains/rst.py",
      "start_line": 11,
      "end_line": 33,
      "tokens": 161,
      "context_length": 6467
    },
    {
      "position": 12,
      "id": "/tmp/repos/sphinx/sphinx/util/jsdump.py_re_ESCAPED.1",
      "distance": 1.1679646968841553,
      "file_path": "sphinx/util/jsdump.py",
      "start_line": 12,
      "end_line": 32,
      "tokens": 180,
      "context_length": 6647
    },
    {
      "position": 13,
      "id": "/tmp/repos/sphinx/sphinx/testing/util.py_functools_assert_startswith.1.1",
      "distance": 1.1703283786773682,
      "file_path": "sphinx/testing/util.py",
      "start_line": 10,
      "end_line": 50,
      "tokens": 300,
      "context_length": 6947
    },
    {
      "position": 14,
      "id": "/tmp/repos/sphinx/sphinx/io.py_codecs_logger.1",
      "distance": 1.1724979877471924,
      "file_path": "sphinx/io.py",
      "start_line": 10,
      "end_line": 46,
      "tokens": 275,
      "context_length": 7222
    },
    {
      "position": 15,
      "id": "/tmp/repos/sphinx/sphinx/ext/napoleon/docstring.py_inspect__enumerated_list_regex.1",
      "distance": 1.177573800086975,
      "file_path": "sphinx/ext/napoleon/docstring.py",
      "start_line": 13,
      "end_line": 40,
      "tokens": 327,
      "context_length": 7549
    },
    {
      "position": 16,
      "id": "/tmp/repos/sphinx/sphinx/ext/autosummary/generate.py_argparse_logger.1",
      "distance": 1.1793429851531982,
      "file_path": "sphinx/ext/autosummary/generate.py",
      "start_line": 20,
      "end_line": 60,
      "tokens": 283,
      "context_length": 7832
    },
    {
      "position": 17,
      "id": "/tmp/repos/sphinx/sphinx/builders/epub3.py_html_HTML_TAG.1",
      "distance": 1.1798477172851562,
      "file_path": "sphinx/builders/epub3.py",
      "start_line": 12,
      "end_line": 53,
      "tokens": 276,
      "context_length": 8108
    },
    {
      "position": 18,
      "id": "/tmp/repos/sphinx/sphinx/ext/autosummary/__init__.py_inspect_autosummary_toc.1",
      "distance": 1.183298945426941,
      "file_path": "sphinx/ext/autosummary/__init__.py",
      "start_line": 55,
      "end_line": 108,
      "tokens": 382,
      "context_length": 8490
    },
    {
      "position": 19,
      "id": "/tmp/repos/sphinx/sphinx/project.py_os_EXCLUDE_PATHS.1",
      "distance": 1.1840429306030273,
      "file_path": "sphinx/project.py",
      "start_line": 11,
      "end_line": 27,
      "tokens": 116,
      "context_length": 8606
    },
    {
      "position": 20,
      "id": "/tmp/repos/sphinx/sphinx/ext/autosummary/__init__.py_process_generate_options_process_generate_options.8.1",
      "distance": 1.1842067241668701,
      "file_path": "sphinx/ext/autosummary/__init__.py",
      "start_line": 731,
      "end_line": 766,
      "tokens": 325,
      "context_length": 8931
    },
    {
      "position": 21,
      "id": "/tmp/repos/sphinx/sphinx/util/inspect.py_builtins_memory_address_re.1",
      "distance": 1.1852964162826538,
      "file_path": "sphinx/util/inspect.py",
      "start_line": 11,
      "end_line": 47,
      "tokens": 264,
      "context_length": 9195
    },
    {
      "position": 22,
      "id": "/tmp/repos/sphinx/sphinx/ext/apidoc.py_get_parser_get_parser.18",
      "distance": 1.1856327056884766,
      "file_path": "sphinx/ext/apidoc.py",
      "start_line": 347,
      "end_line": 412,
      "tokens": 751,
      "context_length": 9946
    },
    {
      "position": 23,
      "id": "/tmp/repos/sphinx/sphinx/domains/python.py_builtins_type_to_xref.3.1",
      "distance": 1.1900279521942139,
      "file_path": "sphinx/domains/python.py",
      "start_line": 11,
      "end_line": 88,
      "tokens": 598,
      "context_length": 10544
    },
    {
      "position": 24,
      "id": "/tmp/repos/sphinx/sphinx/builders/latex/constants.py_DEFAULT_SETTINGS_8",
      "distance": 1.190047025680542,
      "file_path": "sphinx/builders/latex/constants.py",
      "start_line": 70,
      "end_line": 119,
      "tokens": 523,
      "context_length": 11067
    },
    {
      "position": 25,
      "id": "/tmp/repos/sphinx/sphinx/builders/gettext.py_should_write_should_write.3.1",
      "distance": 1.1902047395706177,
      "file_path": "sphinx/builders/gettext.py",
      "start_line": 223,
      "end_line": 238,
      "tokens": 161,
      "context_length": 11228
    },
    {
      "position": 26,
      "id": "/tmp/repos/sphinx/sphinx/roles.py_XRefRole._fix_parens_XRefRole._fix_parens.5.1",
      "distance": 1.193585753440857,
      "file_path": "sphinx/roles.py",
      "start_line": 92,
      "end_line": 106,
      "tokens": 156,
      "context_length": 11384
    },
    {
      "position": 27,
      "id": "/tmp/repos/sphinx/sphinx/ext/graphviz.py_posixpath_GraphvizError.category.1",
      "distance": 1.1968345642089844,
      "file_path": "sphinx/ext/graphviz.py",
      "start_line": 12,
      "end_line": 43,
      "tokens": 233,
      "context_length": 11617
    },
    {
      "position": 28,
      "id": "/tmp/repos/sphinx/setup.py_os_Tee.flush.1",
      "distance": 1.1980085372924805,
      "file_path": "setup.py",
      "start_line": 1,
      "end_line": 75,
      "tokens": 443,
      "context_length": 12060
    },
    {
      "position": 29,
      "id": "/tmp/repos/sphinx/sphinx/directives/patches.py_RSTTable_ListTable.make_title.3.1",
      "distance": 1.1982908248901367,
      "file_path": "sphinx/directives/patches.py",
      "start_line": 71,
      "end_line": 107,
      "tokens": 247,
      "context_length": 12307
    },
    {
      "position": 30,
      "id": "/tmp/repos/sphinx/sphinx/builders/_epub_base.py_EpubBuilder.esc_EpubBuilder.esc.8.1",
      "distance": 1.200624704360962,
      "file_path": "sphinx/builders/_epub_base.py",
      "start_line": 172,
      "end_line": 182,
      "tokens": 133,
      "context_length": 12440
    },
    {
      "position": 31,
      "id": "/tmp/repos/sphinx/sphinx/domains/rst.py_ReSTDomain.resolve_any_xref_",
      "distance": 1.2010014057159424,
      "file_path": "sphinx/domains/rst.py",
      "start_line": 260,
      "end_line": 286,
      "tokens": 274,
      "context_length": 12714
    },
    {
      "position": 32,
      "id": "/tmp/repos/sphinx/sphinx/util/smartypants.py_9_",
      "distance": 1.2021291255950928,
      "file_path": "sphinx/util/smartypants.py",
      "start_line": 376,
      "end_line": 388,
      "tokens": 137,
      "context_length": 12851
    },
    {
      "position": 33,
      "id": "/tmp/repos/sphinx/sphinx/util/nodes.py__non_id_chars__non_id_translate_digraphs.1",
      "distance": 1.2025325298309326,
      "file_path": "sphinx/util/nodes.py",
      "start_line": 468,
      "end_line": 511,
      "tokens": 689,
      "context_length": 13540
    },
    {
      "position": 34,
      "id": "/tmp/repos/sphinx/sphinx/writers/manpage.py_ManualPageTranslator.visit_number_reference_ManualPageTranslator.81",
      "distance": 1.2050151824951172,
      "file_path": "sphinx/writers/manpage.py",
      "start_line": 313,
      "end_line": 411,
      "tokens": 757,
      "context_length": 14297
    },
    {
      "position": 35,
      "id": "/tmp/repos/sphinx/sphinx/builders/_epub_base.py_EpubBuilder.fix_ids_EpubBuilder.fix_ids.5.1",
      "distance": 1.2050719261169434,
      "file_path": "sphinx/builders/_epub_base.py",
      "start_line": 256,
      "end_line": 287,
      "tokens": 281,
      "context_length": 14578
    },
    {
      "position": 36,
      "id": "/tmp/repos/sphinx/sphinx/cmd/make_mode.py_os_BUILDERS.1",
      "distance": 1.2051750421524048,
      "file_path": "sphinx/cmd/make_mode.py",
      "start_line": 17,
      "end_line": 54,
      "tokens": 515,
      "context_length": 15093
    },
    {
      "position": 37,
      "id": "/tmp/repos/sphinx/sphinx/directives/code.py_LiteralInclude.run_",
      "distance": 1.2060177326202393,
      "file_path": "sphinx/directives/code.py",
      "start_line": 418,
      "end_line": 482,
      "tokens": 658,
      "context_length": 15751
    },
    {
      "position": 38,
      "id": "/tmp/repos/sphinx/sphinx/search/ja.py_DefaultSplitter_DefaultSplitter.BQ3__.1",
      "distance": 1.2063636779785156,
      "file_path": "sphinx/search/ja.py",
      "start_line": 140,
      "end_line": 166,
      "tokens": 755,
      "context_length": 16506
    },
    {
      "position": 39,
      "id": "/tmp/repos/sphinx/doc/development/tutorials/examples/todo.py_TodoDirective_TodoDirective.has_content.run.8.1",
      "distance": 1.2074792385101318,
      "file_path": "doc/development/tutorials/examples/todo.py",
      "start_line": 30,
      "end_line": 53,
      "tokens": 175,
      "context_length": 16681
    },
    {
      "position": 40,
      "id": "/tmp/repos/sphinx/sphinx/ext/autosummary/generate.py_generate_autosummary_docs_generate_autosummary_docs.18.1",
      "distance": 1.2083156108856201,
      "file_path": "sphinx/ext/autosummary/generate.py",
      "start_line": 348,
      "end_line": 443,
      "tokens": 783,
      "context_length": 17464
    },
    {
      "position": 41,
      "id": "/tmp/repos/sphinx/sphinx/util/texescape.py_re_10",
      "distance": 1.20853853225708,
      "file_path": "sphinx/util/texescape.py",
      "start_line": 11,
      "end_line": 64,
      "tokens": 623,
      "context_length": 18087
    },
    {
      "position": 42,
      "id": "/tmp/repos/sphinx/sphinx/writers/latex.py_re_UnsupportedError.category.1",
      "distance": 1.2088611125946045,
      "file_path": "sphinx/writers/latex.py",
      "start_line": 14,
      "end_line": 73,
      "tokens": 453,
      "context_length": 18540
    },
    {
      "position": 43,
      "id": "/tmp/repos/sphinx/sphinx/ext/inheritance_diagram.py_builtins_module_sig_re.1",
      "distance": 1.2089853286743164,
      "file_path": "sphinx/ext/inheritance_diagram.py",
      "start_line": 38,
      "end_line": 66,
      "tokens": 214,
      "context_length": 18754
    },
    {
      "position": 44,
      "id": "/tmp/repos/sphinx/sphinx/roles.py_indexmarkup_role_indexmarkup_role.12.13.1",
      "distance": 1.2097558975219727,
      "file_path": "sphinx/roles.py",
      "start_line": 198,
      "end_line": 264,
      "tokens": 701,
      "context_length": 19455
    },
    {
      "position": 45,
      "id": "/tmp/repos/sphinx/sphinx/writers/texinfo.py_TexinfoTranslator.visit_production_TexinfoTranslator.depart_desc.3",
      "distance": 1.2098841667175293,
      "file_path": "sphinx/writers/texinfo.py",
      "start_line": 1292,
      "end_line": 1375,
      "tokens": 673,
      "context_length": 20128
    },
    {
      "position": 46,
      "id": "/tmp/repos/sphinx/sphinx/domains/python.py_PyXrefMixin.make_xrefs_PyXrefMixin.make_xrefs.7.1",
      "distance": 1.2098910808563232,
      "file_path": "sphinx/domains/python.py",
      "start_line": 262,
      "end_line": 282,
      "tokens": 219,
      "context_length": 20347
    },
    {
      "position": 47,
      "id": "/tmp/repos/sphinx/sphinx/builders/epub3.py_validate_config_values_validate_config_values.21.1",
      "distance": 1.2100578546524048,
      "file_path": "sphinx/builders/epub3.py",
      "start_line": 194,
      "end_line": 230,
      "tokens": 415,
      "context_length": 20762
    },
    {
      "position": 48,
      "id": "/tmp/repos/sphinx/sphinx/domains/std.py_re_token_re.1",
      "distance": 1.210522174835205,
      "file_path": "sphinx/domains/std.py",
      "start_line": 11,
      "end_line": 48,
      "tokens": 323,
      "context_length": 21085
    },
    {
      "position": 49,
      "id": "/tmp/repos/sphinx/sphinx/util/pycompat.py_html_convert_with_2to3.6.1",
      "distance": 1.2110705375671387,
      "file_path": "sphinx/util/pycompat.py",
      "start_line": 11,
      "end_line": 54,
      "tokens": 357,
      "context_length": 21442
    },
    {
      "position": 50,
      "id": "/tmp/repos/sphinx/sphinx/builders/singlehtml.py_SingleFileHTMLBuilder.fix_refuris_SingleFileHTMLBuilder.fix_refuris.fname.2.6.1",
      "distance": 1.2120860815048218,
      "file_path": "sphinx/builders/singlehtml.py",
      "start_line": 56,
      "end_line": 68,
      "tokens": 141,
      "context_length": 21583
    },
    {
      "position": 51,
      "id": "/tmp/repos/sphinx/sphinx/writers/latex.py_LaTeXTranslator.depart_reference_LaTeXTranslator.visit_number_reference.6",
      "distance": 1.2124404907226562,
      "file_path": "sphinx/writers/latex.py",
      "start_line": 1588,
      "end_line": 1611,
      "tokens": 290,
      "context_length": 21873
    },
    {
      "position": 52,
      "id": "/tmp/repos/sphinx/sphinx/util/i18n.py_gettext_LocaleFileInfoBase.1",
      "distance": 1.2127875089645386,
      "file_path": "sphinx/util/i18n.py",
      "start_line": 10,
      "end_line": 37,
      "tokens": 166,
      "context_length": 22039
    },
    {
      "position": 53,
      "id": "/tmp/repos/sphinx/sphinx/ext/intersphinx.py_missing_reference_missing_reference.16.1",
      "distance": 1.2134039402008057,
      "file_path": "sphinx/ext/intersphinx.py",
      "start_line": 261,
      "end_line": 339,
      "tokens": 865,
      "context_length": 22904
    },
    {
      "position": 54,
      "id": "/tmp/repos/sphinx/sphinx/parsers.py_warnings_12.2",
      "distance": 1.213544487953186,
      "file_path": "sphinx/parsers.py",
      "start_line": 11,
      "end_line": 28,
      "tokens": 134,
      "context_length": 23038
    },
    {
      "position": 55,
      "id": "/tmp/repos/sphinx/sphinx/ext/autosummary/__init__.py_get_rst_suffix_get_rst_suffix",
      "distance": 1.2144086360931396,
      "file_path": "sphinx/ext/autosummary/__init__.py",
      "start_line": 716,
      "end_line": 728,
      "tokens": 101,
      "context_length": 23139
    },
    {
      "position": 56,
      "id": "/tmp/repos/sphinx/sphinx/cmd/build.py_argparse_20",
      "distance": 1.2153983116149902,
      "file_path": "sphinx/cmd/build.py",
      "start_line": 11,
      "end_line": 30,
      "tokens": 132,
      "context_length": 23271
    },
    {
      "position": 57,
      "id": "/tmp/repos/sphinx/sphinx/writers/latex.py_LaTeXTranslator.visit_download_reference_LaTeXTranslator.depart_title_reference.1",
      "distance": 1.2199817895889282,
      "file_path": "sphinx/writers/latex.py",
      "start_line": 1613,
      "end_line": 1672,
      "tokens": 496,
      "context_length": 23767
    },
    {
      "position": 58,
      "id": "/tmp/repos/sphinx/sphinx/writers/texinfo.py_TexinfoTranslator.visit_citation_TexinfoTranslator.depart_definition_list_item.1",
      "distance": 1.2203381061553955,
      "file_path": "sphinx/writers/texinfo.py",
      "start_line": 862,
      "end_line": 966,
      "tokens": 788,
      "context_length": 24555
    },
    {
      "position": 59,
      "id": "/tmp/repos/sphinx/sphinx/cmd/make_mode.py_Make.build_latexpdf_Make.build_gettext.3.1",
      "distance": 1.2203915119171143,
      "file_path": "sphinx/cmd/make_mode.py",
      "start_line": 96,
      "end_line": 140,
      "tokens": 375,
      "context_length": 24930
    },
    {
      "position": 60,
      "id": "/tmp/repos/sphinx/sphinx/domains/python.py_PyXRefRole_PyXRefRole.process_link.7.1",
      "distance": 1.220906138420105,
      "file_path": "sphinx/domains/python.py",
      "start_line": 1006,
      "end_line": 1026,
      "tokens": 248,
      "context_length": 25178
    },
    {
      "position": 61,
      "id": "/tmp/repos/sphinx/sphinx/locale/__init__.py_17_",
      "distance": 1.2213481664657593,
      "file_path": "sphinx/locale/__init__.py",
      "start_line": 239,
      "end_line": 267,
      "tokens": 232,
      "context_length": 25410
    },
    {
      "position": 62,
      "id": "/tmp/repos/sphinx/sphinx/config.py_check_confval_types_check_confval_types.2.4.4.6.5.2",
      "distance": 1.2225399017333984,
      "file_path": "sphinx/config.py",
      "start_line": 387,
      "end_line": 439,
      "tokens": 474,
      "context_length": 25884
    },
    {
      "position": 63,
      "id": "/tmp/repos/sphinx/sphinx/util/jsdump.py_encode_string_encode_string",
      "distance": 1.2227389812469482,
      "file_path": "sphinx/util/jsdump.py",
      "start_line": 35,
      "end_line": 50,
      "tokens": 165,
      "context_length": 26049
    },
    {
      "position": 64,
      "id": "/tmp/repos/sphinx/setup.py_15_15.5.2",
      "distance": 1.2228875160217285,
      "file_path": "setup.py",
      "start_line": 78,
      "end_line": 169,
      "tokens": 643,
      "context_length": 26692
    },
    {
      "position": 65,
      "id": "/tmp/repos/sphinx/sphinx/util/cfamily.py_BaseParser._make_multi_error_BaseParser._make_multi_error.4.1",
      "distance": 1.2230770587921143,
      "file_path": "sphinx/util/cfamily.py",
      "start_line": 253,
      "end_line": 273,
      "tokens": 181,
      "context_length": 26873
    },
    {
      "position": 66,
      "id": "/tmp/repos/sphinx/sphinx/cmd/quickstart.py_argparse_choice",
      "distance": 1.2233455181121826,
      "file_path": "sphinx/cmd/quickstart.py",
      "start_line": 11,
      "end_line": 119,
      "tokens": 772,
      "context_length": 27645
    },
    {
      "position": 67,
      "id": "/tmp/repos/sphinx/sphinx/domains/python.py_41_PyXrefMixin.make_xref.4.1",
      "distance": 1.2250733375549316,
      "file_path": "sphinx/domains/python.py",
      "start_line": 242,
      "end_line": 260,
      "tokens": 214,
      "context_length": 27859
    },
    {
      "position": 68,
      "id": "/tmp/repos/sphinx/sphinx/__init__.py_os_",
      "distance": 1.2267444133758545,
      "file_path": "sphinx/__init__.py",
      "start_line": 14,
      "end_line": 65,
      "tokens": 494,
      "context_length": 28353
    },
    {
      "position": 69,
      "id": "/tmp/repos/sphinx/sphinx/transforms/__init__.py_re_default_substitutions.1",
      "distance": 1.2297667264938354,
      "file_path": "sphinx/transforms/__init__.py",
      "start_line": 11,
      "end_line": 45,
      "tokens": 234,
      "context_length": 28587
    },
    {
      "position": 70,
      "id": "/tmp/repos/sphinx/sphinx/ext/autosummary/generate.py_main_",
      "distance": 1.2298425436019897,
      "file_path": "sphinx/ext/autosummary/generate.py",
      "start_line": 622,
      "end_line": 643,
      "tokens": 162,
      "context_length": 28749
    },
    {
      "position": 71,
      "id": "/tmp/repos/sphinx/utils/bump_version.py_parse_version_parse_version.9",
      "distance": 1.2300152778625488,
      "file_path": "utils/bump_version.py",
      "start_line": 41,
      "end_line": 64,
      "tokens": 289,
      "context_length": 29038
    }
  ],
  "files": [
    {
      "file_path": "doc/conf.py",
      "position": 1,
      "tokens": 1554,
      "context_length": 1554
    },
    {
      "file_path": "sphinx/transforms/i18n.py",
      "position": 2,
      "tokens": 4581,
      "context_length": 6135
    },
    {
      "file_path": "utils/doclinter.py",
      "position": 3,
      "tokens": 519,
      "context_length": 6654
    },
    {
      "file_path": "utils/checks.py",
      "position": 4,
      "tokens": 906,
      "context_length": 7560
    },
    {
      "file_path": "sphinx/util/cfamily.py",
      "position": 5,
      "tokens": 3511,
      "context_length": 11071
    },
    {
      "file_path": "sphinx/transforms/post_transforms/__init__.py",
      "position": 6,
      "tokens": 2000,
      "context_length": 13071
    },
    {
      "file_path": "sphinx/builders/_epub_base.py",
      "position": 7,
      "tokens": 6721,
      "context_length": 19792
    },
    {
      "file_path": "sphinx/ext/autosummary/generate.py",
      "position": 8,
      "tokens": 5183,
      "context_length": 24975
    },
    {
      "file_path": "sphinx/domains/rst.py",
      "position": 9,
      "tokens": 2470,
      "context_length": 27445
    },
    {
      "file_path": "sphinx/util/jsdump.py",
      "position": 10,
      "tokens": 1415,
      "context_length": 28860
    },
    {
      "file_path": "sphinx/testing/util.py",
      "position": 11,
      "tokens": 1822,
      "context_length": 30682
    },
    {
      "file_path": "sphinx/io.py",
      "position": 12,
      "tokens": 1693,
      "context_length": 32375
    },
    {
      "file_path": "sphinx/ext/napoleon/docstring.py",
      "position": 13,
      "tokens": 8847,
      "context_length": 41222
    },
    {
      "file_path": "sphinx/builders/epub3.py",
      "position": 14,
      "tokens": 2693,
      "context_length": 43915
    },
    {
      "file_path": "sphinx/ext/autosummary/__init__.py",
      "position": 15,
      "tokens": 6554,
      "context_length": 50469
    },
    {
      "file_path": "sphinx/project.py",
      "position": 16,
      "tokens": 812,
      "context_length": 51281
    },
    {
      "file_path": "sphinx/util/inspect.py",
      "position": 17,
      "tokens": 5889,
      "context_length": 57170
    },
    {
      "file_path": "sphinx/ext/apidoc.py",
      "position": 18,
      "tokens": 4721,
      "context_length": 61891
    },
    {
      "file_path": "sphinx/domains/python.py",
      "position": 19,
      "tokens": 11680,
      "context_length": 73571
    },
    {
      "file_path": "sphinx/builders/latex/constants.py",
      "position": 20,
      "tokens": 2080,
      "context_length": 75651
    },
    {
      "file_path": "sphinx/builders/gettext.py",
      "position": 21,
      "tokens": 2751,
      "context_length": 78402
    },
    {
      "file_path": "sphinx/roles.py",
      "position": 22,
      "tokens": 5655,
      "context_length": 84057
    },
    {
      "file_path": "sphinx/ext/graphviz.py",
      "position": 23,
      "tokens": 3599,
      "context_length": 87656
    },
    {
      "file_path": "setup.py",
      "position": 24,
      "tokens": 1725,
      "context_length": 89381
    },
    {
      "file_path": "sphinx/directives/patches.py",
      "position": 25,
      "tokens": 1613,
      "context_length": 90994
    },
    {
      "file_path": "sphinx/util/smartypants.py",
      "position": 26,
      "tokens": 4111,
      "context_length": 95105
    },
    {
      "file_path": "sphinx/util/nodes.py",
      "position": 27,
      "tokens": 5421,
      "context_length": 100526
    },
    {
      "file_path": "sphinx/writers/manpage.py",
      "position": 28,
      "tokens": 3511,
      "context_length": 104037
    },
    {
      "file_path": "sphinx/cmd/make_mode.py",
      "position": 29,
      "tokens": 1685,
      "context_length": 105722
    },
    {
      "file_path": "sphinx/directives/code.py",
      "position": 30,
      "tokens": 3908,
      "context_length": 109630
    },
    {
      "file_path": "sphinx/search/ja.py",
      "position": 31,
      "tokens": 12640,
      "context_length": 122270
    },
    {
      "file_path": "doc/development/tutorials/examples/todo.py",
      "position": 32,
      "tokens": 908,
      "context_length": 123178
    },
    {
      "file_path": "sphinx/util/texescape.py",
      "position": 33,
      "tokens": 1769,
      "context_length": 124947
    },
    {
      "file_path": "sphinx/writers/latex.py",
      "position": 34,
      "tokens": 19704,
      "context_length": 144651
    },
    {
      "file_path": "sphinx/ext/inheritance_diagram.py",
      "position": 35,
      "tokens": 3855,
      "context_length": 148506
    },
    {
      "file_path": "sphinx/writers/texinfo.py",
      "position": 36,
      "tokens": 12179,
      "context_length": 160685
    },
    {
      "file_path": "sphinx/domains/std.py",
      "position": 37,
      "tokens": 10214,
      "context_length": 170899
    },
    {
      "file_path": "sphinx/util/pycompat.py",
      "position": 38,
      "tokens": 792,
      "context_length": 171691
    },
    {
      "file_path": "sphinx/builders/singlehtml.py",
      "position": 39,
      "tokens": 1859,
      "context_length": 173550
    },
    {
      "file_path": "sphinx/util/i18n.py",
      "position": 40,
      "tokens": 2862,
      "context_length": 176412
    },
    {
      "file_path": "sphinx/ext/intersphinx.py",
      "position": 41,
      "tokens": 3676,
      "context_length": 180088
    },
    {
      "file_path": "sphinx/parsers.py",
      "position": 42,
      "tokens": 868,
      "context_length": 180956
    },
    {
      "file_path": "sphinx/cmd/build.py",
      "position": 43,
      "tokens": 2661,
      "context_length": 183617
    },
    {
      "file_path": "sphinx/locale/__init__.py",
      "position": 44,
      "tokens": 2064,
      "context_length": 185681
    },
    {
      "file_path": "sphinx/config.py",
      "position": 45,
      "tokens": 4402,
      "context_length": 190083
    },
    {
      "file_path": "sphinx/cmd/quickstart.py",
      "position": 46,
      "tokens": 5560,
      "context_length": 195643
    },
    {
      "file_path": "sphinx/__init__.py",
      "position": 47,
      "tokens": 568,
      "context_length": 196211
    },
    {
      "file_path": "sphinx/transforms/__init__.py",
      "position": 48,
      "tokens": 3206,
      "context_length": 199417
    },
    {
      "file_path": "utils/bump_version.py",
      "position": 49,
      "tokens": 1363,
      "context_length": 200780
    }
  ]
}