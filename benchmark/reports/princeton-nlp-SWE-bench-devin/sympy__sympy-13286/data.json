{
  "instance_id": "sympy__sympy-13286",
  "model_patch": "diff --git a/sympy/calculus/util.py b/sympy/calculus/util.py\nindex 860e0733f9..922b1edfd8 100644\n--- a/sympy/calculus/util.py\n+++ b/sympy/calculus/util.py\n@@ -267,7 +267,7 @@ def elm_domain(expr, intrvl):\n         return _domain\n \n \n-def periodicity(f, symbol, check=False):\n+def periodicity(f, symbol, check=False, depth=0):\n     \"\"\"\n     Tests the given function for periodicity in the given symbol.\n \n@@ -280,6 +280,8 @@ def periodicity(f, symbol, check=False):\n         The variable for which the period is to be determined.\n     check : Boolean\n         The flag to verify whether the value being returned is a period or not.\n+    depth : int\n+        The depth of the recursion used for periodicity testing.\n \n     Returns\n     =======\n@@ -330,6 +332,17 @@ def periodicity(f, symbol, check=False):\n     from sympy import simplify, lcm_list\n     from sympy.functions.elementary.trigonometric import TrigonometricFunction\n     from sympy.solvers.decompogen import decompogen\n+    from sympy.functions.elementary.complexes import Abs\n+\n+    MAX_DEPTH = 10\n+    if depth > MAX_DEPTH:\n+        return None\n+\n+    if isinstance(f, Abs) and isinstance(f.args[0], TrigonometricFunction):\n+        inner_function = f.args[0]\n+        inner_period = inner_function.period(symbol)\n+        if inner_period is not None:\n+            return inner_period / 2\n \n     orig_f = f\n     f = simplify(orig_f)\n@@ -350,28 +363,28 @@ def periodicity(f, symbol, check=False):\n         expo_has_sym = expo.has(symbol)\n \n         if base_has_sym and not expo_has_sym:\n-            period = periodicity(base, symbol)\n+            period = periodicity(base, symbol, check, depth + 1)\n \n         elif expo_has_sym and not base_has_sym:\n-            period = periodicity(expo, symbol)\n+            period = periodicity(expo, symbol, check, depth + 1)\n \n         else:\n-            period = _periodicity(f.args, symbol)\n+            period = _periodicity(f.args, symbol, check, depth + 1)\n \n     elif f.is_Mul:\n         coeff, g = f.as_independent(symbol, as_Add=False)\n         if isinstance(g, TrigonometricFunction) or coeff is not S.One:\n-            period = periodicity(g, symbol)\n+            period = periodicity(g, symbol, check, depth + 1)\n \n         else:\n-            period = _periodicity(g.args, symbol)\n+            period = _periodicity(g.args, symbol, check, depth + 1)\n \n     elif f.is_Add:\n         k, g = f.as_independent(symbol)\n         if k is not S.Zero:\n-            return periodicity(g, symbol)\n+            return periodicity(g, symbol, check, depth + 1)\n \n-        period = _periodicity(g.args, symbol)\n+        period = _periodicity(g.args, symbol, check, depth + 1)\n \n     elif period is None:\n         from sympy.solvers.decompogen import compogen\n@@ -382,7 +395,7 @@ def periodicity(f, symbol, check=False):\n                 start_index = num_of_gs - 1 - index\n                 g = compogen(g_s[start_index:], symbol)\n                 if g != orig_f and g != f: # Fix for issue 12620\n-                    period = periodicity(g, symbol)\n+                    period = periodicity(g, symbol, check, depth + 1)\n                     if period is not None:\n                         break\n \n@@ -401,14 +414,14 @@ def periodicity(f, symbol, check=False):\n     return None\n \n \n-def _periodicity(args, symbol):\n+def _periodicity(args, symbol, check=False, depth=0):\n     \"\"\"Helper for periodicity to find the period of a list of simpler\n     functions. It uses the `lcim` method to find the least common period of\n     all the functions.\n     \"\"\"\n     periods = []\n     for f in args:\n-        period = periodicity(f, symbol)\n+        period = periodicity(f, symbol, check, depth + 1)\n         if period is None:\n             return None\n \n",
  "model_name_or_path": "Devin",
  "pass_or_fail": "fail",
  "model_patch_files": [
    "sympy/calculus/util.py"
  ],
  "repo": "sympy/sympy",
  "base_commit": "42136729bb7252803b0b52a8326a33d6e9b1e06a",
  "patch": "diff --git a/sympy/calculus/util.py b/sympy/calculus/util.py\n--- a/sympy/calculus/util.py\n+++ b/sympy/calculus/util.py\n@@ -328,22 +328,66 @@ def periodicity(f, symbol, check=False):\n \n     \"\"\"\n     from sympy import simplify, lcm_list\n-    from sympy.functions.elementary.trigonometric import TrigonometricFunction\n+    from sympy.functions.elementary.complexes import Abs\n+    from sympy.functions.elementary.trigonometric import (\n+        TrigonometricFunction, sin, cos, csc, sec)\n     from sympy.solvers.decompogen import decompogen\n+    from sympy.core.relational import Relational\n+\n+    def _check(orig_f, period):\n+        '''Return the checked period or raise an error.'''\n+        new_f = orig_f.subs(symbol, symbol + period)\n+        if new_f.equals(orig_f):\n+            return period\n+        else:\n+            raise NotImplementedError(filldedent('''\n+                The period of the given function cannot be verified.\n+                When `%s` was replaced with `%s + %s` in `%s`, the result\n+                was `%s` which was not recognized as being the same as\n+                the original function.\n+                So either the period was wrong or the two forms were\n+                not recognized as being equal.\n+                Set check=False to obtain the value.''' %\n+                (symbol, symbol, period, orig_f, new_f)))\n \n     orig_f = f\n     f = simplify(orig_f)\n     period = None\n \n-    if not f.has(symbol):\n+    if symbol not in f.free_symbols:\n         return S.Zero\n \n+    if isinstance(f, Relational):\n+        f = f.lhs - f.rhs\n+\n     if isinstance(f, TrigonometricFunction):\n         try:\n             period = f.period(symbol)\n         except NotImplementedError:\n             pass\n \n+    if isinstance(f, Abs):\n+        arg = f.args[0]\n+        if isinstance(arg, (sec, csc, cos)):\n+            # all but tan and cot might have a\n+            # a period that is half as large\n+            # so recast as sin\n+            arg = sin(arg.args[0])\n+        period = periodicity(arg, symbol)\n+        if period is not None and isinstance(arg, sin):\n+            # the argument of Abs was a trigonometric other than\n+            # cot or tan; test to see if the half-period\n+            # is valid. Abs(arg) has behaviour equivalent to\n+            # orig_f, so use that for test:\n+            orig_f = Abs(arg)\n+            try:\n+                return _check(orig_f, period/2)\n+            except NotImplementedError as err:\n+                if check:\n+                    raise NotImplementedError(err)\n+            # else let new orig_f and period be\n+            # checked below\n+\n     if f.is_Pow:\n         base, expo = f.args\n         base_has_sym = base.has(symbol)\n@@ -388,14 +432,7 @@ def periodicity(f, symbol, check=False):\n \n     if period is not None:\n         if check:\n-            if orig_f.subs(symbol, symbol + period) == orig_f:\n-                return period\n-\n-            else:\n-                raise NotImplementedError(filldedent('''\n-                    The period of the given function cannot be verified.\n-                    Set check=False to obtain the value.'''))\n-\n+            return _check(orig_f, period)\n         return period\n \n     return None\ndiff --git a/sympy/solvers/decompogen.py b/sympy/solvers/decompogen.py\n--- a/sympy/solvers/decompogen.py\n+++ b/sympy/solvers/decompogen.py\n@@ -1,5 +1,7 @@\n-from sympy.core import Function, Pow, sympify\n+from sympy.core import (Function, Pow, sympify, Expr)\n+from sympy.core.relational import Relational\n from sympy.polys import Poly, decompose\n+from sympy.utilities.misc import func_name\n \n \n def decompogen(f, symbol):\n@@ -31,6 +33,11 @@ def decompogen(f, symbol):\n \n     \"\"\"\n     f = sympify(f)\n+    if not isinstance(f, Expr) or isinstance(f, Relational):\n+        raise TypeError('expecting Expr but got: `%s`' % func_name(f))\n+    if symbol not in f.free_symbols:\n+        return [f]\n+\n     result = []\n \n     # ===== Simple Functions ===== #\n",
  "test_patch": "diff --git a/sympy/calculus/tests/test_util.py b/sympy/calculus/tests/test_util.py\n--- a/sympy/calculus/tests/test_util.py\n+++ b/sympy/calculus/tests/test_util.py\n@@ -94,6 +94,14 @@ def test_periodicity():\n     assert periodicity(exp(x)**sin(x), x) is None\n     assert periodicity(sin(x)**y, y) is None\n \n+    assert periodicity(Abs(sin(Abs(sin(x)))),x) == pi\n+    assert all(periodicity(Abs(f(x)),x) == pi for f in (\n+        cos, sin, sec, csc, tan, cot))\n+    assert periodicity(Abs(sin(tan(x))), x) == pi\n+    assert periodicity(Abs(sin(sin(x) + tan(x))), x) == 2*pi\n+    assert periodicity(sin(x) > S.Half, x) is 2*pi\n+\n+    assert periodicity(x > 2, x) is None\n     assert periodicity(x**3 - x**2 + 1, x) is None\n     assert periodicity(Abs(x), x) is None\n     assert periodicity(Abs(x**2 - 1), x) is None\n@@ -105,8 +113,9 @@ def test_periodicity_check():\n \n     assert periodicity(tan(x), x, check=True) == pi\n     assert periodicity(sin(x) + cos(x), x, check=True) == 2*pi\n-    raises(NotImplementedError, lambda: periodicity(sec(x), x, check=True))\n-    raises(NotImplementedError, lambda: periodicity(sin(x*y), x, check=True))\n+    assert periodicity(sec(x), x) == 2*pi\n+    assert periodicity(sin(x*y), x) == 2*pi/abs(y)\n+    assert periodicity(Abs(sec(sec(x))), x) == pi\n \n \n def test_lcim():\ndiff --git a/sympy/solvers/tests/test_decompogen.py b/sympy/solvers/tests/test_decompogen.py\n--- a/sympy/solvers/tests/test_decompogen.py\n+++ b/sympy/solvers/tests/test_decompogen.py\n@@ -1,7 +1,7 @@\n from sympy.solvers.decompogen import decompogen, compogen\n from sympy import sin, cos, sqrt, Abs\n from sympy import symbols\n-from sympy.utilities.pytest import XFAIL\n+from sympy.utilities.pytest import XFAIL, raises\n \n x, y = symbols('x y')\n \n@@ -14,6 +14,9 @@ def test_decompogen():\n     assert decompogen(Abs(cos(x)**2 + 3*cos(x) - 4), x) == [Abs(x), x**2 + 3*x - 4, cos(x)]\n     assert decompogen(sin(x)**2 + sin(x) - sqrt(3)/2, x) == [x**2 + x - sqrt(3)/2, sin(x)]\n     assert decompogen(Abs(cos(y)**2 + 3*cos(x) - 4), x) == [Abs(x), 3*x + cos(y)**2 - 4, cos(x)]\n+    assert decompogen(x, y) == [x]\n+    assert decompogen(1, x) == [1]\n+    raises(TypeError, lambda: decompogen(x < 5, x))\n \n \n def test_decompogen_poly():\n",
  "problem_statement": "periodicity(Abs(sin(x)),x) return 2*pi\nperiodicity(Abs(sin(x)),x) returns 2*pi instead of pi\r\n```\r\n>>> from sympy import *\r\n>>> x=Symbol('x')\r\n>>> periodicity(Abs(sin(x)),x,check=True)\r\n2*pi\r\n>>> periodicity(Abs(sin(x)),x)\r\n2*pi\r\n```\r\n\n#13205 periodicity(x > 2, x) give recursion error and #13207\nIt fixes issue #13205 it will stop any relational Expression from entering into infinite recursion and return None\r\nIt improves the periodicity of absolute trigonometric function issue #13207\n",
  "hints_text": "Can I have this issue ?\nNote by the docstring we are not guaranteed to get the fundamental period. But of course it would be good to improve the answer if possible. \n@souravghosh97 Can you add few tests that could justify your changes. \n@smichr I don't know why this test fails.But the test runs locally\r\n[https://travis-ci.org/sympy/sympy/builds/272842924](https://travis-ci.org/sympy/sympy/builds/272842924)\nSome minor edits including a couple of new tests. Let's see if tests pass this time. As I recall, the error was just a time out.",
  "created_at": "2017-09-09T16:46:34Z",
  "version": "1.1",
  "FAIL_TO_PASS": "[\"test_decompogen\", \"test_periodicity_check\"]",
  "PASS_TO_PASS": "[\"test_AccumBounds\", \"test_AccumBounds_div\", \"test_AccumBounds_func\", \"test_AccumBounds_mul\", \"test_AccumBounds_pow\", \"test_comparison_AccumBounds\", \"test_continuous_domain\", \"test_decompogen_poly\", \"test_lcim\", \"test_not_empty_in\"]",
  "environment_setup_commit": "ec9e3c0436fbff934fa84e22bf07f1b3ef5bfac3",
  "patch_files": [
    "sympy/calculus/util.py",
    "sympy/solvers/decompogen.py"
  ],
  "test_patch_files": [
    "sympy/calculus/tests/test_util.py",
    "sympy/solvers/tests/test_decompogen.py"
  ],
  "patch_diff_details": {
    "sympy/calculus/util.py": {
      "diffs": [
        {
          "start_line_old": 331,
          "end_line_old": 338,
          "file_pos": 2,
          "file_context_length": 12994,
          "closest_snippet_id": "/tmp/repos/sympy/sympy/calculus/util.py_periodicity.10_periodicity.12.1",
          "closest_snippet_line_distance": 16,
          "pos": 3,
          "context_length": 1182
        },
        {
          "start_line_old": 391,
          "end_line_old": 398,
          "file_pos": 2,
          "file_context_length": 12994,
          "pos": 2,
          "context_length": 666
        }
      ]
    },
    "sympy/solvers/decompogen.py": {
      "diffs": [
        {
          "start_line_old": 1,
          "end_line_old": 1
        },
        {
          "start_line_old": 34,
          "end_line_old": 34
        }
      ]
    }
  },
  "vectors": 7921,
  "snippets": [
    {
      "position": 1,
      "id": "/tmp/repos/sympy/sympy/plotting/intervalmath/lib_interval.py_15_sin.3.3.1",
      "distance": 0.761833667755127,
      "file_path": "sympy/plotting/intervalmath/lib_interval.py",
      "start_line": 92,
      "end_line": 118,
      "tokens": 263,
      "context_length": 263
    },
    {
      "position": 2,
      "id": "/tmp/repos/sympy/sympy/calculus/util.py_periodicity.10_periodicity.12.1",
      "distance": 0.7623185515403748,
      "file_path": "sympy/calculus/util.py",
      "start_line": 347,
      "end_line": 401,
      "tokens": 403,
      "context_length": 666,
      "file_pos": 2
    },
    {
      "position": 3,
      "id": "/tmp/repos/sympy/sympy/calculus/util.py_periodicity_periodicity.9.1.2.1",
      "distance": 0.7990990877151489,
      "file_path": "sympy/calculus/util.py",
      "start_line": 270,
      "end_line": 345,
      "tokens": 516,
      "context_length": 1182,
      "file_pos": 2
    },
    {
      "position": 4,
      "id": "/tmp/repos/sympy/sympy/plotting/intervalmath/lib_interval.py_17_cos.3.3.1",
      "distance": 0.8374987840652466,
      "file_path": "sympy/plotting/intervalmath/lib_interval.py",
      "start_line": 121,
      "end_line": 149,
      "tokens": 293,
      "context_length": 1475
    },
    {
      "position": 5,
      "id": "/tmp/repos/sympy/sympy/functions/elementary/trigonometric.py_TrigonometricFunction._period_TrigonometricFunction._period.6",
      "distance": 0.8436033129692078,
      "file_path": "sympy/functions/elementary/trigonometric.py",
      "start_line": 66,
      "end_line": 90,
      "tokens": 176,
      "context_length": 1651
    },
    {
      "position": 6,
      "id": "/tmp/repos/sympy/sympy/functions/elementary/trigonometric.py_sin_sin.fdiff.1.2.1",
      "distance": 0.8777034282684326,
      "file_path": "sympy/functions/elementary/trigonometric.py",
      "start_line": 198,
      "end_line": 252,
      "tokens": 376,
      "context_length": 2027
    },
    {
      "position": 7,
      "id": "/tmp/repos/sympy/sympy/functions/elementary/trigonometric.py_cos_cos.fdiff.1.2.1",
      "distance": 0.9018949270248413,
      "file_path": "sympy/functions/elementary/trigonometric.py",
      "start_line": 466,
      "end_line": 516,
      "tokens": 321,
      "context_length": 2348
    },
    {
      "position": 8,
      "id": "/tmp/repos/sympy/sympy/calculus/util.py__periodicity__periodicity.5.1",
      "distance": 0.9092893004417419,
      "file_path": "sympy/calculus/util.py",
      "start_line": 404,
      "end_line": 421,
      "tokens": 115,
      "context_length": 2463,
      "file_pos": 3
    },
    {
      "position": 9,
      "id": "/tmp/repos/sympy/sympy/functions/elementary/complexes.py_periodic_argument.eval_periodic_argument.eval.5",
      "distance": 0.9196681380271912,
      "file_path": "sympy/functions/elementary/complexes.py",
      "start_line": 884,
      "end_line": 911,
      "tokens": 304,
      "context_length": 2767
    },
    {
      "position": 10,
      "id": "/tmp/repos/sympy/sympy/functions/elementary/complexes.py_periodic_argument_periodic_argument.1",
      "distance": 0.9271880388259888,
      "file_path": "sympy/functions/elementary/complexes.py",
      "start_line": 834,
      "end_line": 859,
      "tokens": 228,
      "context_length": 2995
    },
    {
      "position": 11,
      "id": "/tmp/repos/sympy/sympy/functions/special/spherical_harmonics.py_1__x.1",
      "distance": 0.9285914301872253,
      "file_path": "sympy/functions/special/spherical_harmonics.py",
      "start_line": 1,
      "end_line": 14,
      "tokens": 125,
      "context_length": 3120
    },
    {
      "position": 12,
      "id": "/tmp/repos/sympy/sympy/plotting/intervalmath/lib_interval.py_24_cosh.3.3.1",
      "distance": 0.9364529848098755,
      "file_path": "sympy/plotting/intervalmath/lib_interval.py",
      "start_line": 223,
      "end_line": 251,
      "tokens": 241,
      "context_length": 3361
    },
    {
      "position": 13,
      "id": "/tmp/repos/sympy/sympy/series/sequences.py_SeqPer_SeqPer.1",
      "distance": 0.952942967414856,
      "file_path": "sympy/series/sequences.py",
      "start_line": 458,
      "end_line": 504,
      "tokens": 291,
      "context_length": 3652
    },
    {
      "position": 14,
      "id": "/tmp/repos/sympy/sympy/core/numbers.py_E_pi.1",
      "distance": 0.9545233249664307,
      "file_path": "sympy/core/numbers.py",
      "start_line": 3489,
      "end_line": 3557,
      "tokens": 429,
      "context_length": 4081
    },
    {
      "position": 15,
      "id": "/tmp/repos/sympy/sympy/functions/elementary/trigonometric.py_cot_cot.inverse.2.1",
      "distance": 0.9670608043670654,
      "file_path": "sympy/functions/elementary/trigonometric.py",
      "start_line": 1181,
      "end_line": 1231,
      "tokens": 316,
      "context_length": 4397
    },
    {
      "position": 16,
      "id": "/tmp/repos/sympy/sympy/plotting/intervalmath/lib_interval.py_acosh_asinh.3.3.1.1",
      "distance": 0.9736301898956299,
      "file_path": "sympy/plotting/intervalmath/lib_interval.py",
      "start_line": 352,
      "end_line": 387,
      "tokens": 283,
      "context_length": 4680
    },
    {
      "position": 17,
      "id": "/tmp/repos/sympy/sympy/functions/elementary/trigonometric.py_ReciprocalTrigonometricFunction._call_reciprocal_ReciprocalTrigonometricFunction._eval_nseries.1.1",
      "distance": 0.9780306220054626,
      "file_path": "sympy/functions/elementary/trigonometric.py",
      "start_line": 1514,
      "end_line": 1580,
      "tokens": 692,
      "context_length": 5372
    },
    {
      "position": 18,
      "id": "/tmp/repos/sympy/sympy/functions/elementary/trigonometric.py_sin.taylor_term_sin.as_real_imag.2.1",
      "distance": 0.9800828099250793,
      "file_path": "sympy/functions/elementary/trigonometric.py",
      "start_line": 359,
      "end_line": 416,
      "tokens": 528,
      "context_length": 5900
    },
    {
      "position": 19,
      "id": "/tmp/repos/sympy/sympy/functions/elementary/trigonometric.py_acot.taylor_term_acot._eval_is_real.1.1",
      "distance": 0.9892033934593201,
      "file_path": "sympy/functions/elementary/trigonometric.py",
      "start_line": 2391,
      "end_line": 2412,
      "tokens": 182,
      "context_length": 6082
    },
    {
      "position": 20,
      "id": "/tmp/repos/sympy/sympy/integrals/trigonometry.py__sin_pow_integrate__sin_pow_integrate.2.12.3.1",
      "distance": 0.9915421009063721,
      "file_path": "sympy/integrals/trigonometry.py",
      "start_line": 232,
      "end_line": 274,
      "tokens": 402,
      "context_length": 6484
    },
    {
      "position": 21,
      "id": "/tmp/repos/sympy/sympy/plotting/intervalmath/lib_interval.py_acos_acos.3.2.2.4.3.1",
      "distance": 0.9923853874206543,
      "file_path": "sympy/plotting/intervalmath/lib_interval.py",
      "start_line": 288,
      "end_line": 307,
      "tokens": 200,
      "context_length": 6684
    },
    {
      "position": 22,
      "id": "/tmp/repos/sympy/sympy/functions/elementary/trigonometric.py_tan_tan.inverse.2.1",
      "distance": 0.9944289922714233,
      "file_path": "sympy/functions/elementary/trigonometric.py",
      "start_line": 886,
      "end_line": 936,
      "tokens": 312,
      "context_length": 6996
    },
    {
      "position": 23,
      "id": "/tmp/repos/sympy/sympy/functions/elementary/trigonometric.py_acot._eval_aseries_acot._eval_aseries.1.3.1.1",
      "distance": 0.9960806369781494,
      "file_path": "sympy/functions/elementary/trigonometric.py",
      "start_line": 2414,
      "end_line": 2420,
      "tokens": 136,
      "context_length": 7132
    },
    {
      "position": 24,
      "id": "/tmp/repos/sympy/sympy/functions/elementary/trigonometric.py_sin._eval_expand_trig_sin._eval_is_finite.2.1.1",
      "distance": 0.9986063241958618,
      "file_path": "sympy/functions/elementary/trigonometric.py",
      "start_line": 418,
      "end_line": 463,
      "tokens": 438,
      "context_length": 7570
    },
    {
      "position": 25,
      "id": "/tmp/repos/sympy/sympy/functions/elementary/trigonometric.py__pi_coeff__pi_coeff.3.3.2.5.1",
      "distance": 0.9988548159599304,
      "file_path": "sympy/functions/elementary/trigonometric.py",
      "start_line": 126,
      "end_line": 195,
      "tokens": 515,
      "context_length": 8085
    },
    {
      "position": 26,
      "id": "/tmp/repos/sympy/sympy/plotting/intervalmath/lib_interval.py_tan_sqrt.3.3.1",
      "distance": 1.0002745389938354,
      "file_path": "sympy/plotting/intervalmath/lib_interval.py",
      "start_line": 152,
      "end_line": 177,
      "tokens": 188,
      "context_length": 8273
    },
    {
      "position": 27,
      "id": "/tmp/repos/sympy/sympy/functions/elementary/trigonometric.py_csc_csc.fdiff.1.2.1",
      "distance": 1.0062013864517212,
      "file_path": "sympy/functions/elementary/trigonometric.py",
      "start_line": 1663,
      "end_line": 1727,
      "tokens": 453,
      "context_length": 8726
    },
    {
      "position": 28,
      "id": "/tmp/repos/sympy/sympy/integrals/trigonometry.py__cos_pow_integrate_",
      "distance": 1.006678581237793,
      "file_path": "sympy/integrals/trigonometry.py",
      "start_line": 277,
      "end_line": 317,
      "tokens": 381,
      "context_length": 9107
    },
    {
      "position": 29,
      "id": "/tmp/repos/sympy/sympy/integrals/trigonometry.py_1__u.1",
      "distance": 1.0071768760681152,
      "file_path": "sympy/integrals/trigonometry.py",
      "start_line": 1,
      "end_line": 30,
      "tokens": 261,
      "context_length": 9368
    },
    {
      "position": 30,
      "id": "/tmp/repos/sympy/examples/advanced/gibbs_phenomenon.py_main_",
      "distance": 1.007406234741211,
      "file_path": "examples/advanced/gibbs_phenomenon.py",
      "start_line": 129,
      "end_line": 153,
      "tokens": 226,
      "context_length": 9594
    },
    {
      "position": 31,
      "id": "/tmp/repos/sympy/sympy/functions/elementary/trigonometric.py_acos.taylor_term_acos.taylor_term.1.3.2.3.4.1",
      "distance": 1.0089836120605469,
      "file_path": "sympy/functions/elementary/trigonometric.py",
      "start_line": 2088,
      "end_line": 2104,
      "tokens": 170,
      "context_length": 9764
    },
    {
      "position": 32,
      "id": "/tmp/repos/sympy/sympy/series/fourier.py_fourier_series_",
      "distance": 1.0093235969543457,
      "file_path": "sympy/series/fourier.py",
      "start_line": 411,
      "end_line": 487,
      "tokens": 575,
      "context_length": 10339
    },
    {
      "position": 33,
      "id": "/tmp/repos/sympy/sympy/functions/elementary/trigonometric.py_asin.taylor_term_asin.taylor_term.1.2.2.3.4.1",
      "distance": 1.010271668434143,
      "file_path": "sympy/functions/elementary/trigonometric.py",
      "start_line": 1942,
      "end_line": 1956,
      "tokens": 154,
      "context_length": 10493
    },
    {
      "position": 34,
      "id": "/tmp/repos/sympy/sympy/series/fourier.py_FourierSeries._eval_as_leading_term_FourierSeries.__sub__.1.1",
      "distance": 1.012779951095581,
      "file_path": "sympy/series/fourier.py",
      "start_line": 375,
      "end_line": 408,
      "tokens": 236,
      "context_length": 10729
    },
    {
      "position": 35,
      "id": "/tmp/repos/sympy/sympy/functions/elementary/trigonometric.py_cot._eval_nseries_cot._eval_is_real.1.1",
      "distance": 1.015655755996704,
      "file_path": "sympy/functions/elementary/trigonometric.py",
      "start_line": 1355,
      "end_line": 1429,
      "tokens": 707,
      "context_length": 11436
    },
    {
      "position": 36,
      "id": "/tmp/repos/sympy/examples/advanced/gibbs_phenomenon.py_1_x.1",
      "distance": 1.0163719654083252,
      "file_path": "examples/advanced/gibbs_phenomenon.py",
      "start_line": 1,
      "end_line": 19,
      "tokens": 122,
      "context_length": 11558
    },
    {
      "position": 37,
      "id": "/tmp/repos/sympy/sympy/polys/ring_series.py_rs_asin_rs_asin.5.3.1",
      "distance": 1.0175085067749023,
      "file_path": "sympy/polys/ring_series.py",
      "start_line": 1221,
      "end_line": 1264,
      "tokens": 394,
      "context_length": 11952
    },
    {
      "position": 38,
      "id": "/tmp/repos/sympy/sympy/functions/elementary/trigonometric.py_cos.taylor_term_cos._eval_rewrite_as_pow.1.1",
      "distance": 1.0178014039993286,
      "file_path": "sympy/functions/elementary/trigonometric.py",
      "start_line": 652,
      "end_line": 693,
      "tokens": 385,
      "context_length": 12337
    },
    {
      "position": 39,
      "id": "/tmp/repos/sympy/sympy/physics/optics/waves.py_TWave.frequency_TWave.time_period.2.1",
      "distance": 1.0187504291534424,
      "file_path": "sympy/physics/optics/waves.py",
      "start_line": 108,
      "end_line": 142,
      "tokens": 203,
      "context_length": 12540
    },
    {
      "position": 40,
      "id": "/tmp/repos/sympy/sympy/plotting/intervalmath/lib_interval.py_1_exp.3.3.1",
      "distance": 1.0192631483078003,
      "file_path": "sympy/plotting/intervalmath/lib_interval.py",
      "start_line": 1,
      "end_line": 32,
      "tokens": 211,
      "context_length": 12751
    },
    {
      "position": 41,
      "id": "/tmp/repos/sympy/sympy/polys/ring_series.py_rs_sin_rs_sin.13.1",
      "distance": 1.019360065460205,
      "file_path": "sympy/polys/ring_series.py",
      "start_line": 1383,
      "end_line": 1451,
      "tokens": 699,
      "context_length": 13450
    },
    {
      "position": 42,
      "id": "/tmp/repos/sympy/sympy/plotting/intervalmath/lib_interval.py_27_asin.3.3.2.4.3.1",
      "distance": 1.0201994180679321,
      "file_path": "sympy/plotting/intervalmath/lib_interval.py",
      "start_line": 254,
      "end_line": 285,
      "tokens": 291,
      "context_length": 13741
    },
    {
      "position": 43,
      "id": "/tmp/repos/sympy/sympy/series/fourier.py_FourierSeries_FourierSeries._eval_subs.2.1.1",
      "distance": 1.022422194480896,
      "file_path": "sympy/series/fourier.py",
      "start_line": 93,
      "end_line": 154,
      "tokens": 311,
      "context_length": 14052
    },
    {
      "position": 44,
      "id": "/tmp/repos/sympy/sympy/functions/special/bessel.py_airybi.taylor_term_airybi.taylor_term.1.2.2.3.1.1",
      "distance": 1.0244249105453491,
      "file_path": "sympy/functions/special/bessel.py",
      "start_line": 1295,
      "end_line": 1308,
      "tokens": 213,
      "context_length": 14265
    },
    {
      "position": 45,
      "id": "/tmp/repos/sympy/sympy/functions/elementary/complexes.py_periodic_argument._getunbranched_periodic_argument._getunbranched.5.1",
      "distance": 1.026346206665039,
      "file_path": "sympy/functions/elementary/complexes.py",
      "start_line": 861,
      "end_line": 882,
      "tokens": 188,
      "context_length": 14453
    },
    {
      "position": 46,
      "id": "/tmp/repos/sympy/sympy/series/fourier.py__process_limits__process_limits.9.1",
      "distance": 1.0292487144470215,
      "file_path": "sympy/series/fourier.py",
      "start_line": 39,
      "end_line": 90,
      "tokens": 466,
      "context_length": 14919
    },
    {
      "position": 47,
      "id": "/tmp/repos/sympy/sympy/functions/elementary/complexes.py_periodic_argument._eval_evalf_unbranched_argument.2.1",
      "distance": 1.0299021005630493,
      "file_path": "sympy/functions/elementary/complexes.py",
      "start_line": 913,
      "end_line": 927,
      "tokens": 143,
      "context_length": 15062
    },
    {
      "position": 48,
      "id": "/tmp/repos/sympy/sympy/functions/elementary/trigonometric.py_sec.taylor_term_sec.taylor_term.3",
      "distance": 1.0301165580749512,
      "file_path": "sympy/functions/elementary/trigonometric.py",
      "start_line": 1649,
      "end_line": 1660,
      "tokens": 135,
      "context_length": 15197
    },
    {
      "position": 49,
      "id": "/tmp/repos/sympy/sympy/functions/elementary/trigonometric.py_atan._eval_aseries_atan._eval_aseries.1.3.1.1",
      "distance": 1.0321335792541504,
      "file_path": "sympy/functions/elementary/trigonometric.py",
      "start_line": 2278,
      "end_line": 2284,
      "tokens": 132,
      "context_length": 15329
    },
    {
      "position": 50,
      "id": "/tmp/repos/sympy/sympy/plotting/intervalmath/interval_arithmetic.py_interval.__truediv___interval.__pow__.log",
      "distance": 1.0323047637939453,
      "file_path": "sympy/plotting/intervalmath/interval_arithmetic.py",
      "start_line": 356,
      "end_line": 375,
      "tokens": 147,
      "context_length": 15476
    },
    {
      "position": 51,
      "id": "/tmp/repos/sympy/sympy/functions/elementary/trigonometric.py_sec_sec.fdiff.1.2.1",
      "distance": 1.0342471599578857,
      "file_path": "sympy/functions/elementary/trigonometric.py",
      "start_line": 1583,
      "end_line": 1647,
      "tokens": 454,
      "context_length": 15930
    },
    {
      "position": 52,
      "id": "/tmp/repos/sympy/sympy/functions/special/bessel.py_airyai.taylor_term_airyai.taylor_term.1.2.2.3.1.1",
      "distance": 1.034461498260498,
      "file_path": "sympy/functions/special/bessel.py",
      "start_line": 1127,
      "end_line": 1140,
      "tokens": 229,
      "context_length": 16159
    },
    {
      "position": 53,
      "id": "/tmp/repos/sympy/sympy/functions/elementary/complexes.py_principal_branch.eval_principal_branch._eval_evalf.5.1",
      "distance": 1.035431146621704,
      "file_path": "sympy/functions/elementary/complexes.py",
      "start_line": 959,
      "end_line": 1012,
      "tokens": 494,
      "context_length": 16653
    },
    {
      "position": 54,
      "id": "/tmp/repos/sympy/sympy/functions/elementary/trigonometric.py_cos._eval_expand_trig_cos._eval_is_finite.2.1.1",
      "distance": 1.0361359119415283,
      "file_path": "sympy/functions/elementary/trigonometric.py",
      "start_line": 846,
      "end_line": 883,
      "tokens": 325,
      "context_length": 16978
    },
    {
      "position": 55,
      "id": "/tmp/repos/sympy/sympy/functions/elementary/trigonometric.py_atan.taylor_term_atan._eval_rewrite_as_log.1.1",
      "distance": 1.036952018737793,
      "file_path": "sympy/functions/elementary/trigonometric.py",
      "start_line": 2253,
      "end_line": 2276,
      "tokens": 214,
      "context_length": 17192
    },
    {
      "position": 56,
      "id": "/tmp/repos/sympy/sympy/series/fourier.py_1_14",
      "distance": 1.0374419689178467,
      "file_path": "sympy/series/fourier.py",
      "start_line": 1,
      "end_line": 16,
      "tokens": 132,
      "context_length": 17324
    },
    {
      "position": 57,
      "id": "/tmp/repos/sympy/sympy/functions/elementary/trigonometric.py_sin.eval_sin.eval.16.2.1",
      "distance": 1.041466474533081,
      "file_path": "sympy/functions/elementary/trigonometric.py",
      "start_line": 254,
      "end_line": 357,
      "tokens": 896,
      "context_length": 18220
    },
    {
      "position": 58,
      "id": "/tmp/repos/sympy/sympy/holonomic/holonomic.py_HolonomicFunction.to_sequence_HolonomicFunction.to_sequence.9",
      "distance": 1.0422694683074951,
      "file_path": "sympy/holonomic/holonomic.py",
      "start_line": 1237,
      "end_line": 1298,
      "tokens": 767,
      "context_length": 18987
    },
    {
      "position": 59,
      "id": "/tmp/repos/sympy/sympy/series/sequences.py_SeqPer.__new___SeqPer.__new__.11.1",
      "distance": 1.0430608987808228,
      "file_path": "sympy/series/sequences.py",
      "start_line": 506,
      "end_line": 544,
      "tokens": 333,
      "context_length": 19320
    },
    {
      "position": 60,
      "id": "/tmp/repos/sympy/sympy/plotting/intervalmath/lib_interval.py_11_atan.3.3.1",
      "distance": 1.0441575050354004,
      "file_path": "sympy/plotting/intervalmath/lib_interval.py",
      "start_line": 57,
      "end_line": 89,
      "tokens": 265,
      "context_length": 19585
    },
    {
      "position": 61,
      "id": "/tmp/repos/sympy/sympy/functions/elementary/trigonometric.py_cos._eval_rewrite_as_sqrt.cst_table_some_cos._eval_rewrite_as_sqrt.14.5.4.1",
      "distance": 1.0450434684753418,
      "file_path": "sympy/functions/elementary/trigonometric.py",
      "start_line": 782,
      "end_line": 831,
      "tokens": 596,
      "context_length": 20181
    },
    {
      "position": 62,
      "id": "/tmp/repos/sympy/sympy/plotting/intervalmath/interval_arithmetic.py_interval.__rpow___interval.__hash__.1.1",
      "distance": 1.045951008796692,
      "file_path": "sympy/plotting/intervalmath/interval_arithmetic.py",
      "start_line": 377,
      "end_line": 403,
      "tokens": 210,
      "context_length": 20391
    },
    {
      "position": 63,
      "id": "/tmp/repos/sympy/sympy/functions/elementary/trigonometric.py_tan._eval_nseries_tan.as_real_imag.2.3.1.1",
      "distance": 1.0486998558044434,
      "file_path": "sympy/functions/elementary/trigonometric.py",
      "start_line": 1069,
      "end_line": 1090,
      "tokens": 255,
      "context_length": 20646
    },
    {
      "position": 64,
      "id": "/tmp/repos/sympy/sympy/plotting/intervalmath/interval_arithmetic.py_interval.__div___interval.__div__.2.3.3.1.1",
      "distance": 1.0549328327178955,
      "file_path": "sympy/plotting/intervalmath/interval_arithmetic.py",
      "start_line": 315,
      "end_line": 354,
      "tokens": 341,
      "context_length": 20987
    },
    {
      "position": 65,
      "id": "/tmp/repos/sympy/sympy/calculus/util.py_AccumulationBounds_AccumulationBounds.1",
      "distance": 1.0555649995803833,
      "file_path": "sympy/calculus/util.py",
      "start_line": 461,
      "end_line": 613,
      "tokens": 1499,
      "context_length": 22486,
      "file_pos": 15
    },
    {
      "position": 66,
      "id": "/tmp/repos/sympy/sympy/functions/elementary/trigonometric.py_cos._eval_rewrite_as_sqrt._cospi257_cos._eval_rewrite_as_sqrt._cospi257.28.1",
      "distance": 1.0555682182312012,
      "file_path": "sympy/functions/elementary/trigonometric.py",
      "start_line": 744,
      "end_line": 780,
      "tokens": 767,
      "context_length": 23253
    },
    {
      "position": 67,
      "id": "/tmp/repos/sympy/sympy/functions/elementary/trigonometric.py_cot.taylor_term_cot.taylor_term.2.3.4.1",
      "distance": 1.0564000606536865,
      "file_path": "sympy/functions/elementary/trigonometric.py",
      "start_line": 1339,
      "end_line": 1353,
      "tokens": 134,
      "context_length": 23387
    },
    {
      "position": 68,
      "id": "/tmp/repos/sympy/sympy/polys/ring_series.py_rs_sinh_rs_sinh.5.1",
      "distance": 1.0565154552459717,
      "file_path": "sympy/polys/ring_series.py",
      "start_line": 1609,
      "end_line": 1634,
      "tokens": 235,
      "context_length": 23622
    },
    {
      "position": 69,
      "id": "/tmp/repos/sympy/sympy/integrals/trigonometry.py_trigintegrate.29_trigintegrate.31.1",
      "distance": 1.0581865310668945,
      "file_path": "sympy/integrals/trigonometry.py",
      "start_line": 122,
      "end_line": 229,
      "tokens": 1173,
      "context_length": 24795
    },
    {
      "position": 70,
      "id": "/tmp/repos/sympy/sympy/ntheory/continued_fraction.py_continued_fraction_iterator_continued_fraction_iterator.3.x.1",
      "distance": 1.060083270072937,
      "file_path": "sympy/ntheory/continued_fraction.py",
      "start_line": 166,
      "end_line": 208,
      "tokens": 242,
      "context_length": 25037
    },
    {
      "position": 71,
      "id": "/tmp/repos/sympy/sympy/polys/ring_series.py_rs_cos_rs_cos.12.1",
      "distance": 1.0602617263793945,
      "file_path": "sympy/polys/ring_series.py",
      "start_line": 1453,
      "end_line": 1524,
      "tokens": 701,
      "context_length": 25738
    },
    {
      "position": 72,
      "id": "/tmp/repos/sympy/sympy/functions/elementary/trigonometric.py_tan._eval_rewrite_as_exp_tan._eval_is_finite.2.1.1",
      "distance": 1.0604147911071777,
      "file_path": "sympy/functions/elementary/trigonometric.py",
      "start_line": 1121,
      "end_line": 1178,
      "tokens": 481,
      "context_length": 26219
    },
    {
      "position": 73,
      "id": "/tmp/repos/sympy/sympy/functions/elementary/trigonometric.py_csc.taylor_term_csc.taylor_term.2.3.3.1",
      "distance": 1.061067819595337,
      "file_path": "sympy/functions/elementary/trigonometric.py",
      "start_line": 1729,
      "end_line": 1741,
      "tokens": 149,
      "context_length": 26368
    },
    {
      "position": 74,
      "id": "/tmp/repos/sympy/sympy/functions/elementary/trigonometric.py_atan2_atan2.1",
      "distance": 1.0611072778701782,
      "file_path": "sympy/functions/elementary/trigonometric.py",
      "start_line": 2648,
      "end_line": 2741,
      "tokens": 873,
      "context_length": 27241
    },
    {
      "position": 75,
      "id": "/tmp/repos/sympy/sympy/series/fourier.py_FourierSeries.shiftx_FourierSeries.shiftx.7.1",
      "distance": 1.0613535642623901,
      "file_path": "sympy/series/fourier.py",
      "start_line": 290,
      "end_line": 316,
      "tokens": 240,
      "context_length": 27481
    },
    {
      "position": 76,
      "id": "/tmp/repos/sympy/sympy/core/function.py_Function._eval_nseries.7_Function._eval_nseries.16.1",
      "distance": 1.064274549484253,
      "file_path": "sympy/core/function.py",
      "start_line": 661,
      "end_line": 703,
      "tokens": 469,
      "context_length": 27950
    },
    {
      "position": 77,
      "id": "/tmp/repos/sympy/sympy/functions/elementary/trigonometric.py_1_16",
      "distance": 1.065049409866333,
      "file_path": "sympy/functions/elementary/trigonometric.py",
      "start_line": 1,
      "end_line": 18,
      "tokens": 206,
      "context_length": 28156
    },
    {
      "position": 78,
      "id": "/tmp/repos/sympy/sympy/series/fourier.py_fourier_cos_seq_fourier_sin_seq.5.1",
      "distance": 1.0665128231048584,
      "file_path": "sympy/series/fourier.py",
      "start_line": 19,
      "end_line": 36,
      "tokens": 225,
      "context_length": 28381
    },
    {
      "position": 79,
      "id": "/tmp/repos/sympy/sympy/functions/elementary/exponential.py_exp_polar_exp_polar._eval_Abs.2.1",
      "distance": 1.0669803619384766,
      "file_path": "sympy/functions/elementary/exponential.py",
      "start_line": 120,
      "end_line": 157,
      "tokens": 308,
      "context_length": 28689
    },
    {
      "position": 80,
      "id": "/tmp/repos/sympy/sympy/functions/special/hyper.py_meijerg.get_period_meijerg._eval_expand_func.2.1",
      "distance": 1.067028522491455,
      "file_path": "sympy/functions/special/hyper.py",
      "start_line": 569,
      "end_line": 610,
      "tokens": 384,
      "context_length": 29073
    },
    {
      "position": 81,
      "id": "/tmp/repos/sympy/sympy/functions/elementary/trigonometric.py_asin._eval_as_leading_term_asin.inverse.2.1",
      "distance": 1.0675057172775269,
      "file_path": "sympy/functions/elementary/trigonometric.py",
      "start_line": 1958,
      "end_line": 1993,
      "tokens": 299,
      "context_length": 29372
    },
    {
      "position": 82,
      "id": "/tmp/repos/sympy/sympy/functions/elementary/trigonometric.py_cot._eval_expand_trig_cot._eval_subs.5.1",
      "distance": 1.0678608417510986,
      "file_path": "sympy/functions/elementary/trigonometric.py",
      "start_line": 1431,
      "end_line": 1471,
      "tokens": 369,
      "context_length": 29741
    },
    {
      "position": 83,
      "id": "/tmp/repos/sympy/sympy/functions/elementary/trigonometric.py_asin_asin._eval_is_positive.2.1.1",
      "distance": 1.0682141780853271,
      "file_path": "sympy/functions/elementary/trigonometric.py",
      "start_line": 1838,
      "end_line": 1892,
      "tokens": 385,
      "context_length": 30126
    },
    {
      "position": 84,
      "id": "/tmp/repos/sympy/sympy/series/fourier.py_FourierSeries.shift_FourierSeries.shift.6.1",
      "distance": 1.0700023174285889,
      "file_path": "sympy/series/fourier.py",
      "start_line": 263,
      "end_line": 288,
      "tokens": 217,
      "context_length": 30343
    },
    {
      "position": 85,
      "id": "/tmp/repos/sympy/sympy/functions/elementary/hyperbolic.py_acosh.taylor_term_acosh.taylor_term.1.3.2.3.4.1",
      "distance": 1.0735278129577637,
      "file_path": "sympy/functions/elementary/hyperbolic.py",
      "start_line": 933,
      "end_line": 949,
      "tokens": 182,
      "context_length": 30525
    }
  ],
  "files": [
    {
      "file_path": "sympy/plotting/intervalmath/lib_interval.py",
      "position": 1,
      "tokens": 3651,
      "context_length": 3651
    },
    {
      "file_path": "sympy/calculus/util.py",
      "position": 2,
      "tokens": 9343,
      "context_length": 12994
    },
    {
      "file_path": "sympy/functions/elementary/trigonometric.py",
      "position": 3,
      "tokens": 23271,
      "context_length": 36265
    },
    {
      "file_path": "sympy/functions/elementary/complexes.py",
      "position": 4,
      "tokens": 8897,
      "context_length": 45162
    },
    {
      "file_path": "sympy/functions/special/spherical_harmonics.py",
      "position": 5,
      "tokens": 3172,
      "context_length": 48334
    },
    {
      "file_path": "sympy/series/sequences.py",
      "position": 6,
      "tokens": 7317,
      "context_length": 55651
    },
    {
      "file_path": "sympy/core/numbers.py",
      "position": 7,
      "tokens": 29104,
      "context_length": 84755
    },
    {
      "file_path": "sympy/integrals/trigonometry.py",
      "position": 8,
      "tokens": 3074,
      "context_length": 87829
    },
    {
      "file_path": "examples/advanced/gibbs_phenomenon.py",
      "position": 9,
      "tokens": 1114,
      "context_length": 88943
    },
    {
      "file_path": "sympy/series/fourier.py",
      "position": 10,
      "tokens": 3680,
      "context_length": 92623
    },
    {
      "file_path": "sympy/polys/ring_series.py",
      "position": 11,
      "tokens": 18192,
      "context_length": 110815
    },
    {
      "file_path": "sympy/physics/optics/waves.py",
      "position": 12,
      "tokens": 2171,
      "context_length": 112986
    },
    {
      "file_path": "sympy/functions/special/bessel.py",
      "position": 13,
      "tokens": 15192,
      "context_length": 128178
    },
    {
      "file_path": "sympy/plotting/intervalmath/interval_arithmetic.py",
      "position": 14,
      "tokens": 3421,
      "context_length": 131599
    },
    {
      "file_path": "sympy/holonomic/holonomic.py",
      "position": 15,
      "tokens": 24806,
      "context_length": 156405
    },
    {
      "file_path": "sympy/ntheory/continued_fraction.py",
      "position": 16,
      "tokens": 1925,
      "context_length": 158330
    },
    {
      "file_path": "sympy/core/function.py",
      "position": 17,
      "tokens": 23089,
      "context_length": 181419
    },
    {
      "file_path": "sympy/functions/elementary/exponential.py",
      "position": 18,
      "tokens": 6705,
      "context_length": 188124
    },
    {
      "file_path": "sympy/functions/special/hyper.py",
      "position": 19,
      "tokens": 9806,
      "context_length": 197930
    },
    {
      "file_path": "sympy/functions/elementary/hyperbolic.py",
      "position": 20,
      "tokens": 10342,
      "context_length": 208272
    }
  ]
}