{
  "instance_id": "sympy__sympy-14817",
  "model_patch": "diff --git a/sympy/printing/pretty/pretty.py b/sympy/printing/pretty/pretty.py\nindex 0545797d5f..39aa01bcc7 100644\n--- a/sympy/printing/pretty/pretty.py\n+++ b/sympy/printing/pretty/pretty.py\n@@ -821,16 +821,13 @@ def _print_BlockMatrix(self, B):\n     def _print_MatAdd(self, expr):\n         s = None\n         for item in expr.args:\n-            pform = self._print(item)\n-            if s is None:\n-                s = pform     # First element\n+            if item.is_Mul and _coeff_isneg(item):\n+                pform = self._print(item)\n+                s = prettyForm(*stringPict.next(s, ' '))\n             else:\n-                if S(item.args[0]).is_negative:\n-                    s = prettyForm(*stringPict.next(s, ' '))\n-                    pform = self._print(item)\n-                else:\n-                    s = prettyForm(*stringPict.next(s, ' + '))\n-                s = prettyForm(*stringPict.next(s, pform))\n+                pform = self._print(item)\n+                s = prettyForm(*stringPict.next(s, ' + '))\n+            s = prettyForm(*stringPict.next(s, pform))\n \n         return s\n \n",
  "model_name_or_path": "Devin",
  "pass_or_fail": "fail",
  "model_patch_files": [
    "sympy/printing/pretty/pretty.py"
  ],
  "repo": "sympy/sympy",
  "base_commit": "0dbdc0ea83d339936da175f8c3a97d0d6bafb9f8",
  "patch": "diff --git a/sympy/printing/pretty/pretty.py b/sympy/printing/pretty/pretty.py\n--- a/sympy/printing/pretty/pretty.py\n+++ b/sympy/printing/pretty/pretty.py\n@@ -825,7 +825,8 @@ def _print_MatAdd(self, expr):\n             if s is None:\n                 s = pform     # First element\n             else:\n-                if S(item.args[0]).is_negative:\n+                coeff = item.as_coeff_mmul()[0]\n+                if _coeff_isneg(S(coeff)):\n                     s = prettyForm(*stringPict.next(s, ' '))\n                     pform = self._print(item)\n                 else:\n",
  "test_patch": "diff --git a/sympy/printing/pretty/tests/test_pretty.py b/sympy/printing/pretty/tests/test_pretty.py\n--- a/sympy/printing/pretty/tests/test_pretty.py\n+++ b/sympy/printing/pretty/tests/test_pretty.py\n@@ -6094,11 +6094,16 @@ def test_MatrixSymbol_printing():\n     A = MatrixSymbol(\"A\", 3, 3)\n     B = MatrixSymbol(\"B\", 3, 3)\n     C = MatrixSymbol(\"C\", 3, 3)\n-\n     assert pretty(-A*B*C) == \"-A*B*C\"\n     assert pretty(A - B) == \"-B + A\"\n     assert pretty(A*B*C - A*B - B*C) == \"-A*B -B*C + A*B*C\"\n \n+    # issue #14814\n+    x = MatrixSymbol('x', n, n)\n+    y = MatrixSymbol('y*', n, n)\n+    assert pretty(x + y) == \"x + y*\"\n+    assert pretty(-a*x + -2*y*y) == \"-a*x -2*y**y*\"\n+\n \n def test_degree_printing():\n     expr1 = 90*degree\n",
  "problem_statement": "Error pretty printing MatAdd\n```py\r\n>>> pprint(MatrixSymbol('x', n, n) + MatrixSymbol('y*', n, n))\r\nTraceback (most recent call last):\r\n  File \"./sympy/core/sympify.py\", line 368, in sympify\r\n    expr = parse_expr(a, local_dict=locals, transformations=transformations, evaluate=evaluate)\r\n  File \"./sympy/parsing/sympy_parser.py\", line 950, in parse_expr\r\n    return eval_expr(code, local_dict, global_dict)\r\n  File \"./sympy/parsing/sympy_parser.py\", line 863, in eval_expr\r\n    code, global_dict, local_dict)  # take local objects in preference\r\n  File \"<string>\", line 1\r\n    Symbol ('y' )*\r\n                 ^\r\nSyntaxError: unexpected EOF while parsing\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"./sympy/printing/pretty/pretty.py\", line 2371, in pretty_print\r\n    use_unicode_sqrt_char=use_unicode_sqrt_char))\r\n  File \"./sympy/printing/pretty/pretty.py\", line 2331, in pretty\r\n    return pp.doprint(expr)\r\n  File \"./sympy/printing/pretty/pretty.py\", line 62, in doprint\r\n    return self._print(expr).render(**self._settings)\r\n  File \"./sympy/printing/printer.py\", line 274, in _print\r\n    return getattr(self, printmethod)(expr, *args, **kwargs)\r\n  File \"./sympy/printing/pretty/pretty.py\", line 828, in _print_MatAdd\r\n    if S(item.args[0]).is_negative:\r\n  File \"./sympy/core/sympify.py\", line 370, in sympify\r\n    raise SympifyError('could not parse %r' % a, exc)\r\nsympy.core.sympify.SympifyError: Sympify of expression 'could not parse 'y*'' failed, because of exception being raised:\r\nSyntaxError: unexpected EOF while parsing (<string>, line 1)\r\n```\r\n\r\nThe code shouldn't be using sympify to handle string arguments from MatrixSymbol.\r\n\r\nI don't even understand what the code is doing. Why does it omit the `+` when the first argument is negative? This seems to assume that the arguments of MatAdd have a certain form, and that they will always print a certain way if they are negative. \n",
  "hints_text": "Looks like it comes from fbbbd392e6c which is from https://github.com/sympy/sympy/pull/14248. CC @jashan498 \n`_print_MatAdd` should use the same methods as `_print_Add` to determine whether or not to include a plus or minus sign. If it's possible, it could even reuse the same code. ",
  "created_at": "2018-06-21T08:34:37Z",
  "version": "1.1",
  "FAIL_TO_PASS": "[\"test_MatrixSymbol_printing\"]",
  "PASS_TO_PASS": "[\"test_Adjoint\", \"test_Assignment\", \"test_AugmentedAssignment\", \"test_EulerGamma\", \"test_GoldenRatio\", \"test_GroebnerBasis\", \"test_Homomorphism\", \"test_MatrixElement_printing\", \"test_MatrixExpressions\", \"test_PrettyModules\", \"test_PrettyPoly\", \"test_ProductSet_paranthesis\", \"test_ProductSet_prod_char_issue_10413\", \"test_QuotientRing\", \"test_RandomDomain\", \"test_SingularityFunction\", \"test_Tr\", \"test_any_object_in_sequence\", \"test_beta\", \"test_categories\", \"test_complicated_symbol_unchanged\", \"test_degree_printing\", \"test_deltas\", \"test_diffgeom_print_WedgeProduct\", \"test_elliptic_functions\", \"test_expint\", \"test_function_subclass_different_name\", \"test_gammas\", \"test_hyper\", \"test_issue_10472\", \"test_issue_11801\", \"test_issue_12675\", \"test_issue_13651\", \"test_issue_4335\", \"test_issue_5524\", \"test_issue_6134\", \"test_issue_6285\", \"test_issue_6324\", \"test_issue_6359\", \"test_issue_6739\", \"test_issue_7117\", \"test_issue_7179\", \"test_issue_7180\", \"test_issue_7927\", \"test_issue_9877\", \"test_meijerg\", \"test_negative_fractions\", \"test_noncommutative\", \"test_pprint\", \"test_pretty_Add\", \"test_pretty_Boolean\", \"test_pretty_Complement\", \"test_pretty_ComplexRegion\", \"test_pretty_ComplexRootOf\", \"test_pretty_ConditionSet\", \"test_pretty_Contains\", \"test_pretty_Cycle\", \"test_pretty_Domain\", \"test_pretty_FormalPowerSeries\", \"test_pretty_FourierSeries\", \"test_pretty_ITE\", \"test_pretty_ImageSet\", \"test_pretty_Intersection_issue_10414\", \"test_pretty_KroneckerDelta\", \"test_pretty_Mod\", \"test_pretty_RootSum\", \"test_pretty_SetExpr\", \"test_pretty_Subs\", \"test_pretty_SymmetricDifference\", \"test_pretty_Trace_issue_9044\", \"test_pretty_UnevaluatedExpr\", \"test_pretty_Union_issue_10414\", \"test_pretty_ascii_str\", \"test_pretty_basic\", \"test_pretty_class\", \"test_pretty_derivatives\", \"test_pretty_dotproduct\", \"test_pretty_functions\", \"test_pretty_integrals\", \"test_pretty_lambda\", \"test_pretty_limits\", \"test_pretty_matrix\", \"test_pretty_ndim_arrays\", \"test_pretty_no_wrap_line\", \"test_pretty_order\", \"test_pretty_ordering\", \"test_pretty_piecewise\", \"test_pretty_prec\", \"test_pretty_primenu\", \"test_pretty_primeomega\", \"test_pretty_product\", \"test_pretty_rational\", \"test_pretty_relational\", \"test_pretty_seq\", \"test_pretty_sequences\", \"test_pretty_sets\", \"test_pretty_special_functions\", \"test_pretty_sqrt\", \"test_pretty_sqrt_char_knob\", \"test_pretty_sqrt_longsymbol_no_sqrt_char\", \"test_pretty_sum\", \"test_pretty_unicode_str\", \"test_print_builtin_set\", \"test_settings\", \"test_tensor_TensorProduct\", \"test_units\", \"test_upretty_greek\", \"test_upretty_modifiers\", \"test_upretty_multiindex\", \"test_upretty_sub_super\", \"test_upretty_subs_missing_in_24\"]",
  "environment_setup_commit": "ec9e3c0436fbff934fa84e22bf07f1b3ef5bfac3",
  "patch_files": [
    "sympy/printing/pretty/pretty.py"
  ],
  "test_patch_files": [
    "sympy/printing/pretty/tests/test_pretty.py"
  ],
  "patch_diff_details": {
    "sympy/printing/pretty/pretty.py": {
      "diffs": [
        {
          "start_line_old": 828,
          "end_line_old": 828,
          "file_pos": 1,
          "file_context_length": 20623,
          "closest_snippet_id": "/tmp/repos/sympy/sympy/printing/pretty/pretty.py_PrettyPrinter._print_MatMul_PrettyPrinter._print_FunctionMatrix.3.1",
          "closest_snippet_line_distance": 9,
          "pos": 2,
          "context_length": 576
        }
      ]
    }
  },
  "vectors": 8272,
  "snippets": [
    {
      "position": 1,
      "id": "/tmp/repos/sympy/sympy/printing/pretty/pretty.py_PrettyPrinter._print_MatMul_PrettyPrinter._print_FunctionMatrix.3.1",
      "distance": 0.6534005403518677,
      "file_path": "sympy/printing/pretty/pretty.py",
      "start_line": 837,
      "end_line": 887,
      "tokens": 449,
      "context_length": 449,
      "file_pos": 1
    },
    {
      "position": 2,
      "id": "/tmp/repos/sympy/sympy/printing/pretty/pretty.py_PrettyPrinter._print_MatAdd_PrettyPrinter._print_MatAdd.3.1",
      "distance": 0.6778346300125122,
      "file_path": "sympy/printing/pretty/pretty.py",
      "start_line": 821,
      "end_line": 835,
      "tokens": 127,
      "context_length": 576,
      "file_pos": 1
    },
    {
      "position": 3,
      "id": "/tmp/repos/sympy/sympy/matrices/expressions/matexpr.py_MatrixExpr.__rpow___MatrixExpr._eval_adjoint.2.1",
      "distance": 0.682921826839447,
      "file_path": "sympy/matrices/expressions/matexpr.py",
      "start_line": 142,
      "end_line": 202,
      "tokens": 443,
      "context_length": 1019
    },
    {
      "position": 4,
      "id": "/tmp/repos/sympy/sympy/printing/pretty/pretty.py_PrettyPrinter._print_MatrixElement_PrettyPrinter._print_MatrixElement.3.2.8.1",
      "distance": 0.6883575916290283,
      "file_path": "sympy/printing/pretty/pretty.py",
      "start_line": 750,
      "end_line": 769,
      "tokens": 207,
      "context_length": 1226,
      "file_pos": 2
    },
    {
      "position": 5,
      "id": "/tmp/repos/sympy/sympy/matrices/expressions/matexpr.py_1__sympifyit.deco.3.1",
      "distance": 0.7007350325584412,
      "file_path": "sympy/matrices/expressions/matexpr.py",
      "start_line": 1,
      "end_line": 30,
      "tokens": 229,
      "context_length": 1455
    },
    {
      "position": 6,
      "id": "/tmp/repos/sympy/sympy/printing/pretty/pretty.py_PrettyPrinter._print_Transpose_PrettyPrinter._print_BlockMatrix.2.1",
      "distance": 0.7269579172134399,
      "file_path": "sympy/printing/pretty/pretty.py",
      "start_line": 796,
      "end_line": 819,
      "tokens": 216,
      "context_length": 1671,
      "file_pos": 2
    },
    {
      "position": 7,
      "id": "/tmp/repos/sympy/sympy/matrices/expressions/matadd.py_1_11",
      "distance": 0.7293561697006226,
      "file_path": "sympy/matrices/expressions/matadd.py",
      "start_line": 1,
      "end_line": 14,
      "tokens": 131,
      "context_length": 1802
    },
    {
      "position": 8,
      "id": "/tmp/repos/sympy/sympy/printing/pretty/pretty.py_PrettyPrinter._print_MatrixBase_PrettyPrinter._print_Trace.5.1",
      "distance": 0.7344062924385071,
      "file_path": "sympy/printing/pretty/pretty.py",
      "start_line": 722,
      "end_line": 747,
      "tokens": 284,
      "context_length": 2086,
      "file_pos": 3
    },
    {
      "position": 9,
      "id": "/tmp/repos/sympy/sympy/matrices/expressions/matmul.py_MatMul.as_coeff_matrices_MatMul.args_cnc.5.1",
      "distance": 0.742103099822998,
      "file_path": "sympy/matrices/expressions/matmul.py",
      "start_line": 78,
      "end_line": 133,
      "tokens": 467,
      "context_length": 2553
    },
    {
      "position": 10,
      "id": "/tmp/repos/sympy/sympy/printing/latex.py_LatexPrinter._print_BlockMatrix_LatexPrinter._print_MatAdd.6.1",
      "distance": 0.7605379819869995,
      "file_path": "sympy/printing/latex.py",
      "start_line": 1450,
      "end_line": 1482,
      "tokens": 263,
      "context_length": 2816
    },
    {
      "position": 11,
      "id": "/tmp/repos/sympy/sympy/matrices/expressions/matadd.py_MatAdd_MatAdd.doit.3.1",
      "distance": 0.7669036984443665,
      "file_path": "sympy/matrices/expressions/matadd.py",
      "start_line": 16,
      "end_line": 62,
      "tokens": 363,
      "context_length": 3179
    },
    {
      "position": 12,
      "id": "/tmp/repos/sympy/sympy/matrices/common.py_MatrixArithmetic.__neg___MatrixArithmetic.__pow__.2.4.1",
      "distance": 0.768589973449707,
      "file_path": "sympy/matrices/common.py",
      "start_line": 2038,
      "end_line": 2071,
      "tokens": 299,
      "context_length": 3478
    },
    {
      "position": 13,
      "id": "/tmp/repos/sympy/sympy/matrices/expressions/matexpr.py_MatrixExpr_MatrixExpr.__pow__.2.1",
      "distance": 0.7713718414306641,
      "file_path": "sympy/matrices/expressions/matexpr.py",
      "start_line": 33,
      "end_line": 140,
      "tokens": 794,
      "context_length": 4272
    },
    {
      "position": 14,
      "id": "/tmp/repos/sympy/sympy/matrices/expressions/matadd.py_validate_combine.1.2.1.1",
      "distance": 0.7717137932777405,
      "file_path": "sympy/matrices/expressions/matadd.py",
      "start_line": 65,
      "end_line": 80,
      "tokens": 125,
      "context_length": 4397
    },
    {
      "position": 15,
      "id": "/tmp/repos/sympy/sympy/matrices/expressions/blockmatrix.py_1_17",
      "distance": 0.778208315372467,
      "file_path": "sympy/matrices/expressions/blockmatrix.py",
      "start_line": 1,
      "end_line": 19,
      "tokens": 206,
      "context_length": 4603
    },
    {
      "position": 16,
      "id": "/tmp/repos/sympy/sympy/printing/pretty/pretty.py_PrettyPrinter._print_NDimArray_PrettyPrinter._print_MutableSparseNDimArray.1",
      "distance": 0.7788110375404358,
      "file_path": "sympy/printing/pretty/pretty.py",
      "start_line": 989,
      "end_line": 1021,
      "tokens": 354,
      "context_length": 4957,
      "file_pos": 7
    },
    {
      "position": 17,
      "id": "/tmp/repos/sympy/sympy/printing/fcode.py_FCodePrinter._print_MatrixElement_FCodePrinter._print_Add.pure_real.5.2.1.1",
      "distance": 0.7794595956802368,
      "file_path": "sympy/printing/fcode.py",
      "start_line": 241,
      "end_line": 282,
      "tokens": 352,
      "context_length": 5309
    },
    {
      "position": 18,
      "id": "/tmp/repos/sympy/sympy/matrices/expressions/matpow.py_MatPow.doit_",
      "distance": 0.781046450138092,
      "file_path": "sympy/matrices/expressions/matpow.py",
      "start_line": 51,
      "end_line": 79,
      "tokens": 242,
      "context_length": 5551
    },
    {
      "position": 19,
      "id": "/tmp/repos/sympy/sympy/matrices/immutable.py_1_9",
      "distance": 0.7904058694839478,
      "file_path": "sympy/matrices/immutable.py",
      "start_line": 1,
      "end_line": 14,
      "tokens": 113,
      "context_length": 5664
    },
    {
      "position": 20,
      "id": "/tmp/repos/sympy/sympy/printing/pretty/pretty.py_PrettyPrinter._print_Add_PrettyPrinter._print_Add.pretty_negative.8.1",
      "distance": 0.7958420515060425,
      "file_path": "sympy/printing/pretty/pretty.py",
      "start_line": 1456,
      "end_line": 1482,
      "tokens": 249,
      "context_length": 5913,
      "file_pos": 10
    },
    {
      "position": 21,
      "id": "/tmp/repos/sympy/sympy/core/sympify.py_sympify.1_sympify.1",
      "distance": 0.7964693307876587,
      "file_path": "sympy/core/sympify.py",
      "start_line": 78,
      "end_line": 259,
      "tokens": 1755,
      "context_length": 7668
    },
    {
      "position": 22,
      "id": "/tmp/repos/sympy/sympy/matrices/expressions/matmul.py_1_9",
      "distance": 0.7972912788391113,
      "file_path": "sympy/matrices/expressions/matmul.py",
      "start_line": 1,
      "end_line": 12,
      "tokens": 115,
      "context_length": 7783
    },
    {
      "position": 23,
      "id": "/tmp/repos/sympy/sympy/matrices/expressions/matmul.py_refine_MatMul_",
      "distance": 0.7989555597305298,
      "file_path": "sympy/matrices/expressions/matmul.py",
      "start_line": 261,
      "end_line": 296,
      "tokens": 229,
      "context_length": 8012
    },
    {
      "position": 24,
      "id": "/tmp/repos/sympy/sympy/matrices/expressions/matpow.py_1_MatPow._entry.3.1",
      "distance": 0.8007047176361084,
      "file_path": "sympy/matrices/expressions/matpow.py",
      "start_line": 1,
      "end_line": 49,
      "tokens": 411,
      "context_length": 8423
    },
    {
      "position": 25,
      "id": "/tmp/repos/sympy/sympy/printing/latex.py_LatexPrinter._print_MatMul_LatexPrinter._print_MatMul.3.3.1.1",
      "distance": 0.8058116436004639,
      "file_path": "sympy/printing/latex.py",
      "start_line": 1484,
      "end_line": 1496,
      "tokens": 159,
      "context_length": 8582
    },
    {
      "position": 26,
      "id": "/tmp/repos/sympy/sympy/matrices/expressions/matexpr.py_MatrixSymbol_MatrixSymbol._eval_simplify.1.1",
      "distance": 0.8072841167449951,
      "file_path": "sympy/matrices/expressions/matexpr.py",
      "start_line": 643,
      "end_line": 699,
      "tokens": 422,
      "context_length": 9004
    },
    {
      "position": 27,
      "id": "/tmp/repos/sympy/sympy/printing/pretty/pretty.py_PrettyPrinter._print_MatrixSlice_PrettyPrinter._print_MatrixSlice.prettyFunc.8.1",
      "distance": 0.8080155849456787,
      "file_path": "sympy/printing/pretty/pretty.py",
      "start_line": 772,
      "end_line": 794,
      "tokens": 224,
      "context_length": 9228,
      "file_pos": 11
    },
    {
      "position": 28,
      "id": "/tmp/repos/sympy/sympy/printing/latex.py_LatexPrinter._print_MatrixBase_LatexPrinter._print_MatrixBase.9.1",
      "distance": 0.8084299564361572,
      "file_path": "sympy/printing/latex.py",
      "start_line": 1402,
      "end_line": 1427,
      "tokens": 271,
      "context_length": 9499
    },
    {
      "position": 29,
      "id": "/tmp/repos/sympy/sympy/__init__.py_1_",
      "distance": 0.8099237680435181,
      "file_path": "sympy/__init__.py",
      "start_line": 1,
      "end_line": 95,
      "tokens": 697,
      "context_length": 10196
    },
    {
      "position": 30,
      "id": "/tmp/repos/sympy/sympy/matrices/expressions/matmul.py_MatMul._entry_MatMul._entry.16.1",
      "distance": 0.815247654914856,
      "file_path": "sympy/matrices/expressions/matmul.py",
      "start_line": 48,
      "end_line": 76,
      "tokens": 316,
      "context_length": 10512
    },
    {
      "position": 31,
      "id": "/tmp/repos/sympy/sympy/printing/str.py_StrPrinter._print_MatMul_StrPrinter._print_Cycle.1.1",
      "distance": 0.8197729587554932,
      "file_path": "sympy/printing/str.py",
      "start_line": 323,
      "end_line": 376,
      "tokens": 416,
      "context_length": 10928
    },
    {
      "position": 32,
      "id": "/tmp/repos/sympy/sympy/printing/pretty/pretty.py_PrettyPrinter._print_Add.4_PrettyPrinter._print_Add.6.1",
      "distance": 0.820487916469574,
      "file_path": "sympy/printing/pretty/pretty.py",
      "start_line": 1484,
      "end_line": 1525,
      "tokens": 325,
      "context_length": 11253,
      "file_pos": 13
    },
    {
      "position": 33,
      "id": "/tmp/repos/sympy/sympy/printing/pretty/pretty.py_PrettyPrinter._print_Sum.f_PrettyPrinter._print_Sum.14.1",
      "distance": 0.8206707239151001,
      "file_path": "sympy/printing/pretty/pretty.py",
      "start_line": 569,
      "end_line": 623,
      "tokens": 471,
      "context_length": 11724,
      "file_pos": 13
    },
    {
      "position": 34,
      "id": "/tmp/repos/sympy/sympy/core/sympify.py_sympify.2_sympify.34.1",
      "distance": 0.8229097127914429,
      "file_path": "sympy/core/sympify.py",
      "start_line": 260,
      "end_line": 372,
      "tokens": 840,
      "context_length": 12564
    },
    {
      "position": 35,
      "id": "/tmp/repos/sympy/sympy/printing/glsl.py_glsl_code.1_",
      "distance": 0.8289405703544617,
      "file_path": "sympy/printing/glsl.py",
      "start_line": 312,
      "end_line": 490,
      "tokens": 1932,
      "context_length": 14496
    },
    {
      "position": 36,
      "id": "/tmp/repos/sympy/sympy/matrices/common.py_MatrixArithmetic.__radd___MatrixArithmetic.__rmul__.11.1",
      "distance": 0.8305584192276001,
      "file_path": "sympy/matrices/common.py",
      "start_line": 2073,
      "end_line": 2108,
      "tokens": 310,
      "context_length": 14806
    },
    {
      "position": 37,
      "id": "/tmp/repos/sympy/sympy/printing/pretty/pretty.py_1_pprint_try_use_unicode.1",
      "distance": 0.8313906788825989,
      "file_path": "sympy/printing/pretty/pretty.py",
      "start_line": 1,
      "end_line": 34,
      "tokens": 287,
      "context_length": 15093,
      "file_pos": 14
    },
    {
      "position": 38,
      "id": "/tmp/repos/sympy/sympy/printing/repr.py_ReprPrinter._print_SparseMatrix_ReprPrinter._print_Sum2.1.1",
      "distance": 0.8330209255218506,
      "file_path": "sympy/printing/repr.py",
      "start_line": 99,
      "end_line": 143,
      "tokens": 419,
      "context_length": 15512
    },
    {
      "position": 39,
      "id": "/tmp/repos/sympy/sympy/diffgeom/diffgeom.py_1_16",
      "distance": 0.8360500931739807,
      "file_path": "sympy/diffgeom/diffgeom.py",
      "start_line": 1,
      "end_line": 20,
      "tokens": 174,
      "context_length": 15686
    },
    {
      "position": 40,
      "id": "/tmp/repos/sympy/sympy/matrices/sparse.py_1_collections",
      "distance": 0.8369646072387695,
      "file_path": "sympy/matrices/sparse.py",
      "start_line": 1,
      "end_line": 17,
      "tokens": 117,
      "context_length": 15803
    },
    {
      "position": 41,
      "id": "/tmp/repos/sympy/sympy/matrices/expressions/matexpr.py_MatrixExpr.from_index_summation.remove_matelement_MatrixExpr.from_index_summation.remove_matelement",
      "distance": 0.8374892473220825,
      "file_path": "sympy/matrices/expressions/matexpr.py",
      "start_line": 446,
      "end_line": 470,
      "tokens": 237,
      "context_length": 16040
    },
    {
      "position": 42,
      "id": "/tmp/repos/sympy/sympy/matrices/expressions/matexpr.py_MatrixExpr._eval_derivative_MatrixExpr._eval_derivative.19.4.1.1",
      "distance": 0.8397320508956909,
      "file_path": "sympy/matrices/expressions/matexpr.py",
      "start_line": 204,
      "end_line": 248,
      "tokens": 417,
      "context_length": 16457
    },
    {
      "position": 43,
      "id": "/tmp/repos/sympy/sympy/core/expr.py_Expr.5_Expr._pow.1.1",
      "distance": 0.8398856520652771,
      "file_path": "sympy/core/expr.py",
      "start_line": 92,
      "end_line": 150,
      "tokens": 483,
      "context_length": 16940
    },
    {
      "position": 44,
      "id": "/tmp/repos/sympy/sympy/printing/pycode.py_PythonCodePrinter._print_ITE_PythonCodePrinter._print_SparseMatrix._print_MutableSparseMatrix._print_ImmutableSparseMatrix._print_Matrix._print_DenseMatrix._print_MutableDenseMatrix._print_ImmutableMatrix._print_ImmutableDenseMatrix.1",
      "distance": 0.8398870229721069,
      "file_path": "sympy/printing/pycode.py",
      "start_line": 180,
      "end_line": 211,
      "tokens": 288,
      "context_length": 17228
    },
    {
      "position": 45,
      "id": "/tmp/repos/sympy/sympy/matrices/expressions/matexpr.py_MatrixElement_MatrixElement.doit.3.1",
      "distance": 0.8402078151702881,
      "file_path": "sympy/matrices/expressions/matexpr.py",
      "start_line": 590,
      "end_line": 614,
      "tokens": 215,
      "context_length": 17443
    },
    {
      "position": 46,
      "id": "/tmp/repos/sympy/sympy/matrices/common.py_MatrixArithmetic._eval_matrix_mul_elementwise_MatrixArithmetic.__abs__.2.1",
      "distance": 0.8403172492980957,
      "file_path": "sympy/matrices/common.py",
      "start_line": 1919,
      "end_line": 1948,
      "tokens": 299,
      "context_length": 17742
    },
    {
      "position": 47,
      "id": "/tmp/repos/sympy/sympy/printing/pycode.py_SciPyPrinter_SciPyPrinter._print_ImmutableSparseMatrix.1",
      "distance": 0.8412522077560425,
      "file_path": "sympy/printing/pycode.py",
      "start_line": 429,
      "end_line": 449,
      "tokens": 195,
      "context_length": 17937
    },
    {
      "position": 48,
      "id": "/tmp/repos/sympy/sympy/core/add.py_Add._eval_is_negative_Add._eval_is_negative.10.6.1.1",
      "distance": 0.8435543775558472,
      "file_path": "sympy/core/add.py",
      "start_line": 667,
      "end_line": 719,
      "tokens": 383,
      "context_length": 18320
    },
    {
      "position": 49,
      "id": "/tmp/repos/sympy/sympy/printing/pretty/pretty.py_PrettyPrinter._print_Sum_PrettyPrinter._print_Sum.asum",
      "distance": 0.8437633514404297,
      "file_path": "sympy/printing/pretty/pretty.py",
      "start_line": 524,
      "end_line": 567,
      "tokens": 480,
      "context_length": 18800,
      "file_pos": 20
    },
    {
      "position": 50,
      "id": "/tmp/repos/sympy/sympy/printing/theanocode.py_TheanoPrinter._print_Basic_TheanoPrinter._print_Pi.1.1",
      "distance": 0.8442916870117188,
      "file_path": "sympy/printing/theanocode.py",
      "start_line": 98,
      "end_line": 154,
      "tokens": 523,
      "context_length": 19323
    },
    {
      "position": 51,
      "id": "/tmp/repos/sympy/sympy/printing/repr.py_ReprPrinter._print_MatrixBase_ReprPrinter._print_MatrixBase.2.4.1",
      "distance": 0.8445044755935669,
      "file_path": "sympy/printing/repr.py",
      "start_line": 85,
      "end_line": 97,
      "tokens": 139,
      "context_length": 19462
    },
    {
      "position": 52,
      "id": "/tmp/repos/sympy/sympy/polys/polymatrix.py_MutablePolyDenseMatrix._eval_scalar_mul_",
      "distance": 0.8470476269721985,
      "file_path": "sympy/polys/polymatrix.py",
      "start_line": 77,
      "end_line": 87,
      "tokens": 143,
      "context_length": 19605
    },
    {
      "position": 53,
      "id": "/tmp/repos/sympy/sympy/printing/julia.py_JuliaCodePrinter._print_MatPow_JuliaCodePrinter._print_GoldenRatio.1.2.1.1",
      "distance": 0.8485283851623535,
      "file_path": "sympy/printing/julia.py",
      "start_line": 213,
      "end_line": 255,
      "tokens": 290,
      "context_length": 19895
    },
    {
      "position": 54,
      "id": "/tmp/repos/sympy/sympy/printing/ccode.py_ccode_",
      "distance": 0.8521610498428345,
      "file_path": "sympy/printing/ccode.py",
      "start_line": 627,
      "end_line": 763,
      "tokens": 1518,
      "context_length": 21413
    },
    {
      "position": 55,
      "id": "/tmp/repos/sympy/sympy/printing/rust.py_RustCodePrinter._print_ITE_RustCodePrinter._print_Symbol.2.2.1.1",
      "distance": 0.8537881374359131,
      "file_path": "sympy/printing/rust.py",
      "start_line": 429,
      "end_line": 466,
      "tokens": 349,
      "context_length": 21762
    },
    {
      "position": 56,
      "id": "/tmp/repos/sympy/sympy/matrices/expressions/matexpr.py_MatrixExpr.from_index_summation.recurse_expr_MatrixExpr.from_index_summation.10.3.1.1",
      "distance": 0.8545171022415161,
      "file_path": "sympy/matrices/expressions/matexpr.py",
      "start_line": 472,
      "end_line": 587,
      "tokens": 1155,
      "context_length": 22917
    },
    {
      "position": 57,
      "id": "/tmp/repos/sympy/sympy/printing/pretty/pretty.py_PrettyPrinter._print_hyper_PrettyPrinter._print_hyper.ap.27.1",
      "distance": 0.8556526303291321,
      "file_path": "sympy/printing/pretty/pretty.py",
      "start_line": 1103,
      "end_line": 1149,
      "tokens": 403,
      "context_length": 23320,
      "file_pos": 25
    },
    {
      "position": 58,
      "id": "/tmp/repos/sympy/sympy/printing/ccode.py_C89CodePrinter._print_ITE_C89CodePrinter._print_AugmentedAssignment.4.1",
      "distance": 0.8592829704284668,
      "file_path": "sympy/printing/ccode.py",
      "start_line": 355,
      "end_line": 390,
      "tokens": 388,
      "context_length": 23708
    },
    {
      "position": 59,
      "id": "/tmp/repos/sympy/sympy/core/add.py_Add._eval_is_nonnegative_Add._eval_is_nonnegative.2.2.2.3.2.1.1",
      "distance": 0.8612078428268433,
      "file_path": "sympy/core/add.py",
      "start_line": 637,
      "end_line": 650,
      "tokens": 139,
      "context_length": 23847
    },
    {
      "position": 60,
      "id": "/tmp/repos/sympy/sympy/printing/pretty/pretty.py_PrettyPrinter._print_meijerg_PrettyPrinter._print_meijerg.v.45.1",
      "distance": 0.8620439171791077,
      "file_path": "sympy/printing/pretty/pretty.py",
      "start_line": 1151,
      "end_line": 1233,
      "tokens": 773,
      "context_length": 24620,
      "file_pos": 25
    },
    {
      "position": 61,
      "id": "/tmp/repos/sympy/sympy/printing/latex.py_LatexPrinter._print_HadamardProduct_LatexPrinter._print_Identity.1.1",
      "distance": 0.8622260689735413,
      "file_path": "sympy/printing/latex.py",
      "start_line": 1505,
      "end_line": 1535,
      "tokens": 303,
      "context_length": 24923
    },
    {
      "position": 62,
      "id": "/tmp/repos/sympy/sympy/printing/pretty/pretty.py_PrettyPrinter._print_Gradient_PrettyPrinter._print_factorial2.6.1",
      "distance": 0.8629213571548462,
      "file_path": "sympy/printing/pretty/pretty.py",
      "start_line": 131,
      "end_line": 188,
      "tokens": 556,
      "context_length": 25479,
      "file_pos": 25
    },
    {
      "position": 63,
      "id": "/tmp/repos/sympy/sympy/matrices/expressions/__init__.py_1_",
      "distance": 0.864159345626831,
      "file_path": "sympy/matrices/expressions/__init__.py",
      "start_line": 1,
      "end_line": 20,
      "tokens": 187,
      "context_length": 25666
    },
    {
      "position": 64,
      "id": "/tmp/repos/sympy/sympy/printing/latex.py_LatexPrinter._print_ImmutableMatrix_LatexPrinter._print_MatrixSlice",
      "distance": 0.8651027083396912,
      "file_path": "sympy/printing/latex.py",
      "start_line": 1428,
      "end_line": 1448,
      "tokens": 208,
      "context_length": 25874
    },
    {
      "position": 65,
      "id": "/tmp/repos/sympy/sympy/core/add.py_Add._eval_adjoint_Add._sage_.3.1",
      "distance": 0.8652044534683228,
      "file_path": "sympy/core/add.py",
      "start_line": 860,
      "end_line": 876,
      "tokens": 126,
      "context_length": 26000
    },
    {
      "position": 66,
      "id": "/tmp/repos/sympy/sympy/core/add.py_Add._eval_is_positive_Add._eval_is_positive.10.6.1.1",
      "distance": 0.8660111427307129,
      "file_path": "sympy/core/add.py",
      "start_line": 583,
      "end_line": 635,
      "tokens": 383,
      "context_length": 26383
    },
    {
      "position": 67,
      "id": "/tmp/repos/sympy/sympy/printing/rcode.py_RCodePrinter._print_ITE_RCodePrinter._print_AugmentedAssignment.4.1",
      "distance": 0.8665683269500732,
      "file_path": "sympy/printing/rcode.py",
      "start_line": 230,
      "end_line": 264,
      "tokens": 372,
      "context_length": 26755
    },
    {
      "position": 68,
      "id": "/tmp/repos/sympy/sympy/core/add.py_Add._eval_is_nonpositive_Add._eval_is_nonpositive.2.2.2.3.2.1.1",
      "distance": 0.8674602508544922,
      "file_path": "sympy/core/add.py",
      "start_line": 652,
      "end_line": 665,
      "tokens": 139,
      "context_length": 26894
    },
    {
      "position": 69,
      "id": "/tmp/repos/sympy/sympy/printing/str.py_StrPrinter._print_MatrixSlice_StrPrinter._print_DeferredVector.1.1",
      "distance": 0.8702012300491333,
      "file_path": "sympy/printing/str.py",
      "start_line": 250,
      "end_line": 265,
      "tokens": 142,
      "context_length": 27036
    },
    {
      "position": 70,
      "id": "/tmp/repos/sympy/sympy/printing/julia.py_JuliaCodePrinter._print_SparseMatrix_JuliaCodePrinter._print_SparseMatrix.8.1",
      "distance": 0.87440025806427,
      "file_path": "sympy/printing/julia.py",
      "start_line": 341,
      "end_line": 349,
      "tokens": 139,
      "context_length": 27175
    },
    {
      "position": 71,
      "id": "/tmp/repos/sympy/sympy/matrices/expressions/matexpr.py_MatrixExpr.__getitem___MatrixExpr.__getitem__.3",
      "distance": 0.8745829463005066,
      "file_path": "sympy/matrices/expressions/matexpr.py",
      "start_line": 287,
      "end_line": 320,
      "tokens": 355,
      "context_length": 27530
    },
    {
      "position": 72,
      "id": "/tmp/repos/sympy/sympy/printing/glsl.py_GLSLPrinter._print_Matrix_GLSLPrinter._print_MatrixElement.nest.9.3.2.1",
      "distance": 0.8756211400032043,
      "file_path": "sympy/printing/glsl.py",
      "start_line": 134,
      "end_line": 167,
      "tokens": 339,
      "context_length": 27869
    },
    {
      "position": 73,
      "id": "/tmp/repos/sympy/sympy/interactive/printing.py__init_ipython_printing._print_latex_matplotlib__init_ipython_printing.23.12.1",
      "distance": 0.8768460750579834,
      "file_path": "sympy/interactive/printing.py",
      "start_line": 149,
      "end_line": 230,
      "tokens": 698,
      "context_length": 28567
    },
    {
      "position": 74,
      "id": "/tmp/repos/sympy/sympy/core/sympify.py__sympify__sympify.2.1",
      "distance": 0.8778378367424011,
      "file_path": "sympy/core/sympify.py",
      "start_line": 375,
      "end_line": 401,
      "tokens": 180,
      "context_length": 28747
    },
    {
      "position": 75,
      "id": "/tmp/repos/sympy/sympy/core/add.py_Add._eval_as_leading_term_Add._eval_as_leading_term.7.6.7.1",
      "distance": 0.8791271448135376,
      "file_path": "sympy/core/add.py",
      "start_line": 828,
      "end_line": 858,
      "tokens": 296,
      "context_length": 29043
    },
    {
      "position": 76,
      "id": "/tmp/repos/sympy/sympy/printing/theanocode.py_1_10.mapping.1",
      "distance": 0.8798536658287048,
      "file_path": "sympy/printing/theanocode.py",
      "start_line": 1,
      "end_line": 64,
      "tokens": 563,
      "context_length": 29606
    },
    {
      "position": 77,
      "id": "/tmp/repos/sympy/sympy/printing/mathml.py_MathMLContentPrinter._print_Add_MathMLContentPrinter._print_Add.9.1",
      "distance": 0.8801969885826111,
      "file_path": "sympy/printing/mathml.py",
      "start_line": 191,
      "end_line": 217,
      "tokens": 232,
      "context_length": 29838
    }
  ],
  "files": [
    {
      "file_path": "sympy/printing/pretty/pretty.py",
      "position": 1,
      "tokens": 20623,
      "context_length": 20623
    },
    {
      "file_path": "sympy/matrices/expressions/matexpr.py",
      "position": 2,
      "tokens": 6152,
      "context_length": 26775
    },
    {
      "file_path": "sympy/matrices/expressions/matadd.py",
      "position": 3,
      "tokens": 918,
      "context_length": 27693
    },
    {
      "file_path": "sympy/matrices/expressions/matmul.py",
      "position": 4,
      "tokens": 2376,
      "context_length": 30069
    },
    {
      "file_path": "sympy/printing/latex.py",
      "position": 5,
      "tokens": 22954,
      "context_length": 53023
    },
    {
      "file_path": "sympy/matrices/common.py",
      "position": 6,
      "tokens": 17332,
      "context_length": 70355
    },
    {
      "file_path": "sympy/matrices/expressions/blockmatrix.py",
      "position": 7,
      "tokens": 3678,
      "context_length": 74033
    },
    {
      "file_path": "sympy/printing/fcode.py",
      "position": 8,
      "tokens": 5751,
      "context_length": 79784
    },
    {
      "file_path": "sympy/matrices/expressions/matpow.py",
      "position": 9,
      "tokens": 648,
      "context_length": 80432
    },
    {
      "file_path": "sympy/matrices/immutable.py",
      "position": 10,
      "tokens": 1369,
      "context_length": 81801
    },
    {
      "file_path": "sympy/core/sympify.py",
      "position": 11,
      "tokens": 4015,
      "context_length": 85816
    },
    {
      "file_path": "sympy/__init__.py",
      "position": 12,
      "tokens": 697,
      "context_length": 86513
    },
    {
      "file_path": "sympy/printing/str.py",
      "position": 13,
      "tokens": 7147,
      "context_length": 93660
    },
    {
      "file_path": "sympy/printing/glsl.py",
      "position": 14,
      "tokens": 4798,
      "context_length": 98458
    },
    {
      "file_path": "sympy/printing/repr.py",
      "position": 15,
      "tokens": 2100,
      "context_length": 100558
    },
    {
      "file_path": "sympy/diffgeom/diffgeom.py",
      "position": 16,
      "tokens": 14509,
      "context_length": 115067
    },
    {
      "file_path": "sympy/matrices/sparse.py",
      "position": 17,
      "tokens": 10443,
      "context_length": 125510
    },
    {
      "file_path": "sympy/core/expr.py",
      "position": 18,
      "tokens": 28988,
      "context_length": 154498
    },
    {
      "file_path": "sympy/printing/pycode.py",
      "position": 19,
      "tokens": 4371,
      "context_length": 158869
    },
    {
      "file_path": "sympy/core/add.py",
      "position": 20,
      "tokens": 8591,
      "context_length": 167460
    },
    {
      "file_path": "sympy/printing/theanocode.py",
      "position": 21,
      "tokens": 2083,
      "context_length": 169543
    },
    {
      "file_path": "sympy/polys/polymatrix.py",
      "position": 22,
      "tokens": 943,
      "context_length": 170486
    },
    {
      "file_path": "sympy/printing/julia.py",
      "position": 23,
      "tokens": 5751,
      "context_length": 176237
    },
    {
      "file_path": "sympy/printing/ccode.py",
      "position": 24,
      "tokens": 7081,
      "context_length": 183318
    },
    {
      "file_path": "sympy/printing/rust.py",
      "position": 25,
      "tokens": 5437,
      "context_length": 188755
    },
    {
      "file_path": "sympy/matrices/expressions/__init__.py",
      "position": 26,
      "tokens": 188,
      "context_length": 188943
    },
    {
      "file_path": "sympy/printing/rcode.py",
      "position": 27,
      "tokens": 3725,
      "context_length": 192668
    },
    {
      "file_path": "sympy/interactive/printing.py",
      "position": 28,
      "tokens": 3782,
      "context_length": 196450
    },
    {
      "file_path": "sympy/printing/mathml.py",
      "position": 29,
      "tokens": 7260,
      "context_length": 203710
    }
  ]
}