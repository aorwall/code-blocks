{
  "instance_id": "sympy__sympy-16334",
  "model_patch": "diff --git a/sympy/core/power.py b/sympy/core/power.py\nindex 13b4b560f7..415333bfe2 100644\n--- a/sympy/core/power.py\n+++ b/sympy/core/power.py\n@@ -449,6 +449,8 @@ def _eval_is_positive(self):\n                     return False\n             if self.exp.is_imaginary:\n                 return log(self.base).is_imaginary\n+        if self.base.is_zero and self.exp.is_real and not self.exp.is_zero:\n+            return False\n \n     def _eval_is_negative(self):\n         if self.base.is_negative:\n",
  "model_name_or_path": "Devin",
  "pass_or_fail": "fail",
  "model_patch_files": [
    "sympy/core/power.py"
  ],
  "repo": "sympy/sympy",
  "base_commit": "356a73cd676e0c3f1a1c3057a6895db0d82a1be7",
  "patch": "diff --git a/sympy/core/power.py b/sympy/core/power.py\n--- a/sympy/core/power.py\n+++ b/sympy/core/power.py\n@@ -437,6 +437,9 @@ def _eval_is_positive(self):\n                 return True\n             if self.exp.is_odd:\n                 return False\n+        elif self.base.is_zero:\n+            if self.exp.is_real:\n+                return self.exp.is_zero\n         elif self.base.is_nonpositive:\n             if self.exp.is_odd:\n                 return False\n@@ -459,6 +462,9 @@ def _eval_is_negative(self):\n         elif self.base.is_positive:\n             if self.exp.is_real:\n                 return False\n+        elif self.base.is_zero:\n+            if self.exp.is_real:\n+                return False\n         elif self.base.is_nonnegative:\n             if self.exp.is_nonnegative:\n                 return False\n",
  "test_patch": "diff --git a/sympy/core/tests/test_assumptions.py b/sympy/core/tests/test_assumptions.py\n--- a/sympy/core/tests/test_assumptions.py\n+++ b/sympy/core/tests/test_assumptions.py\n@@ -786,6 +786,32 @@ def test_Mul_is_prime_composite():\n     assert ( (x+1)*(y+1) ).is_prime is None\n     assert ( (x+1)*(y+1) ).is_composite is None\n \n+\n+def test_Pow_is_pos_neg():\n+    z = Symbol('z', real=True)\n+    w = Symbol('w', nonpositive=True)\n+\n+    assert (S(-1)**S(2)).is_positive is True\n+    assert (S(1)**z).is_positive is True\n+    assert (S(-1)**S(3)).is_positive is False\n+    assert (S(0)**S(0)).is_positive is True  # 0**0 is 1\n+    assert (w**S(3)).is_positive is False\n+    assert (w**S(2)).is_positive is None\n+    assert (I**2).is_positive is False\n+    assert (I**4).is_positive is True\n+\n+    # tests emerging from #16332 issue\n+    p = Symbol('p', zero=True)\n+    q = Symbol('q', zero=False, real=True)\n+    j = Symbol('j', zero=False, even=True)\n+    x = Symbol('x', zero=True)\n+    y = Symbol('y', zero=True)\n+    assert (p**q).is_positive is False\n+    assert (p**q).is_negative is False\n+    assert (p**j).is_positive is False\n+    assert (x**y).is_positive is True   # 0**0\n+    assert (x**y).is_negative is False\n+\n def test_Pow_is_prime_composite():\n     from sympy import Pow\n     x = Symbol('x', positive=True, integer=True)\n",
  "problem_statement": "S(0)**real(!=0) should be (0 or zoo) and hence non-positive. \nConsider the following code from master:\r\n```py\r\n>>> from sympy import symbols, ask, Q\r\n>>> from sympy.abc import x,y,z\r\n>>> p = symbols('p', real=True, zero=False)\r\n>>> q = symbols('q', zero=True)\r\n>>> (q**p).is_positive\r\n>>>\r\n```\r\nSince `0**a`(where a is real and non-zero) should always be (0 or `zoo`). Therefore, the result should have been `False`.\r\n\n",
  "hints_text": "",
  "created_at": "2019-03-19T10:40:10Z",
  "version": "1.4",
  "FAIL_TO_PASS": "[\"test_Pow_is_pos_neg\"]",
  "PASS_TO_PASS": "[\"test_Add_is_algebraic\", \"test_Add_is_imaginary\", \"test_Add_is_pos_neg\", \"test_E\", \"test_I\", \"test_Mul_is_algebraic\", \"test_Mul_is_infinite\", \"test_Mul_is_prime_composite\", \"test_Pow_is_algebraic\", \"test_Pow_is_prime_composite\", \"test_composite\", \"test_hash_vs_eq\", \"test_hash_vs_typeinfo\", \"test_hash_vs_typeinfo_2\", \"test_inconsistent\", \"test_infinity\", \"test_issue_10024\", \"test_issue_10302\", \"test_issue_2730\", \"test_issue_2920\", \"test_issue_3825\", \"test_issue_4149\", \"test_issue_4822\", \"test_issue_6631\", \"test_issue_7899\", \"test_issue_8075\", \"test_issue_8642\", \"test_issue_9115_9150\", \"test_issue_9165\", \"test_issues_8632_8633_8638_8675_8992\", \"test_nan\", \"test_neg_infinity\", \"test_neg_rational\", \"test_neg_symbol_falsenegative\", \"test_neg_symbol_falsenonnegative_real\", \"test_neg_symbol_falsepositive\", \"test_neg_symbol_falsepositive_real\", \"test_neg_symbol_nonpositive\", \"test_neg_symbol_positive\", \"test_negativeone\", \"test_one\", \"test_other_symbol\", \"test_pi\", \"test_pos_rational\", \"test_prime\", \"test_prime_symbol\", \"test_sanitize_assumptions\", \"test_special_assumptions\", \"test_special_is_rational\", \"test_symbol_falsenonnegative\", \"test_symbol_falsenonnegative_real\", \"test_symbol_falsepositive\", \"test_symbol_falsepositive_mul\", \"test_symbol_falsepositive_real\", \"test_symbol_imaginary\", \"test_symbol_noncommutative\", \"test_symbol_nonpositive\", \"test_symbol_positive\", \"test_symbol_real\", \"test_symbol_unset\", \"test_symbol_zero\", \"test_zero\", \"test_zoo\"]",
  "environment_setup_commit": "73b3f90093754c5ed1561bd885242330e3583004",
  "patch_files": [
    "sympy/core/power.py"
  ],
  "test_patch_files": [
    "sympy/core/tests/test_assumptions.py"
  ],
  "patch_diff_details": {
    "sympy/core/power.py": {
      "diffs": [
        {
          "start_line_old": 440,
          "end_line_old": 440,
          "file_pos": 7,
          "file_context_length": 78846,
          "closest_snippet_id": "/tmp/repos/sympy/sympy/core/power.py_Pow_Pow.1",
          "closest_snippet_line_distance": 201
        },
        {
          "start_line_old": 462,
          "end_line_old": 462,
          "file_pos": 7,
          "file_context_length": 78846,
          "closest_snippet_id": "/tmp/repos/sympy/sympy/core/power.py_Pow_Pow.1",
          "closest_snippet_line_distance": 223
        }
      ]
    }
  },
  "vectors": 8024,
  "snippets": [
    {
      "position": 1,
      "id": "/tmp/repos/sympy/sympy/assumptions/ask.py_AssumptionKeys.nonzero_AssumptionKeys.nonzero.2.1",
      "distance": 0.7637766003608704,
      "file_path": "sympy/assumptions/ask.py",
      "start_line": 497,
      "end_line": 535,
      "tokens": 294,
      "context_length": 294
    },
    {
      "position": 2,
      "id": "/tmp/repos/sympy/sympy/assumptions/ask.py_AssumptionKeys.real_AssumptionKeys.real.2.1",
      "distance": 0.7666570544242859,
      "file_path": "sympy/assumptions/ask.py",
      "start_line": 71,
      "end_line": 126,
      "tokens": 490,
      "context_length": 784
    },
    {
      "position": 3,
      "id": "/tmp/repos/sympy/sympy/assumptions/ask.py_AssumptionKeys.positive_AssumptionKeys.positive.2.1",
      "distance": 0.7790600657463074,
      "file_path": "sympy/assumptions/ask.py",
      "start_line": 395,
      "end_line": 431,
      "tokens": 331,
      "context_length": 1115
    },
    {
      "position": 4,
      "id": "/tmp/repos/sympy/sympy/assumptions/ask.py_AssumptionKeys.nonpositive_AssumptionKeys.nonpositive.2.1",
      "distance": 0.8268630504608154,
      "file_path": "sympy/assumptions/ask.py",
      "start_line": 537,
      "end_line": 568,
      "tokens": 265,
      "context_length": 1380
    },
    {
      "position": 5,
      "id": "/tmp/repos/sympy/sympy/assumptions/handlers/sets.py_AskRealHandler.Pow_AskRealHandler.Pow.6.1.1.4.1.1",
      "distance": 0.8672496676445007,
      "file_path": "sympy/assumptions/handlers/sets.py",
      "start_line": 234,
      "end_line": 287,
      "tokens": 560,
      "context_length": 1940
    },
    {
      "position": 6,
      "id": "/tmp/repos/sympy/sympy/assumptions/ask.py_AssumptionKeys.positive_definite_AssumptionKeys.positive_definite.2.1",
      "distance": 0.8759046792984009,
      "file_path": "sympy/assumptions/ask.py",
      "start_line": 862,
      "end_line": 892,
      "tokens": 248,
      "context_length": 2188
    },
    {
      "position": 7,
      "id": "/tmp/repos/sympy/sympy/assumptions/ask.py_AssumptionKeys.nonnegative_AssumptionKeys.nonnegative.2.1",
      "distance": 0.8872994184494019,
      "file_path": "sympy/assumptions/ask.py",
      "start_line": 570,
      "end_line": 601,
      "tokens": 275,
      "context_length": 2463
    },
    {
      "position": 8,
      "id": "/tmp/repos/sympy/sympy/assumptions/ask.py_AssumptionKeys.zero_AssumptionKeys.zero.2.1",
      "distance": 0.8884238004684448,
      "file_path": "sympy/assumptions/ask.py",
      "start_line": 471,
      "end_line": 495,
      "tokens": 153,
      "context_length": 2616
    },
    {
      "position": 9,
      "id": "/tmp/repos/sympy/sympy/assumptions/ask.py_AssumptionKeys.real_elements_AssumptionKeys.real_elements.2.1",
      "distance": 0.8942238092422485,
      "file_path": "sympy/assumptions/ask.py",
      "start_line": 1046,
      "end_line": 1063,
      "tokens": 113,
      "context_length": 2729
    },
    {
      "position": 10,
      "id": "/tmp/repos/sympy/sympy/assumptions/ask.py_AssumptionKeys.negative_AssumptionKeys.negative.2.1",
      "distance": 0.9075024127960205,
      "file_path": "sympy/assumptions/ask.py",
      "start_line": 433,
      "end_line": 469,
      "tokens": 343,
      "context_length": 3072
    },
    {
      "position": 11,
      "id": "/tmp/repos/sympy/sympy/functions/elementary/complexes.py_re.as_real_imag_re._sage_.2.1",
      "distance": 0.9091068506240845,
      "file_path": "sympy/functions/elementary/complexes.py",
      "start_line": 93,
      "end_line": 118,
      "tokens": 243,
      "context_length": 3315
    },
    {
      "position": 12,
      "id": "/tmp/repos/sympy/sympy/assumptions/handlers/order.py_AskPositiveHandler_AskPositiveHandler._number.6.3.2.3.1.1",
      "distance": 0.9233039617538452,
      "file_path": "sympy/assumptions/handlers/order.py",
      "start_line": 217,
      "end_line": 245,
      "tokens": 217,
      "context_length": 3532
    },
    {
      "position": 13,
      "id": "/tmp/repos/sympy/sympy/assumptions/handlers/order.py_AskPositiveHandler.Basic_",
      "distance": 0.9400613307952881,
      "file_path": "sympy/assumptions/handlers/order.py",
      "start_line": 247,
      "end_line": 366,
      "tokens": 799,
      "context_length": 4331
    },
    {
      "position": 14,
      "id": "/tmp/repos/sympy/sympy/assumptions/ask.py_AssumptionKeys.extended_real_AssumptionKeys.extended_real.2.1",
      "distance": 0.9430021643638611,
      "file_path": "sympy/assumptions/ask.py",
      "start_line": 128,
      "end_line": 150,
      "tokens": 143,
      "context_length": 4474
    },
    {
      "position": 15,
      "id": "/tmp/repos/sympy/sympy/physics/secondquant.py_SqOperator.is_symbolic_Creator.1",
      "distance": 0.9473780393600464,
      "file_path": "sympy/physics/secondquant.py",
      "start_line": 343,
      "end_line": 390,
      "tokens": 228,
      "context_length": 4702
    },
    {
      "position": 16,
      "id": "/tmp/repos/sympy/sympy/core/mul.py_Mul._eval_is_positive_Mul._eval_is_positive.2.1",
      "distance": 0.9475051164627075,
      "file_path": "sympy/core/mul.py",
      "start_line": 1275,
      "end_line": 1288,
      "tokens": 156,
      "context_length": 4858
    },
    {
      "position": 17,
      "id": "/tmp/repos/sympy/sympy/core/power.py_Pow_Pow.1",
      "distance": 0.9516326189041138,
      "file_path": "sympy/core/power.py",
      "start_line": 157,
      "end_line": 239,
      "tokens": 1060,
      "context_length": 5918,
      "file_pos": 7
    },
    {
      "position": 18,
      "id": "/tmp/repos/sympy/sympy/assumptions/ask.py_AssumptionKeys.imaginary_AssumptionKeys.imaginary.2.1",
      "distance": 0.9546909332275391,
      "file_path": "sympy/assumptions/ask.py",
      "start_line": 152,
      "end_line": 178,
      "tokens": 165,
      "context_length": 6083
    },
    {
      "position": 19,
      "id": "/tmp/repos/sympy/sympy/polys/subresultants_qq_zz.py_subresultants_amv_q.28_compute_sign.5.2.1.1",
      "distance": 0.9556512832641602,
      "file_path": "sympy/polys/subresultants_qq_zz.py",
      "start_line": 1704,
      "end_line": 1765,
      "tokens": 548,
      "context_length": 6631
    },
    {
      "position": 20,
      "id": "/tmp/repos/sympy/sympy/assumptions/handlers/sets.py_AskRealHandler.7_AskExtendedRealHandler.4",
      "distance": 0.958626389503479,
      "file_path": "sympy/assumptions/handlers/sets.py",
      "start_line": 289,
      "end_line": 330,
      "tokens": 289,
      "context_length": 6920
    },
    {
      "position": 21,
      "id": "/tmp/repos/sympy/sympy/assumptions/handlers/order.py_AskNegativeHandler.Pow_AskNonNegativeHandler.Basic.1.2.2.1.1",
      "distance": 0.9594143033027649,
      "file_path": "sympy/assumptions/handlers/order.py",
      "start_line": 97,
      "end_line": 136,
      "tokens": 263,
      "context_length": 7183
    },
    {
      "position": 22,
      "id": "/tmp/repos/sympy/sympy/core/expr.py_Expr._eval_is_algebraic_expr_Expr.103",
      "distance": 0.964622974395752,
      "file_path": "sympy/core/expr.py",
      "start_line": 2574,
      "end_line": 2634,
      "tokens": 448,
      "context_length": 7631
    },
    {
      "position": 23,
      "id": "/tmp/repos/sympy/sympy/assumptions/handlers/order.py_AskNonZeroHandler_AskNonZeroHandler.Abs.1.1",
      "distance": 0.9671422243118286,
      "file_path": "sympy/assumptions/handlers/order.py",
      "start_line": 139,
      "end_line": 184,
      "tokens": 290,
      "context_length": 7921
    },
    {
      "position": 24,
      "id": "/tmp/repos/sympy/sympy/assumptions/handlers/sets.py_AskImaginaryHandler.Pow_AskImaginaryHandler.Pow.6.1.2.3.2.3.1",
      "distance": 0.9674304723739624,
      "file_path": "sympy/assumptions/handlers/sets.py",
      "start_line": 486,
      "end_line": 534,
      "tokens": 419,
      "context_length": 8340
    },
    {
      "position": 25,
      "id": "/tmp/repos/sympy/sympy/assumptions/ask.py_AssumptionKeys.algebraic_AssumptionKeys.algebraic.2.1",
      "distance": 0.9682368636131287,
      "file_path": "sympy/assumptions/ask.py",
      "start_line": 208,
      "end_line": 233,
      "tokens": 188,
      "context_length": 8528
    },
    {
      "position": 26,
      "id": "/tmp/repos/sympy/sympy/core/evalf.py_get_complex_part_evalf_im.1.1",
      "distance": 0.9688828587532043,
      "file_path": "sympy/core/evalf.py",
      "start_line": 232,
      "end_line": 255,
      "tokens": 215,
      "context_length": 8743
    },
    {
      "position": 27,
      "id": "/tmp/repos/sympy/sympy/matrices/dense.py_1__iszero.2.1",
      "distance": 0.9742892980575562,
      "file_path": "sympy/matrices/dense.py",
      "start_line": 1,
      "end_line": 24,
      "tokens": 200,
      "context_length": 8943
    },
    {
      "position": 28,
      "id": "/tmp/repos/sympy/sympy/physics/secondquant.py_NO.has_q_creators_NO.has_q_creators.2.1",
      "distance": 0.9743166565895081,
      "file_path": "sympy/physics/secondquant.py",
      "start_line": 1834,
      "end_line": 1856,
      "tokens": 198,
      "context_length": 9141
    },
    {
      "position": 29,
      "id": "/tmp/repos/sympy/sympy/solvers/solvers.py_solve.1_solve.1",
      "distance": 0.9767252206802368,
      "file_path": "sympy/solvers/solvers.py",
      "start_line": 454,
      "end_line": 907,
      "tokens": 4459,
      "context_length": 13600
    },
    {
      "position": 30,
      "id": "/tmp/repos/sympy/sympy/core/function.py__coeff_isneg_ArgumentIndexError.__str__.1.1",
      "distance": 0.9769608974456787,
      "file_path": "sympy/core/function.py",
      "start_line": 63,
      "end_line": 104,
      "tokens": 266,
      "context_length": 13866
    }
  ],
  "files": [
    {
      "file_path": "sympy/assumptions/ask.py",
      "position": 1,
      "tokens": 10797,
      "context_length": 10797
    },
    {
      "file_path": "sympy/assumptions/handlers/sets.py",
      "position": 2,
      "tokens": 4724,
      "context_length": 15521
    },
    {
      "file_path": "sympy/functions/elementary/complexes.py",
      "position": 3,
      "tokens": 9061,
      "context_length": 24582
    },
    {
      "file_path": "sympy/assumptions/handlers/order.py",
      "position": 4,
      "tokens": 2345,
      "context_length": 26927
    },
    {
      "file_path": "sympy/physics/secondquant.py",
      "position": 5,
      "tokens": 22559,
      "context_length": 49486
    },
    {
      "file_path": "sympy/core/mul.py",
      "position": 6,
      "tokens": 14769,
      "context_length": 64255
    },
    {
      "file_path": "sympy/core/power.py",
      "position": 7,
      "tokens": 14591,
      "context_length": 78846
    },
    {
      "file_path": "sympy/polys/subresultants_qq_zz.py",
      "position": 8,
      "tokens": 26294,
      "context_length": 105140
    },
    {
      "file_path": "sympy/core/expr.py",
      "position": 9,
      "tokens": 29678,
      "context_length": 134818
    },
    {
      "file_path": "sympy/core/evalf.py",
      "position": 10,
      "tokens": 13681,
      "context_length": 148499
    },
    {
      "file_path": "sympy/matrices/dense.py",
      "position": 11,
      "tokens": 11868,
      "context_length": 160367
    },
    {
      "file_path": "sympy/solvers/solvers.py",
      "position": 12,
      "tokens": 32273,
      "context_length": 192640
    },
    {
      "file_path": "sympy/core/function.py",
      "position": 13,
      "tokens": 26410,
      "context_length": 219050
    }
  ]
}