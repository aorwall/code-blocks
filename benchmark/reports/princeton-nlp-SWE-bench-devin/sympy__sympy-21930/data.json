{
  "instance_id": "sympy__sympy-21930",
  "model_patch": "diff --git a/sympy/physics/secondquant.py b/sympy/physics/secondquant.py\nindex d19ee2fc63..84ff349146 100644\n--- a/sympy/physics/secondquant.py\n+++ b/sympy/physics/secondquant.py\n@@ -478,7 +478,7 @@ def __repr__(self):\n         return \"CreateBoson(%s)\" % self.state\n \n     def _latex(self, printer):\n-        return \"b^\\\\dagger_{%s}\" % self.state.name\n+        return \"{b^{\\\\dagger}}_{%s}\" % self.state.name\n \n B = AnnihilateBoson\n Bd = CreateBoson\n@@ -939,7 +939,7 @@ def __repr__(self):\n         return \"CreateFermion(%s)\" % self.state\n \n     def _latex(self, printer):\n-        return \"a^\\\\dagger_{%s}\" % self.state.name\n+        return \"{a^{\\\\dagger}}_{%s}\" % self.state.name\n \n Fd = CreateFermion\n F = AnnihilateFermion\ndiff --git a/test_latex_rendering.py b/test_latex_rendering.py\nnew file mode 100644\nindex 0000000000..5a55613dda\n--- /dev/null\n+++ b/test_latex_rendering.py\n@@ -0,0 +1,15 @@\n+\n+import sympy as sp\n+from sympy.physics.secondquant import B, Bd, Commutator\n+\n+# Initialize pretty printing\n+sp.init_printing()\n+\n+# Define a symbol\n+a = sp.Symbol('0')\n+\n+# Create a commutator with double superscripts\n+comm = Commutator(Bd(a)**2, B(a))\n+\n+# Print the Latex representation of the commutator\n+print(sp.latex(comm))\n",
  "model_name_or_path": "Devin",
  "pass_or_fail": "fail",
  "model_patch_files": [
    "sympy/physics/secondquant.py",
    "test_latex_rendering.py"
  ],
  "repo": "sympy/sympy",
  "base_commit": "de446c6d85f633271dfec1452f6f28ea783e293f",
  "patch": "diff --git a/sympy/physics/secondquant.py b/sympy/physics/secondquant.py\n--- a/sympy/physics/secondquant.py\n+++ b/sympy/physics/secondquant.py\n@@ -218,7 +218,7 @@ def _sortkey(cls, index):\n             return (12, label, h)\n \n     def _latex(self, printer):\n-        return \"%s^{%s}_{%s}\" % (\n+        return \"{%s^{%s}_{%s}}\" % (\n             self.symbol,\n             \"\".join([ i.name for i in self.args[1]]),\n             \"\".join([ i.name for i in self.args[2]])\n@@ -478,7 +478,7 @@ def __repr__(self):\n         return \"CreateBoson(%s)\" % self.state\n \n     def _latex(self, printer):\n-        return \"b^\\\\dagger_{%s}\" % self.state.name\n+        return \"{b^\\\\dagger_{%s}}\" % self.state.name\n \n B = AnnihilateBoson\n Bd = CreateBoson\n@@ -939,7 +939,7 @@ def __repr__(self):\n         return \"CreateFermion(%s)\" % self.state\n \n     def _latex(self, printer):\n-        return \"a^\\\\dagger_{%s}\" % self.state.name\n+        return \"{a^\\\\dagger_{%s}}\" % self.state.name\n \n Fd = CreateFermion\n F = AnnihilateFermion\n",
  "test_patch": "diff --git a/sympy/physics/tests/test_secondquant.py b/sympy/physics/tests/test_secondquant.py\n--- a/sympy/physics/tests/test_secondquant.py\n+++ b/sympy/physics/tests/test_secondquant.py\n@@ -94,7 +94,7 @@ def test_operator():\n def test_create():\n     i, j, n, m = symbols('i,j,n,m')\n     o = Bd(i)\n-    assert latex(o) == \"b^\\\\dagger_{i}\"\n+    assert latex(o) == \"{b^\\\\dagger_{i}}\"\n     assert isinstance(o, CreateBoson)\n     o = o.subs(i, j)\n     assert o.atoms(Symbol) == {j}\n@@ -258,7 +258,7 @@ def test_commutation():\n     c1 = Commutator(F(a), Fd(a))\n     assert Commutator.eval(c1, c1) == 0\n     c = Commutator(Fd(a)*F(i),Fd(b)*F(j))\n-    assert latex(c) == r'\\left[a^\\dagger_{a} a_{i},a^\\dagger_{b} a_{j}\\right]'\n+    assert latex(c) == r'\\left[{a^\\dagger_{a}} a_{i},{a^\\dagger_{b}} a_{j}\\right]'\n     assert repr(c) == 'Commutator(CreateFermion(a)*AnnihilateFermion(i),CreateFermion(b)*AnnihilateFermion(j))'\n     assert str(c) == '[CreateFermion(a)*AnnihilateFermion(i),CreateFermion(b)*AnnihilateFermion(j)]'\n \n@@ -288,7 +288,7 @@ def test_create_f():\n     assert Dagger(B(p)).apply_operator(q) == q*CreateBoson(p)\n     assert repr(Fd(p)) == 'CreateFermion(p)'\n     assert srepr(Fd(p)) == \"CreateFermion(Symbol('p'))\"\n-    assert latex(Fd(p)) == r'a^\\dagger_{p}'\n+    assert latex(Fd(p)) == r'{a^\\dagger_{p}}'\n \n \n def test_annihilate_f():\n@@ -426,7 +426,7 @@ def test_NO():\n     assert no.has_q_annihilators == -1\n     assert str(no) == ':CreateFermion(a)*CreateFermion(i):'\n     assert repr(no) == 'NO(CreateFermion(a)*CreateFermion(i))'\n-    assert latex(no) == r'\\left\\{a^\\dagger_{a} a^\\dagger_{i}\\right\\}'\n+    assert latex(no) == r'\\left\\{{a^\\dagger_{a}} {a^\\dagger_{i}}\\right\\}'\n     raises(NotImplementedError, lambda:  NO(Bd(p)*F(q)))\n \n \n@@ -531,7 +531,7 @@ def test_Tensors():\n     assert tabij.subs(b, c) == AT('t', (a, c), (i, j))\n     assert (2*tabij).subs(i, c) == 2*AT('t', (a, b), (c, j))\n     assert tabij.symbol == Symbol('t')\n-    assert latex(tabij) == 't^{ab}_{ij}'\n+    assert latex(tabij) == '{t^{ab}_{ij}}'\n     assert str(tabij) == 't((_a, _b),(_i, _j))'\n \n     assert AT('t', (a, a), (i, j)).subs(a, b) == AT('t', (b, b), (i, j))\n@@ -1255,6 +1255,12 @@ def test_internal_external_pqrs_AT():\n         assert substitute_dummies(exprs[0]) == substitute_dummies(permut)\n \n \n+def test_issue_19661():\n+    a = Symbol('0')\n+    assert latex(Commutator(Bd(a)**2, B(a))\n+                 ) == '- \\\\left[b_{0},{b^\\\\dagger_{0}}^{2}\\\\right]'\n+\n+\n def test_canonical_ordering_AntiSymmetricTensor():\n     v = symbols(\"v\")\n \n",
  "problem_statement": "Issues with Latex printing output in second quantization module\nThere are Latex rendering problems within the \"secondquant\" module, as it does not correctly interpret double superscripts containing the \"dagger\" command within Jupyter Notebook.\r\n\r\nLet's see a minimal example\r\n\r\n```\r\nIn [1]: import sympy as sp\r\n        from sympy.physics.secondquant import B, Bd, Commutator\r\n        sp.init_printing()\r\n\r\nIn [2]: a = sp.Symbol('0')\r\n\r\nIn [3]: Commutator(Bd(a)**2, B(a))\r\nOut[3]: \\displaystyle - \\left[b_{0},b^\\dagger_{0}^{2}\\right]\r\n```\r\nSo, it doesn't render correctly, and that's because the double superscript `\"b^\\dagger_{0}^{2}\"`. It should be correct by adding curly brackets `\"{b^\\dagger_{0}}^{2}\"`\n",
  "hints_text": "",
  "created_at": "2021-08-22T20:29:08Z",
  "version": "1.9",
  "FAIL_TO_PASS": "[\"test_NO\", \"test_Tensors\", \"test_commutation\", \"test_create\", \"test_create_f\", \"test_issue_19661\"]",
  "PASS_TO_PASS": "[\"test_PermutationOperator\", \"test_annihilate\", \"test_annihilate_b\", \"test_annihilate_f\", \"test_basic_apply\", \"test_basic_state\", \"test_complex_apply\", \"test_contraction\", \"test_create_b\", \"test_dagger\", \"test_dummy_order_ambiguous\", \"test_dummy_order_inner_outer_lines_VT1T1T1\", \"test_dummy_order_inner_outer_lines_VT1T1T1T1\", \"test_dummy_order_inner_outer_lines_VT1T1T1T1_AT\", \"test_dummy_order_inner_outer_lines_VT1T1T1_AT\", \"test_dummy_order_well_defined\", \"test_equivalent_internal_lines_VT1T1\", \"test_equivalent_internal_lines_VT1T1_AT\", \"test_equivalent_internal_lines_VT2\", \"test_equivalent_internal_lines_VT2_AT\", \"test_equivalent_internal_lines_VT2conjT2\", \"test_equivalent_internal_lines_VT2conjT2_AT\", \"test_equivalent_internal_lines_VT2conjT2_ambiguous_order\", \"test_equivalent_internal_lines_VT2conjT2_ambiguous_order_AT\", \"test_evaluate_deltas\", \"test_fixed_bosonic_basis\", \"test_fully_contracted\", \"test_get_subNO\", \"test_index_permutations_with_dummies\", \"test_inner_product\", \"test_internal_external_VT2T2\", \"test_internal_external_VT2T2_AT\", \"test_internal_external_pqrs\", \"test_internal_external_pqrs_AT\", \"test_matrix_elements\", \"test_number_operator\", \"test_operator\", \"test_sorting\", \"test_substitute_dummies_NO_operator\", \"test_substitute_dummies_SQ_operator\", \"test_substitute_dummies_new_indices\", \"test_substitute_dummies_substitution_order\", \"test_substitute_dummies_without_dummies\", \"test_symbolic_matrix_elements\", \"test_wicks\"]",
  "environment_setup_commit": "f9a6f50ec0c74d935c50a6e9c9b2cb0469570d91",
  "patch_files": [
    "sympy/physics/secondquant.py"
  ],
  "test_patch_files": [
    "sympy/physics/tests/test_secondquant.py"
  ],
  "patch_diff_details": {
    "sympy/physics/secondquant.py": {
      "diffs": [
        {
          "start_line_old": 221,
          "end_line_old": 221,
          "file_pos": 2,
          "file_context_length": 25697,
          "closest_snippet_id": "/tmp/repos/sympy/sympy/physics/secondquant.py_Commutator.doit_Commutator._latex.1.1",
          "closest_snippet_line_distance": 1543,
          "pos": 22,
          "context_length": 10028
        },
        {
          "start_line_old": 481,
          "end_line_old": 481,
          "file_pos": 2,
          "file_context_length": 25697,
          "closest_snippet_id": "/tmp/repos/sympy/sympy/physics/secondquant.py_Dagger_Dagger.__new__.5.1",
          "closest_snippet_line_distance": 376
        },
        {
          "start_line_old": 942,
          "end_line_old": 942,
          "file_pos": 2,
          "file_context_length": 25697,
          "closest_snippet_id": "/tmp/repos/sympy/sympy/physics/secondquant.py_Dagger_Dagger.__new__.5.1",
          "closest_snippet_line_distance": 837
        }
      ]
    }
  },
  "vectors": 9559,
  "snippets": [
    {
      "position": 1,
      "id": "/tmp/repos/sympy/sympy/physics/vector/printing.py_vlatex_vlatex.3.1",
      "distance": 0.8973662257194519,
      "file_path": "sympy/physics/vector/printing.py",
      "start_line": 289,
      "end_line": 326,
      "tokens": 343,
      "context_length": 343
    },
    {
      "position": 2,
      "id": "/tmp/repos/sympy/sympy/physics/secondquant.py_1_WicksTheoremDoesNotApply.1",
      "distance": 0.9042377471923828,
      "file_path": "sympy/physics/secondquant.py",
      "start_line": 1,
      "end_line": 78,
      "tokens": 465,
      "context_length": 808,
      "file_pos": 2
    },
    {
      "position": 3,
      "id": "/tmp/repos/sympy/sympy/physics/vector/printing.py_VectorLatexPrinter._print_Derivative_VectorLatexPrinter._print_Derivative.20.1",
      "distance": 0.9275633692741394,
      "file_path": "sympy/physics/vector/printing.py",
      "start_line": 69,
      "end_line": 103,
      "tokens": 349,
      "context_length": 1157
    },
    {
      "position": 4,
      "id": "/tmp/repos/sympy/sympy/physics/quantum/cg.py_Wigner6j._latex_Wigner6j.doit.2.1",
      "distance": 0.9302953481674194,
      "file_path": "sympy/physics/quantum/cg.py",
      "start_line": 314,
      "end_line": 323,
      "tokens": 152,
      "context_length": 1309
    },
    {
      "position": 5,
      "id": "/tmp/repos/sympy/sympy/printing/latex.py_modifier_dict__between_two_numbers_p.1",
      "distance": 0.9349957704544067,
      "file_path": "sympy/printing/latex.py",
      "start_line": 84,
      "end_line": 119,
      "tokens": 491,
      "context_length": 1800
    },
    {
      "position": 6,
      "id": "/tmp/repos/sympy/sympy/physics/quantum/cg.py_Wigner9j._latex_Wigner9j.doit.2.1",
      "distance": 0.9369127750396729,
      "file_path": "sympy/physics/quantum/cg.py",
      "start_line": 418,
      "end_line": 427,
      "tokens": 185,
      "context_length": 1985
    },
    {
      "position": 7,
      "id": "/tmp/repos/sympy/sympy/printing/latex.py_1_28",
      "distance": 0.943835973739624,
      "file_path": "sympy/printing/latex.py",
      "start_line": 1,
      "end_line": 83,
      "tokens": 722,
      "context_length": 2707
    },
    {
      "position": 8,
      "id": "/tmp/repos/sympy/sympy/physics/secondquant.py_Commutator.doit_Commutator._latex.1.1",
      "distance": 0.9591186046600342,
      "file_path": "sympy/physics/secondquant.py",
      "start_line": 1764,
      "end_line": 1802,
      "tokens": 315,
      "context_length": 3022,
      "file_pos": 4
    },
    {
      "position": 9,
      "id": "/tmp/repos/sympy/sympy/physics/quantum/cg.py_Wigner3j._latex_Wigner3j.doit.2.1",
      "distance": 0.9596761465072632,
      "file_path": "sympy/physics/quantum/cg.py",
      "start_line": 139,
      "end_line": 148,
      "tokens": 152,
      "context_length": 3174
    },
    {
      "position": 10,
      "id": "/tmp/repos/sympy/sympy/printing/latex.py_LatexPrinter._print_Function_LatexPrinter._special_function_classes.6.1",
      "distance": 0.9629644155502319,
      "file_path": "sympy/printing/latex.py",
      "start_line": 867,
      "end_line": 964,
      "tokens": 908,
      "context_length": 4082
    },
    {
      "position": 11,
      "id": "/tmp/repos/sympy/sympy/parsing/latex/_parse_latex_antlr.py_1_12.MathErrorListener.syntaxError.4",
      "distance": 0.9635239839553833,
      "file_path": "sympy/parsing/latex/_parse_latex_antlr.py",
      "start_line": 1,
      "end_line": 58,
      "tokens": 476,
      "context_length": 4558
    },
    {
      "position": 12,
      "id": "/tmp/repos/sympy/sympy/physics/quantum/commutator.py_Commutator._eval_adjoint_",
      "distance": 0.9660006761550903,
      "file_path": "sympy/physics/quantum/commutator.py",
      "start_line": 213,
      "end_line": 236,
      "tokens": 253,
      "context_length": 4811
    },
    {
      "position": 13,
      "id": "/tmp/repos/sympy/sympy/printing/latex.py_latex.1_latex.2.1",
      "distance": 0.9715409278869629,
      "file_path": "sympy/printing/latex.py",
      "start_line": 2782,
      "end_line": 2984,
      "tokens": 2702,
      "context_length": 7513
    },
    {
      "position": 14,
      "id": "/tmp/repos/sympy/sympy/physics/quantum/qexpr.py_1_QuantumError.1",
      "distance": 0.9748215079307556,
      "file_path": "sympy/physics/quantum/qexpr.py",
      "start_line": 1,
      "end_line": 23,
      "tokens": 122,
      "context_length": 7635
    },
    {
      "position": 15,
      "id": "/tmp/repos/sympy/sympy/physics/quantum/spin.py_1_m_values.4.1",
      "distance": 0.9794702529907227,
      "file_path": "sympy/physics/quantum/spin.py",
      "start_line": 1,
      "end_line": 58,
      "tokens": 473,
      "context_length": 8108
    },
    {
      "position": 16,
      "id": "/tmp/repos/sympy/sympy/physics/vector/dyadic.py_Dyadic._latex_Dyadic._latex.9.1",
      "distance": 0.9797894358634949,
      "file_path": "sympy/physics/vector/dyadic.py",
      "start_line": 159,
      "end_line": 193,
      "tokens": 382,
      "context_length": 8490
    },
    {
      "position": 17,
      "id": "/tmp/repos/sympy/sympy/physics/vector/printing.py_VectorLatexPrinter_VectorLatexPrinter._print_Function.4.3.1.1",
      "distance": 0.980756402015686,
      "file_path": "sympy/physics/vector/printing.py",
      "start_line": 44,
      "end_line": 67,
      "tokens": 229,
      "context_length": 8719
    },
    {
      "position": 18,
      "id": "/tmp/repos/sympy/sympy/physics/quantum/sho1d.py_RaisingOp.10_RaisingOp._print_contents_latex.2.1",
      "distance": 0.9917687773704529,
      "file_path": "sympy/physics/quantum/sho1d.py",
      "start_line": 144,
      "end_line": 160,
      "tokens": 165,
      "context_length": 8884
    },
    {
      "position": 19,
      "id": "/tmp/repos/sympy/sympy/physics/quantum/cg.py_Wigner9j._pretty_Wigner9j._pretty.9.1",
      "distance": 0.9966214895248413,
      "file_path": "sympy/physics/quantum/cg.py",
      "start_line": 380,
      "end_line": 416,
      "tokens": 349,
      "context_length": 9233
    },
    {
      "position": 20,
      "id": "/tmp/repos/sympy/sympy/physics/quantum/cg.py_Wigner6j._pretty_Wigner6j._pretty.9.1",
      "distance": 0.9967198967933655,
      "file_path": "sympy/physics/quantum/cg.py",
      "start_line": 279,
      "end_line": 312,
      "tokens": 322,
      "context_length": 9555
    },
    {
      "position": 21,
      "id": "/tmp/repos/sympy/sympy/physics/quantum/anticommutator.py_AntiCommutator._eval_adjoint_",
      "distance": 1.000422477722168,
      "file_path": "sympy/physics/quantum/anticommutator.py",
      "start_line": 124,
      "end_line": 147,
      "tokens": 257,
      "context_length": 9812
    },
    {
      "position": 22,
      "id": "/tmp/repos/sympy/sympy/physics/secondquant.py_AntiSymmetricTensor._latex_AntiSymmetricTensor.symbol.2.1",
      "distance": 1.0054779052734375,
      "file_path": "sympy/physics/secondquant.py",
      "start_line": 220,
      "end_line": 245,
      "tokens": 216,
      "context_length": 10028,
      "file_pos": 11
    },
    {
      "position": 23,
      "id": "/tmp/repos/sympy/sympy/physics/quantum/cg.py_CG._pretty_CG._latex.2.1",
      "distance": 1.0081360340118408,
      "file_path": "sympy/physics/quantum/cg.py",
      "start_line": 213,
      "end_line": 234,
      "tokens": 255,
      "context_length": 10283
    },
    {
      "position": 24,
      "id": "/tmp/repos/sympy/sympy/physics/vector/printing.py_1___all__.1",
      "distance": 1.0121746063232422,
      "file_path": "sympy/physics/vector/printing.py",
      "start_line": 1,
      "end_line": 12,
      "tokens": 133,
      "context_length": 10416
    },
    {
      "position": 25,
      "id": "/tmp/repos/sympy/sympy/printing/printer.py_1_2",
      "distance": 1.0127520561218262,
      "file_path": "sympy/printing/printer.py",
      "start_line": 1,
      "end_line": 212,
      "tokens": 1913,
      "context_length": 12329
    },
    {
      "position": 26,
      "id": "/tmp/repos/sympy/sympy/printing/pretty/pretty_symbology.py_xstr_55",
      "distance": 1.0181889533996582,
      "file_path": "sympy/printing/pretty/pretty_symbology.py",
      "start_line": 89,
      "end_line": 165,
      "tokens": 756,
      "context_length": 13085
    },
    {
      "position": 27,
      "id": "/tmp/repos/sympy/sympy/physics/quantum/cg.py_Wigner3j._pretty_Wigner3j._pretty.9.1",
      "distance": 1.022840142250061,
      "file_path": "sympy/physics/quantum/cg.py",
      "start_line": 104,
      "end_line": 137,
      "tokens": 317,
      "context_length": 13402
    },
    {
      "position": 28,
      "id": "/tmp/repos/sympy/sympy/printing/pretty/pretty_symbology.py_LSUB_74",
      "distance": 1.0242716073989868,
      "file_path": "sympy/printing/pretty/pretty_symbology.py",
      "start_line": 166,
      "end_line": 197,
      "tokens": 314,
      "context_length": 13716
    },
    {
      "position": 29,
      "id": "/tmp/repos/sympy/sympy/physics/quantum/spin.py_WignerD.m_WignerD._latex.2.1",
      "distance": 1.0257624387741089,
      "file_path": "sympy/physics/quantum/spin.py",
      "start_line": 783,
      "end_line": 814,
      "tokens": 232,
      "context_length": 13948
    },
    {
      "position": 30,
      "id": "/tmp/repos/sympy/sympy/physics/quantum/tensorproduct.py_TensorProduct._latex_TensorProduct._latex.5.1",
      "distance": 1.0277208089828491,
      "file_path": "sympy/physics/quantum/tensorproduct.py",
      "start_line": 204,
      "end_line": 231,
      "tokens": 285,
      "context_length": 14233
    },
    {
      "position": 31,
      "id": "/tmp/repos/sympy/sympy/physics/quantum/commutator.py_Commutator._expand_pow_Commutator._expand_pow.8.1",
      "distance": 1.0286521911621094,
      "file_path": "sympy/physics/quantum/commutator.py",
      "start_line": 121,
      "end_line": 135,
      "tokens": 148,
      "context_length": 14381
    },
    {
      "position": 32,
      "id": "/tmp/repos/sympy/sympy/physics/secondquant.py_Commutator_Commutator.is_commutative.1",
      "distance": 1.033156394958496,
      "file_path": "sympy/physics/secondquant.py",
      "start_line": 1657,
      "end_line": 1702,
      "tokens": 356,
      "context_length": 14737,
      "file_pos": 14
    },
    {
      "position": 33,
      "id": "/tmp/repos/sympy/sympy/printing/mathml.py_MathMLPresentationPrinter._print_bernoulli_MathMLPresentationPrinter._print_Inverse.6.1",
      "distance": 1.033984899520874,
      "file_path": "sympy/printing/mathml.py",
      "start_line": 1695,
      "end_line": 1779,
      "tokens": 658,
      "context_length": 15395
    },
    {
      "position": 34,
      "id": "/tmp/repos/sympy/sympy/physics/vector/vector.py_Vector._latex_Vector._latex.10.1",
      "distance": 1.0341169834136963,
      "file_path": "sympy/physics/vector/vector.py",
      "start_line": 221,
      "end_line": 253,
      "tokens": 373,
      "context_length": 15768
    },
    {
      "position": 35,
      "id": "/tmp/repos/sympy/sympy/physics/secondquant.py_AntiSymmetricTensor.__new___AntiSymmetricTensor.__new__.5.2.1.1",
      "distance": 1.0355719327926636,
      "file_path": "sympy/physics/secondquant.py",
      "start_line": 174,
      "end_line": 193,
      "tokens": 162,
      "context_length": 15930,
      "file_pos": 16
    },
    {
      "position": 36,
      "id": "/tmp/repos/sympy/sympy/printing/mathml.py_MathMLContentPrinter._print_Symbol.3_MathMLContentPrinter._print_Symbol.12.1",
      "distance": 1.035614252090454,
      "file_path": "sympy/printing/mathml.py",
      "start_line": 419,
      "end_line": 453,
      "tokens": 282,
      "context_length": 16212
    },
    {
      "position": 37,
      "id": "/tmp/repos/sympy/sympy/parsing/latex/_parse_latex_antlr.py_handle_limit_",
      "distance": 1.0366885662078857,
      "file_path": "sympy/parsing/latex/_parse_latex_antlr.py",
      "start_line": 562,
      "end_line": 595,
      "tokens": 222,
      "context_length": 16434
    },
    {
      "position": 38,
      "id": "/tmp/repos/sympy/examples/advanced/qft.py_main_",
      "distance": 1.0383083820343018,
      "file_path": "examples/advanced/qft.py",
      "start_line": 85,
      "end_line": 138,
      "tokens": 607,
      "context_length": 17041
    },
    {
      "position": 39,
      "id": "/tmp/repos/sympy/sympy/physics/quantum/spin.py_WignerD._pretty_WignerD.doit.2.1",
      "distance": 1.0428348779678345,
      "file_path": "sympy/physics/quantum/spin.py",
      "start_line": 816,
      "end_line": 850,
      "tokens": 325,
      "context_length": 17366
    },
    {
      "position": 40,
      "id": "/tmp/repos/sympy/sympy/printing/latex.py_latex_escape_LatexPrinter",
      "distance": 1.0428836345672607,
      "file_path": "sympy/printing/latex.py",
      "start_line": 122,
      "end_line": 2746,
      "tokens": 133,
      "context_length": 17499
    },
    {
      "position": 41,
      "id": "/tmp/repos/sympy/sympy/physics/quantum/innerproduct.py_InnerProduct._latex_",
      "distance": 1.0449731349945068,
      "file_path": "sympy/physics/quantum/innerproduct.py",
      "start_line": 119,
      "end_line": 137,
      "tokens": 155,
      "context_length": 17654
    },
    {
      "position": 42,
      "id": "/tmp/repos/sympy/sympy/printing/mathml.py_MathMLPresentationPrinter._print_BasisDependent_MathMLPresentationPrinter._print_BasisDependent.6.1",
      "distance": 1.0450588464736938,
      "file_path": "sympy/printing/mathml.py",
      "start_line": 1371,
      "end_line": 1410,
      "tokens": 341,
      "context_length": 17995
    },
    {
      "position": 43,
      "id": "/tmp/repos/sympy/sympy/printing/theanocode.py_1_10.mapping.1",
      "distance": 1.0453379154205322,
      "file_path": "sympy/printing/theanocode.py",
      "start_line": 1,
      "end_line": 67,
      "tokens": 613,
      "context_length": 18608
    },
    {
      "position": 44,
      "id": "/tmp/repos/sympy/sympy/physics/vector/dyadic.py_Dyadic._pretty_Dyadic._pretty.3.1",
      "distance": 1.0469555854797363,
      "file_path": "sympy/physics/vector/dyadic.py",
      "start_line": 195,
      "end_line": 247,
      "tokens": 456,
      "context_length": 19064
    },
    {
      "position": 45,
      "id": "/tmp/repos/sympy/sympy/physics/secondquant.py_Commutator.eval_Commutator.eval.27.1.1",
      "distance": 1.0476406812667847,
      "file_path": "sympy/physics/secondquant.py",
      "start_line": 1704,
      "end_line": 1762,
      "tokens": 499,
      "context_length": 19563,
      "file_pos": 19
    },
    {
      "position": 46,
      "id": "/tmp/repos/sympy/examples/advanced/qft.py_1_m.1",
      "distance": 1.048445224761963,
      "file_path": "examples/advanced/qft.py",
      "start_line": 1,
      "end_line": 36,
      "tokens": 236,
      "context_length": 19799
    },
    {
      "position": 47,
      "id": "/tmp/repos/sympy/sympy/printing/mathml.py_MathMLPresentationPrinter._print_MatrixSymbol_MathMLPresentationPrinter._print_binomial.7.1",
      "distance": 1.0499992370605469,
      "file_path": "sympy/printing/mathml.py",
      "start_line": 1009,
      "end_line": 1042,
      "tokens": 286,
      "context_length": 20085
    },
    {
      "position": 48,
      "id": "/tmp/repos/sympy/sympy/parsing/latex/__init__.py_1_",
      "distance": 1.0536376237869263,
      "file_path": "sympy/parsing/latex/__init__.py",
      "start_line": 1,
      "end_line": 36,
      "tokens": 273,
      "context_length": 20358
    },
    {
      "position": 49,
      "id": "/tmp/repos/sympy/sympy/physics/quantum/fermion.py_FermionOp._eval_anticommutator_BosonOp_FermionOp._print_contents_pretty.3.2.1.1",
      "distance": 1.0549352169036865,
      "file_path": "sympy/physics/quantum/fermion.py",
      "start_line": 81,
      "end_line": 109,
      "tokens": 264,
      "context_length": 20622
    },
    {
      "position": 50,
      "id": "/tmp/repos/sympy/sympy/physics/quantum/__init__.py_1_",
      "distance": 1.0550787448883057,
      "file_path": "sympy/physics/quantum/__init__.py",
      "start_line": 1,
      "end_line": 60,
      "tokens": 465,
      "context_length": 21087
    },
    {
      "position": 51,
      "id": "/tmp/repos/sympy/sympy/printing/mathml.py_MathMLPresentationPrinter._print_Number_MathMLPresentationPrinter._print_Derivative.17.1",
      "distance": 1.0555663108825684,
      "file_path": "sympy/printing/mathml.py",
      "start_line": 1098,
      "end_line": 1157,
      "tokens": 429,
      "context_length": 21516
    },
    {
      "position": 52,
      "id": "/tmp/repos/sympy/sympy/printing/pretty/pretty.py_PrettyPrinter._print_Transpose_PrettyPrinter._print_BlockMatrix.2.1",
      "distance": 1.0560951232910156,
      "file_path": "sympy/printing/pretty/pretty.py",
      "start_line": 835,
      "end_line": 858,
      "tokens": 215,
      "context_length": 21731
    },
    {
      "position": 53,
      "id": "/tmp/repos/sympy/sympy/physics/quantum/state.py_StateBase._sympystr_StateBase._latex.4.1",
      "distance": 1.0561381578445435,
      "file_path": "sympy/physics/quantum/state.py",
      "start_line": 171,
      "end_line": 190,
      "tokens": 238,
      "context_length": 21969
    },
    {
      "position": 54,
      "id": "/tmp/repos/sympy/sympy/physics/secondquant.py_substitute_dummies.3___kprint.2.1",
      "distance": 1.0575191974639893,
      "file_path": "sympy/physics/secondquant.py",
      "start_line": 2457,
      "end_line": 2566,
      "tokens": 783,
      "context_length": 22752,
      "file_pos": 24
    },
    {
      "position": 55,
      "id": "/tmp/repos/sympy/sympy/printing/latex.py_LatexPrinter._print_Poly_LatexPrinter.emptyPrinter.s.2.1",
      "distance": 1.0600059032440186,
      "file_path": "sympy/printing/latex.py",
      "start_line": 2275,
      "end_line": 2746,
      "tokens": 4506,
      "context_length": 27258
    },
    {
      "position": 56,
      "id": "/tmp/repos/sympy/sympy/printing/mathml.py_MathMLPresentationPrinter._print_MatPow_MathMLPresentationPrinter._print_ceiling.7.1",
      "distance": 1.0615832805633545,
      "file_path": "sympy/printing/mathml.py",
      "start_line": 1810,
      "end_line": 1867,
      "tokens": 479,
      "context_length": 27737
    },
    {
      "position": 57,
      "id": "/tmp/repos/sympy/sympy/physics/quantum/qexpr.py_QExpr._sympyrepr_QExpr._represent_default_basis.1",
      "distance": 1.062169075012207,
      "file_path": "sympy/physics/quantum/qexpr.py",
      "start_line": 304,
      "end_line": 328,
      "tokens": 178,
      "context_length": 27915
    },
    {
      "position": 58,
      "id": "/tmp/repos/sympy/sympy/physics/secondquant.py_Dagger_Dagger.__new__.5.1",
      "distance": 1.062779426574707,
      "file_path": "sympy/physics/secondquant.py",
      "start_line": 81,
      "end_line": 105,
      "tokens": 145,
      "context_length": 28060,
      "file_pos": 24
    },
    {
      "position": 59,
      "id": "/tmp/repos/sympy/sympy/physics/quantum/commutator.py_Commutator.eval_Commutator.eval.11.1.1",
      "distance": 1.0642597675323486,
      "file_path": "sympy/physics/quantum/commutator.py",
      "start_line": 100,
      "end_line": 119,
      "tokens": 187,
      "context_length": 28247
    },
    {
      "position": 60,
      "id": "/tmp/repos/sympy/sympy/printing/numpy.py_SciPyPrinter._print_betainc_regularized_SciPyPrinter._print_airybiprime.1.1",
      "distance": 1.0661393404006958,
      "file_path": "sympy/printing/numpy.py",
      "start_line": 400,
      "end_line": 436,
      "tokens": 368,
      "context_length": 28615
    },
    {
      "position": 61,
      "id": "/tmp/repos/sympy/sympy/printing/mathml.py_MathMLPresentationPrinter._print_Float_MathMLPresentationPrinter._print_Float.dps.7.20.3.1",
      "distance": 1.067188024520874,
      "file_path": "sympy/printing/mathml.py",
      "start_line": 1173,
      "end_line": 1210,
      "tokens": 333,
      "context_length": 28948
    },
    {
      "position": 62,
      "id": "/tmp/repos/sympy/sympy/printing/octave.py_OctaveCodePrinter._print_Indexed_OctaveCodePrinter._print_airybiprime.1.1",
      "distance": 1.068241000175476,
      "file_path": "sympy/printing/octave.py",
      "start_line": 378,
      "end_line": 465,
      "tokens": 780,
      "context_length": 29728
    },
    {
      "position": 63,
      "id": "/tmp/repos/sympy/sympy/printing/latex.py_translate_latex",
      "distance": 1.0682768821716309,
      "file_path": "sympy/printing/latex.py",
      "start_line": 2749,
      "end_line": 2984,
      "tokens": 239,
      "context_length": 29967
    },
    {
      "position": 64,
      "id": "/tmp/repos/sympy/sympy/physics/quantum/spin.py_J2Op_J2Op._eval_rewrite_as_plusminus.2.1",
      "distance": 1.068551778793335,
      "file_path": "sympy/physics/quantum/spin.py",
      "start_line": 348,
      "end_line": 418,
      "tokens": 625,
      "context_length": 30592
    },
    {
      "position": 65,
      "id": "/tmp/repos/sympy/sympy/core/_print_helpers.py_Printable._repr_latex__",
      "distance": 1.068859338760376,
      "file_path": "sympy/core/_print_helpers.py",
      "start_line": 54,
      "end_line": 66,
      "tokens": 116,
      "context_length": 30708
    },
    {
      "position": 66,
      "id": "/tmp/repos/sympy/sympy/__init__.py_maximum_42",
      "distance": 1.0693845748901367,
      "file_path": "sympy/__init__.py",
      "start_line": 226,
      "end_line": 254,
      "tokens": 335,
      "context_length": 31043
    }
  ],
  "files": [
    {
      "file_path": "sympy/physics/vector/printing.py",
      "position": 1,
      "tokens": 2936,
      "context_length": 2936
    },
    {
      "file_path": "sympy/physics/secondquant.py",
      "position": 2,
      "tokens": 22761,
      "context_length": 25697
    },
    {
      "file_path": "sympy/physics/quantum/cg.py",
      "position": 3,
      "tokens": 6736,
      "context_length": 32433
    },
    {
      "file_path": "sympy/printing/latex.py",
      "position": 4,
      "tokens": 30220,
      "context_length": 62653
    },
    {
      "file_path": "sympy/parsing/latex/_parse_latex_antlr.py",
      "position": 5,
      "tokens": 4709,
      "context_length": 67362
    },
    {
      "file_path": "sympy/physics/quantum/commutator.py",
      "position": 6,
      "tokens": 2054,
      "context_length": 69416
    },
    {
      "file_path": "sympy/physics/quantum/qexpr.py",
      "position": 7,
      "tokens": 3035,
      "context_length": 72451
    },
    {
      "file_path": "sympy/physics/quantum/spin.py",
      "position": 8,
      "tokens": 20392,
      "context_length": 92843
    },
    {
      "file_path": "sympy/physics/vector/dyadic.py",
      "position": 9,
      "tokens": 4815,
      "context_length": 97658
    },
    {
      "file_path": "sympy/physics/quantum/sho1d.py",
      "position": 10,
      "tokens": 5391,
      "context_length": 103049
    },
    {
      "file_path": "sympy/physics/quantum/anticommutator.py",
      "position": 11,
      "tokens": 1169,
      "context_length": 104218
    },
    {
      "file_path": "sympy/printing/printer.py",
      "position": 12,
      "tokens": 3292,
      "context_length": 107510
    },
    {
      "file_path": "sympy/printing/pretty/pretty_symbology.py",
      "position": 13,
      "tokens": 5856,
      "context_length": 113366
    },
    {
      "file_path": "sympy/physics/quantum/tensorproduct.py",
      "position": 14,
      "tokens": 3448,
      "context_length": 116814
    },
    {
      "file_path": "sympy/printing/mathml.py",
      "position": 15,
      "tokens": 16890,
      "context_length": 133704
    },
    {
      "file_path": "sympy/physics/vector/vector.py",
      "position": 16,
      "tokens": 6519,
      "context_length": 140223
    },
    {
      "file_path": "examples/advanced/qft.py",
      "position": 17,
      "tokens": 1303,
      "context_length": 141526
    },
    {
      "file_path": "sympy/physics/quantum/innerproduct.py",
      "position": 18,
      "tokens": 1077,
      "context_length": 142603
    },
    {
      "file_path": "sympy/printing/theanocode.py",
      "position": 19,
      "tokens": 4366,
      "context_length": 146969
    },
    {
      "file_path": "sympy/parsing/latex/__init__.py",
      "position": 20,
      "tokens": 273,
      "context_length": 147242
    },
    {
      "file_path": "sympy/physics/quantum/fermion.py",
      "position": 21,
      "tokens": 1186,
      "context_length": 148428
    },
    {
      "file_path": "sympy/physics/quantum/__init__.py",
      "position": 22,
      "tokens": 466,
      "context_length": 148894
    },
    {
      "file_path": "sympy/printing/pretty/pretty.py",
      "position": 23,
      "tokens": 25296,
      "context_length": 174190
    },
    {
      "file_path": "sympy/physics/quantum/state.py",
      "position": 24,
      "tokens": 7093,
      "context_length": 181283
    },
    {
      "file_path": "sympy/printing/numpy.py",
      "position": 25,
      "tokens": 4951,
      "context_length": 186234
    },
    {
      "file_path": "sympy/printing/octave.py",
      "position": 26,
      "tokens": 6590,
      "context_length": 192824
    },
    {
      "file_path": "sympy/core/_print_helpers.py",
      "position": 27,
      "tokens": 536,
      "context_length": 193360
    },
    {
      "file_path": "sympy/__init__.py",
      "position": 28,
      "tokens": 8173,
      "context_length": 201533
    }
  ]
}